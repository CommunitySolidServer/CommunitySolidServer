(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[650],{6689:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/turtle",function(){return r(9065)}])},5138:function(e,t,r){"use strict";r.d(t,{o:function(){return o}});var n=r(5893),u=r(548),o=function(e){return(0,u.F)(e.resource,e.access)?(0,n.jsx)(n.Fragment,{children:e.children}):null}},8080:function(e,t,r){"use strict";r.d(t,{g:function(){return a}});var n=r(5893),u=(r(7294),r(9008)),o=r(1754),c=r(9826),a=function(e){return(0,n.jsxs)(o.A,{path:e.url,children:[(0,n.jsx)(u.default,{children:(0,n.jsx)("title",{children:"Penny"})}),(0,n.jsx)("div",{className:"md:w-4/5 lg:w-2/3 xl:w-1/2 mx-auto p-5 md:pt-20",children:(0,n.jsx)(c.$,{})})]})}},7046:function(e,t,r){"use strict";r.d(t,{O:function(){return u}});var n=r(5893);var u=function(e){return(0,n.jsx)("div",{className:"pb-5",children:(0,n.jsx)("h3",{className:"pt-5 text-2xl font-bold border-b-4 border-coolGray-700 w-3/4",children:e.children})})}},548:function(e,t,r){"use strict";r.d(t,{F:function(){return u}});var n=r(8504);function u(e,t){var r=(0,n.O1)(e);return t.every((function(e){return!0===r.user[e]}))}},9065:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return S}});var n=r(5893),u=r(7294),o=r(1163),c=r(8080),a=r(1664),s=r(9008),i=r(2132),l=r(5434),d=r(2010),f=r(7046),h=r(1070),x=r(3191),v=r(5138),p=r(8520),b=r.n(p),w=r(8504),j=r(4305),g=r(3288),m=r(7640);function y(e,t,r,n,u,o,c){try{var a=e[o](c),s=a.value}catch(i){return void r(i)}a.done?t(s):Promise.resolve(s).then(n,u)}function N(e){return function(){var t=this,r=arguments;return new Promise((function(n,u){var o=e.apply(t,r);function c(e){y(o,n,u,c,a,"next",e)}function a(e){y(o,n,u,c,a,"throw",e)}c(void 0)}))}}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){k(e,t,r[t])}))}return e}var P=N(b().mark((function e(t){var r,n,u,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,j.fetch)(t,{headers:{Accept:"text/turtle"}});case 2:if(r=e.sent,n=(0,w.Rg)(r),"string"!==typeof(u=(0,w.wg)(n))||"text/turtle"===u.substring(0,"text/turtle".length)){e.next=7;break}throw new Error("The server could not produce Turtle for the Resource at ".concat(t,"."));case 7:return e.next=9,r.text();case 9:return o=e.sent,e.abrupt("return",O({},n,{content:o}));case 11:case"end":return e.stop()}}),e)})));function _(e){var t=e?function(e){var t=new URL(e);return t.hash="",t.href}(e):null,r=(0,m.Q)(),n=(0,g.ZP)(t?[t,null===r||void 0===r?void 0:r.webId]:null,P),o=(0,u.useCallback)(N(b().mark((function e(r){var u,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,"undefined"!==typeof n.data){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,(0,j.fetch)(t,{method:"PUT",body:r,headers:{"Content-Type":"text/turtle"}});case 7:if((u=e.sent).ok){e.next=10;break}throw new Error("".concat(u.statusText," (").concat(u.status,")"));case 10:o=O({},n.data,{content:r}),n.mutate(o,!1),e.next=19;break;case 14:return e.prev=14,e.t0=e.catch(2),e.next=18,n.mutate();case 18:throw e.t0;case 19:case"end":return e.stop()}}),e,null,[[2,14]])}))),[t,n]);return O({},n,{save:o})}var T=r(1754),E=function(e){var t,r,o=_(e.url),p=(0,u.useState)(),b=p[0],w=p[1],j=(0,u.useState)(null!==(r=null===(t=o.data)||void 0===t?void 0:t.content)&&void 0!==r?r:""),g=j[0],m=j[1],y=(0,d.ql)().l10n;(0,u.useEffect)((function(){b&&(w(void 0),o.save(b))}),[b,o]);return o.data?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(T.A,{path:e.url,children:[(0,n.jsx)(s.default,{children:(0,n.jsxs)("title",{children:["Penny: ",e.url]})}),(0,n.jsxs)("div",{className:"lg:w-4/5 xl:w-2/3 2xl:w-1/2 mx-auto p-5 md:pt-20",children:[(0,n.jsx)(x.A,{id:"turtle-heading",children:(0,n.jsx)(f.O,{children:"Raw Turtle"})}),(0,n.jsxs)("div",{className:"space-y-5 pb-10",children:[(0,n.jsx)(v.o,{access:["write"],resource:o.data,children:(0,n.jsxs)("div",{className:"bg-yellow-100 border-yellow-600 border-2 rounded p-5",children:[(0,n.jsx)("p",{children:y.getString("turtle-danger-warning")}),(0,n.jsx)("p",{children:(0,n.jsx)(a.default,{href:(0,h.rg)(e.url),children:(0,n.jsx)("a",{className:"font-bold hover:underline",children:y.getString("turtle-dataset-viewer-link")})})})]})}),(0,n.jsxs)("form",{onSubmit:function(e){var t;e.preventDefault();var r=null===(t=o.data)||void 0===t?void 0:t.content;o.save(g).then((function(){(0,i.Am)((0,n.jsx)(x.A,{id:"turtle-update-toast-success",elems:{"undo-button":(0,n.jsx)("button",{onClick:function(e){e.preventDefault(),w(r)},className:"underline hover:no-underline focus:no-underline"})},children:(0,n.jsx)("span",{children:"Saved."})}),{type:"info"})})).catch((function(){(0,i.Am)((0,n.jsx)(x.A,{id:"turtle-update-toast-error",children:(0,n.jsx)("span",{children:"There was an error saving your Turtle."})}),{type:"error"})}))},className:"space-y-5",children:[(0,n.jsx)("textarea",{cols:60,rows:20,className:"rounded border-4 border-coolGray-700 p-2 w-full h-96 overflow-scroll font-mono",onChange:function(e){e.preventDefault(),m(e.target.value)},defaultValue:o.data.content}),(0,n.jsx)(v.o,{access:["write"],resource:o.data,children:(0,n.jsx)("div",{className:"grid sm:grid-cols-2 gap-5 pb-5",children:(0,n.jsxs)("button",{type:"submit",className:"p-5 rounded border-4 border-coolGray-700 text-coolGray-700 focus:text-white hover:text-white flex items-center space-x-2 text-lg focus:bg-coolGray-700 hover:bg-coolGray-700 focus:ring-2 focus:ring-offset-2 focus:ring-coolGray-700 focus:outline-none focus:ring-opacity-50",children:[(0,n.jsx)(l.HhX,{"aria-hidden":"true"}),(0,n.jsx)("span",{children:y.getString("turtle-save-button")})]})})})]})]})]})]})}):(0,n.jsx)(c.g,{})},S=function(){var e=(0,o.useRouter)().query.url;return"string"!==typeof e?(0,n.jsx)(c.g,{}):(0,n.jsx)(g.J$,{value:{provider:function(){return new Map}},children:(0,n.jsx)(E,{url:e})})}}},function(e){e.O(0,[415,876,394,894,754,774,888,179],(function(){return t=6689,e(e.s=t);var t}));var t=e.O();_N_E=t}]);