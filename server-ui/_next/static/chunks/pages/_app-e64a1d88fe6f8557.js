(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{8888:function(e,t,r){"use strict";r.r(t),r.d(t,{CordovaIFrameNavigator:function(){return n.CordovaIFrameNavigator},CordovaPopupNavigator:function(){return n.CordovaPopupNavigator},InMemoryWebStorage:function(){return n.InMemoryWebStorage},Log:function(){return n.Log},OidcClient:function(){return n.OidcClient},SessionMonitor:function(){return n.SessionMonitor},User:function(){return n.User},UserManager:function(){return n.UserManager},Version:function(){return n.Version},WebStorageStateStore:function(){return n.WebStorageStateStore},clearOidcPersistentStorage:function(){return f},getBearerToken:function(){return l},getDpopToken:function(){return d},refresh:function(){return h},registerClient:function(){return s},removeOidcQueryParam:function(){return p}});var n=r(1478),i=r(835),o=(e,t={})=>{const{sorted:r,skipIndex:n,ignorenull:i,skipBracket:o,useDot:s,whitespace:a="+"}=t,u=e=>String(e).replace(/[^ !'()~*]/gu,encodeURIComponent).replace(/ /g,a).replace(/[!'()~*]/g,(e=>`%${e.charCodeAt().toString(16).slice(-2).toUpperCase()}`)),c=(e,t=Object.keys(e))=>r?t.sort():t,l=e=>e.filter((e=>e)).join("&"),d=(e,t,r=typeof t,a=null)=>(t===a?a=i?a:u(e)+"="+a:/string|number|boolean/.test(r)?a=u(e)+"="+u(t):Array.isArray(t)?a=((e,t,r=(o?"":"[]"))=>t.length?l(t.map(((t,i)=>d(n?e+r:e+"["+i+"]",t)))):u(e+r))(e,t):t instanceof Set?a=((e,t)=>l(Array.from(t).map((t=>d(e,t)))))(e,t):"object"===r&&(a=((e,t)=>l(c(t).map((r=>d(s?`${e}.${r}`:`${e}[${r}]`,t[r])))))(e,t)),a);return e&&l(c(e).map((t=>d(t,e[t]))))};async function s(e,t){var r;if(!t.registrationEndpoint)throw new Error("Dynamic Registration could not be completed because the issuer has no registration endpoint.");if(!Array.isArray(t.idTokenSigningAlgValuesSupported))throw new Error("The OIDC issuer discovery profile is missing the 'id_token_signing_alg_values_supported' value, which is mandatory.");const n=(0,i.determineSigningAlg)(t.idTokenSigningAlgValuesSupported,i.PREFERRED_SIGNING_ALG),o={client_name:e.clientName,application_type:"web",redirect_uris:[null===(r=e.redirectUrl)||void 0===r?void 0:r.toString()],subject_type:"public",token_endpoint_auth_method:"client_secret_basic",id_token_signed_response_alg:n,grant_types:["authorization_code","refresh_token"]},s={"Content-Type":"application/json"};e.registrationAccessToken&&(s.Authorization=`Bearer ${e.registrationAccessToken}`);const a=await fetch(t.registrationEndpoint.toString(),{method:"POST",headers:s,body:JSON.stringify(o)});if(a.ok){const t=await a.json();return function(e,t){if(void 0===e.client_id)throw new Error(`Dynamic client registration failed: no client_id has been found on ${JSON.stringify(e)}`);if(t.redirectUrl&&(void 0===e.redirect_uris||e.redirect_uris[0]!==t.redirectUrl.toString()))throw new Error(`Dynamic client registration failed: the returned redirect URIs ${JSON.stringify(e.redirect_uris)} don't match the provided ${JSON.stringify([t.redirectUrl.toString()])}`)}(t,e),{clientId:t.client_id,clientSecret:t.client_secret,idTokenSignedResponseAlg:t.id_token_signed_response_alg,clientType:"dynamic"}}throw 400===a.status&&function(e,t){var r,n,i,o;if("invalid_redirect_uri"===e.error)throw new Error(`Dynamic client registration failed: the provided redirect uri [${null===(r=t.redirectUrl)||void 0===r?void 0:r.toString()}] is invalid - ${null!==(n=e.error_description)&&void 0!==n?n:""}`);if("invalid_client_metadata"===e.error)throw new Error(`Dynamic client registration failed: the provided client metadata ${JSON.stringify(t)} is invalid - ${null!==(i=e.error_description)&&void 0!==i?i:""}`);throw new Error(`Dynamic client registration failed: ${e.error} - ${null!==(o=e.error_description)&&void 0!==o?o:""}`)}(await a.json(),e),new Error(`Dynamic client registration failed: the server returned ${a.status} ${a.statusText} - ${await a.text()}`)}function a(e){return void 0!==e.error_description&&"string"===typeof e.error_description}function u(e,t){if(void 0!==(r=e).error&&"string"===typeof r.error)throw new i.OidcProviderError(`Token endpoint returned error [${e.error}]${a(e)?`: ${e.error_description}`:""}${function(e){return void 0!==e.error_uri&&"string"===typeof e.error_uri}(e)?` (see ${e.error_uri})`:""}`,e.error,a(e)?e.error_description:void 0);var r;if(!function(e){return void 0!==e.access_token&&"string"===typeof e.access_token}(e))throw new i.InvalidResponseError(["access_token"]);if(!function(e){return void 0!==e.id_token&&"string"===typeof e.id_token}(e))throw new i.InvalidResponseError(["id_token"]);if(!function(e){return void 0!==e.token_type&&"string"===typeof e.token_type}(e))throw new i.InvalidResponseError(["token_type"]);if(!function(e){return void 0===e.expires_in||"number"===typeof e.expires_in}(e))throw new i.InvalidResponseError(["expires_in"]);if(!t&&"bearer"!==e.token_type.toLowerCase())throw new Error(`Invalid token endpoint response: requested a [Bearer] token, but got a 'token_type' value of [${e.token_type}].`);return e}async function c(e,t,r,n){!function(e,t){if(t.grantType&&(!e.grantTypesSupported||!e.grantTypesSupported.includes(t.grantType)))throw new Error(`The issuer [${e.issuer}] does not support the [${t.grantType}] grant`);if(!e.tokenEndpoint)throw new Error(`This issuer [${e.issuer}] does not have a token endpoint`)}(e,r);const s={"content-type":"application/x-www-form-urlencoded"};let a;n&&(a=await(0,i.generateDpopKeyPair)(),s.DPoP=await(0,i.createDpopHeader)(e.tokenEndpoint,"POST",a)),t.clientSecret&&(s.Authorization=`Basic ${btoa(`${t.clientId}:${t.clientSecret}`)}`);const c={method:"POST",headers:s,body:o({grant_type:r.grantType,redirect_uri:r.redirectUrl,code:r.code,code_verifier:r.codeVerifier,client_id:t.clientId})},l=await await fetch(e.tokenEndpoint,c),d=u(await l.json(),n),h=await(0,i.getWebidFromTokenPayload)(d.id_token,e.jwksUri,e.issuer,t.clientId);return{accessToken:d.access_token,idToken:d.id_token,refreshToken:(p=d,void 0!==p.refresh_token&&"string"===typeof p.refresh_token?d.refresh_token:void 0),webId:h,dpopKey:a,expiresIn:d.expires_in};var p}async function l(e){let t;try{const r=new n.OidcClient({response_mode:"query",loadUserInfo:!1});if(t=await r.processSigninResponse(e),void 0===r.settings.metadata)throw new Error("Cannot retrieve issuer metadata from client information in storage.");if(void 0===r.settings.metadata.jwks_uri)throw new Error("Missing some issuer metadata from client information in storage: 'jwks_uri' is undefined");if(void 0===r.settings.metadata.issuer)throw new Error("Missing some issuer metadata from client information in storage: 'issuer' is undefined");if(void 0===r.settings.client_id)throw new Error("Missing some client information in storage: 'client_id' is undefined");const o=await(0,i.getWebidFromTokenPayload)(t.id_token,r.settings.metadata.jwks_uri,r.settings.metadata.issuer,r.settings.client_id);return{accessToken:t.access_token,idToken:t.id_token,webId:o,refreshToken:t.refresh_token}}catch(r){throw new Error(`Problem handling Auth Code Grant (Flow) redirect - URL [${e}]: ${r}`)}}async function d(e,t,r){return c(e,t,r,!0)}async function h(e,t,r,n){const s={grant_type:"refresh_token",refresh_token:e,scope:"openid offline_access"};let a={};void 0!==n&&(a={DPoP:await(0,i.createDpopHeader)(t.tokenEndpoint,"POST",n)});let c={};void 0!==r.clientSecret&&(c={Authorization:`Basic ${btoa(`${r.clientId}:${r.clientSecret}`)}`});const l=await fetch(t.tokenEndpoint,{method:"POST",body:o(s),headers:{...a,...c,"Content-Type":"application/x-www-form-urlencoded"}});let d;try{d=await l.json()}catch(f){throw new Error(`The token endpoint of issuer ${t.issuer} returned a malformed response.`)}const h=u(d,void 0!==n),p=await(0,i.getWebidFromTokenPayload)(h.id_token,t.jwksUri,t.issuer,r.clientId);return{accessToken:h.access_token,idToken:h.id_token,refreshToken:"string"===typeof h.refresh_token?h.refresh_token:void 0,webId:p,dpopKey:n,expiresIn:h.expires_in}}function p(e){const t=new URL(e);return t.searchParams.delete("code"),t.searchParams.delete("state"),t.hash="",t.toString()}async function f(){const e=new n.OidcClient({response_mode:"query"});await e.clearStaleState(new n.WebStorageStateStore({}));const t=window.localStorage,r=[];for(let n=0;n<=t.length;n+=1){const e=t.key(n);e&&(e.match(/^oidc\..+$/)||e.match(/^solidClientAuthenticationUser:.+$/))&&r.push(e)}r.forEach((e=>t.removeItem(e)))}},1478:function(e){var t;t=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=22)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i={debug:function(){},info:function(){},warn:function(){},error:function(){}},o=void 0,s=void 0;(t.Log=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.reset=function(){s=3,o=i},e.debug=function(){if(s>=4){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];o.debug.apply(o,Array.from(t))}},e.info=function(){if(s>=3){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];o.info.apply(o,Array.from(t))}},e.warn=function(){if(s>=2){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];o.warn.apply(o,Array.from(t))}},e.error=function(){if(s>=1){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];o.error.apply(o,Array.from(t))}},n(e,null,[{key:"NONE",get:function(){return 0}},{key:"ERROR",get:function(){return 1}},{key:"WARN",get:function(){return 2}},{key:"INFO",get:function(){return 3}},{key:"DEBUG",get:function(){return 4}},{key:"level",get:function(){return s},set:function(e){if(!(0<=e&&e<=4))throw new Error("Invalid log level");s=e}},{key:"logger",get:function(){return o},set:function(e){if(!e.debug&&e.info&&(e.debug=e.info),!(e.debug&&e.info&&e.warn&&e.error))throw new Error("Invalid logger");o=e}}]),e}()).reset()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i={setInterval:function(e){function t(t,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return setInterval(e,t)})),clearInterval:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return clearInterval(e)}))},o=!1,s=null;t.Global=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e._testing=function(){o=!0},e.setXMLHttpRequest=function(e){s=e},n(e,null,[{key:"location",get:function(){if(!o)return location}},{key:"localStorage",get:function(){if(!o&&"undefined"!=typeof window)return localStorage}},{key:"sessionStorage",get:function(){if(!o&&"undefined"!=typeof window)return sessionStorage}},{key:"XMLHttpRequest",get:function(){if(!o&&"undefined"!=typeof window)return s||XMLHttpRequest}},{key:"timer",get:function(){if(!o)return i}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataService=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0),o=r(7);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=".well-known/openid-configuration";t.MetadataService=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.JsonService;if(s(this,e),!t)throw i.Log.error("MetadataService: No settings passed to MetadataService"),new Error("settings");this._settings=t,this._jsonService=new r(["application/jwk-set+json"])}return e.prototype.resetSigningKeys=function(){this._settings=this._settings||{},this._settings.signingKeys=void 0},e.prototype.getMetadata=function(){var e=this;return this._settings.metadata?(i.Log.debug("MetadataService.getMetadata: Returning metadata from settings"),Promise.resolve(this._settings.metadata)):this.metadataUrl?(i.Log.debug("MetadataService.getMetadata: getting metadata from",this.metadataUrl),this._jsonService.getJson(this.metadataUrl).then((function(t){i.Log.debug("MetadataService.getMetadata: json received");var r=e._settings.metadataSeed||{};return e._settings.metadata=Object.assign({},r,t),e._settings.metadata}))):(i.Log.error("MetadataService.getMetadata: No authority or metadataUrl configured on settings"),Promise.reject(new Error("No authority or metadataUrl configured on settings")))},e.prototype.getIssuer=function(){return this._getMetadataProperty("issuer")},e.prototype.getAuthorizationEndpoint=function(){return this._getMetadataProperty("authorization_endpoint")},e.prototype.getUserInfoEndpoint=function(){return this._getMetadataProperty("userinfo_endpoint")},e.prototype.getTokenEndpoint=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._getMetadataProperty("token_endpoint",e)},e.prototype.getCheckSessionIframe=function(){return this._getMetadataProperty("check_session_iframe",!0)},e.prototype.getEndSessionEndpoint=function(){return this._getMetadataProperty("end_session_endpoint",!0)},e.prototype.getRevocationEndpoint=function(){return this._getMetadataProperty("revocation_endpoint",!0)},e.prototype.getKeysEndpoint=function(){return this._getMetadataProperty("jwks_uri",!0)},e.prototype._getMetadataProperty=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i.Log.debug("MetadataService.getMetadataProperty for: "+e),this.getMetadata().then((function(r){if(i.Log.debug("MetadataService.getMetadataProperty: metadata recieved"),void 0===r[e]){if(!0===t)return void i.Log.warn("MetadataService.getMetadataProperty: Metadata does not contain optional property "+e);throw i.Log.error("MetadataService.getMetadataProperty: Metadata does not contain property "+e),new Error("Metadata does not contain property "+e)}return r[e]}))},e.prototype.getSigningKeys=function(){var e=this;return this._settings.signingKeys?(i.Log.debug("MetadataService.getSigningKeys: Returning signingKeys from settings"),Promise.resolve(this._settings.signingKeys)):this._getMetadataProperty("jwks_uri").then((function(t){return i.Log.debug("MetadataService.getSigningKeys: jwks_uri received",t),e._jsonService.getJson(t).then((function(t){if(i.Log.debug("MetadataService.getSigningKeys: key set received",t),!t.keys)throw i.Log.error("MetadataService.getSigningKeys: Missing keys on keyset"),new Error("Missing keys on keyset");return e._settings.signingKeys=t.keys,e._settings.signingKeys}))}))},n(e,[{key:"metadataUrl",get:function(){return this._metadataUrl||(this._settings.metadataUrl?this._metadataUrl=this._settings.metadataUrl:(this._metadataUrl=this._settings.authority,this._metadataUrl&&this._metadataUrl.indexOf(a)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=a))),this._metadataUrl}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UrlUtility=void 0;var n=r(0),i=r(1);t.UrlUtility=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.addQueryParam=function(e,t,r){return e.indexOf("?")<0&&(e+="?"),"?"!==e[e.length-1]&&(e+="&"),e+=encodeURIComponent(t),(e+="=")+encodeURIComponent(r)},e.parseUrlFragment=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.Global;"string"!=typeof e&&(e=r.location.href);var o=e.lastIndexOf(t);o>=0&&(e=e.substr(o+1)),"?"===t&&(o=e.indexOf("#"))>=0&&(e=e.substr(0,o));for(var s,a={},u=/([^&=]+)=([^&]*)/g,c=0;s=u.exec(e);)if(a[decodeURIComponent(s[1])]=decodeURIComponent(s[2].replace(/\+/g," ")),c++>50)return n.Log.error("UrlUtility.parseUrlFragment: response exceeded expected number of parameters",e),{error:"Response exceeded expected number of parameters"};for(var l in a)return a;return{}},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JoseUtil=void 0;var n=r(26),i=function(e){return e&&e.__esModule?e:{default:e}}(r(33));t.JoseUtil=(0,i.default)({jws:n.jws,KeyUtil:n.KeyUtil,X509:n.X509,crypto:n.crypto,hextob64u:n.hextob64u,b64tohex:n.b64tohex,AllowedSigningAlgs:n.AllowedSigningAlgs})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OidcClientSettings=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),s=r(23),a=r(6),u=r(24),c=r(2);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d=".well-known/openid-configuration",h="id_token",p="openid",f="client_secret_post";t.OidcClientSettings=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.authority,i=t.metadataUrl,o=t.metadata,d=t.signingKeys,g=t.metadataSeed,y=t.client_id,v=t.client_secret,m=t.response_type,w=void 0===m?h:m,b=t.scope,S=void 0===b?p:b,_=t.redirect_uri,E=t.post_logout_redirect_uri,A=t.client_authentication,k=void 0===A?f:A,F=t.prompt,C=t.display,P=t.max_age,x=t.ui_locales,R=t.acr_values,T=t.resource,I=t.response_mode,O=t.filterProtocolClaims,U=void 0===O||O,D=t.loadUserInfo,j=void 0===D||D,L=t.staleStateAge,N=void 0===L?900:L,H=t.clockSkew,M=void 0===H?300:H,B=t.clockService,K=void 0===B?new s.ClockService:B,V=t.userInfoJwtIssuer,W=void 0===V?"OP":V,$=t.mergeClaims,J=void 0!==$&&$,q=t.stateStore,z=void 0===q?new a.WebStorageStateStore:q,G=t.ResponseValidatorCtor,Y=void 0===G?u.ResponseValidator:G,X=t.MetadataServiceCtor,Z=void 0===X?c.MetadataService:X,Q=t.extraQueryParams,ee=void 0===Q?{}:Q,te=t.extraTokenParams,re=void 0===te?{}:te;l(this,e),this._authority=r,this._metadataUrl=i,this._metadata=o,this._metadataSeed=g,this._signingKeys=d,this._client_id=y,this._client_secret=v,this._response_type=w,this._scope=S,this._redirect_uri=_,this._post_logout_redirect_uri=E,this._client_authentication=k,this._prompt=F,this._display=C,this._max_age=P,this._ui_locales=x,this._acr_values=R,this._resource=T,this._response_mode=I,this._filterProtocolClaims=!!U,this._loadUserInfo=!!j,this._staleStateAge=N,this._clockSkew=M,this._clockService=K,this._userInfoJwtIssuer=W,this._mergeClaims=!!J,this._stateStore=z,this._validator=new Y(this),this._metadataService=new Z(this),this._extraQueryParams="object"===(void 0===ee?"undefined":n(ee))?ee:{},this._extraTokenParams="object"===(void 0===re?"undefined":n(re))?re:{}}return e.prototype.getEpochTime=function(){return this._clockService.getEpochTime()},i(e,[{key:"client_id",get:function(){return this._client_id},set:function(e){if(this._client_id)throw o.Log.error("OidcClientSettings.set_client_id: client_id has already been assigned."),new Error("client_id has already been assigned.");this._client_id=e}},{key:"client_secret",get:function(){return this._client_secret}},{key:"response_type",get:function(){return this._response_type}},{key:"scope",get:function(){return this._scope}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"post_logout_redirect_uri",get:function(){return this._post_logout_redirect_uri}},{key:"client_authentication",get:function(){return this._client_authentication}},{key:"prompt",get:function(){return this._prompt}},{key:"display",get:function(){return this._display}},{key:"max_age",get:function(){return this._max_age}},{key:"ui_locales",get:function(){return this._ui_locales}},{key:"acr_values",get:function(){return this._acr_values}},{key:"resource",get:function(){return this._resource}},{key:"response_mode",get:function(){return this._response_mode}},{key:"authority",get:function(){return this._authority},set:function(e){if(this._authority)throw o.Log.error("OidcClientSettings.set_authority: authority has already been assigned."),new Error("authority has already been assigned.");this._authority=e}},{key:"metadataUrl",get:function(){return this._metadataUrl||(this._metadataUrl=this.authority,this._metadataUrl&&this._metadataUrl.indexOf(d)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=d)),this._metadataUrl}},{key:"metadata",get:function(){return this._metadata},set:function(e){this._metadata=e}},{key:"metadataSeed",get:function(){return this._metadataSeed},set:function(e){this._metadataSeed=e}},{key:"signingKeys",get:function(){return this._signingKeys},set:function(e){this._signingKeys=e}},{key:"filterProtocolClaims",get:function(){return this._filterProtocolClaims}},{key:"loadUserInfo",get:function(){return this._loadUserInfo}},{key:"staleStateAge",get:function(){return this._staleStateAge}},{key:"clockSkew",get:function(){return this._clockSkew}},{key:"userInfoJwtIssuer",get:function(){return this._userInfoJwtIssuer}},{key:"mergeClaims",get:function(){return this._mergeClaims}},{key:"stateStore",get:function(){return this._stateStore}},{key:"validator",get:function(){return this._validator}},{key:"metadataService",get:function(){return this._metadataService}},{key:"extraQueryParams",get:function(){return this._extraQueryParams},set:function(e){"object"===(void 0===e?"undefined":n(e))?this._extraQueryParams=e:this._extraQueryParams={}}},{key:"extraTokenParams",get:function(){return this._extraTokenParams},set:function(e){"object"===(void 0===e?"undefined":n(e))?this._extraTokenParams=e:this._extraTokenParams={}}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebStorageStateStore=void 0;var n=r(0),i=r(1);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.WebStorageStateStore=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.prefix,n=void 0===r?"oidc.":r,s=t.store,a=void 0===s?i.Global.localStorage:s;o(this,e),this._store=a,this._prefix=n}return e.prototype.set=function(e,t){return n.Log.debug("WebStorageStateStore.set",e),e=this._prefix+e,this._store.setItem(e,t),Promise.resolve()},e.prototype.get=function(e){n.Log.debug("WebStorageStateStore.get",e),e=this._prefix+e;var t=this._store.getItem(e);return Promise.resolve(t)},e.prototype.remove=function(e){n.Log.debug("WebStorageStateStore.remove",e),e=this._prefix+e;var t=this._store.getItem(e);return this._store.removeItem(e),Promise.resolve(t)},e.prototype.getAllKeys=function(){n.Log.debug("WebStorageStateStore.getAllKeys");for(var e=[],t=0;t<this._store.length;t++){var r=this._store.key(t);0===r.indexOf(this._prefix)&&e.push(r.substr(this._prefix.length))}return Promise.resolve(e)},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsonService=void 0;var n=r(0),i=r(1);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.JsonService=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.Global.XMLHttpRequest,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;o(this,e),t&&Array.isArray(t)?this._contentTypes=t.slice():this._contentTypes=[],this._contentTypes.push("application/json"),n&&this._contentTypes.push("application/jwt"),this._XMLHttpRequest=r,this._jwtHandler=n}return e.prototype.getJson=function(e,t){var r=this;if(!e)throw n.Log.error("JsonService.getJson: No url passed"),new Error("url");return n.Log.debug("JsonService.getJson, url: ",e),new Promise((function(i,o){var s=new r._XMLHttpRequest;s.open("GET",e);var a=r._contentTypes,u=r._jwtHandler;s.onload=function(){if(n.Log.debug("JsonService.getJson: HTTP response received, status",s.status),200===s.status){var t=s.getResponseHeader("Content-Type");if(t){var r=a.find((function(e){if(t.startsWith(e))return!0}));if("application/jwt"==r)return void u(s).then(i,o);if(r)try{return void i(JSON.parse(s.responseText))}catch(i){return n.Log.error("JsonService.getJson: Error parsing JSON response",i.message),void o(i)}}o(Error("Invalid response Content-Type: "+t+", from URL: "+e))}else o(Error(s.statusText+" ("+s.status+")"))},s.onerror=function(){n.Log.error("JsonService.getJson: network error"),o(Error("Network Error"))},t&&(n.Log.debug("JsonService.getJson: token passed, setting Authorization header"),s.setRequestHeader("Authorization","Bearer "+t)),s.send()}))},e.prototype.postForm=function(e,t,r){var i=this;if(!e)throw n.Log.error("JsonService.postForm: No url passed"),new Error("url");return n.Log.debug("JsonService.postForm, url: ",e),new Promise((function(o,s){var a=new i._XMLHttpRequest;a.open("POST",e);var u=i._contentTypes;a.onload=function(){if(n.Log.debug("JsonService.postForm: HTTP response received, status",a.status),200!==a.status){if(400===a.status&&(r=a.getResponseHeader("Content-Type"))&&u.find((function(e){if(r.startsWith(e))return!0})))try{var t=JSON.parse(a.responseText);if(t&&t.error)return n.Log.error("JsonService.postForm: Error from server: ",t.error),void s(new Error(t.error))}catch(o){return n.Log.error("JsonService.postForm: Error parsing JSON response",o.message),void s(o)}s(Error(a.statusText+" ("+a.status+")"))}else{var r;if((r=a.getResponseHeader("Content-Type"))&&u.find((function(e){if(r.startsWith(e))return!0})))try{return void o(JSON.parse(a.responseText))}catch(o){return n.Log.error("JsonService.postForm: Error parsing JSON response",o.message),void s(o)}s(Error("Invalid response Content-Type: "+r+", from URL: "+e))}},a.onerror=function(){n.Log.error("JsonService.postForm: network error"),s(Error("Network Error"))};var c="";for(var l in t){var d=t[l];d&&(c.length>0&&(c+="&"),c+=encodeURIComponent(l),c+="=",c+=encodeURIComponent(d))}a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),void 0!==r&&a.setRequestHeader("Authorization","Basic "+btoa(r)),a.send(c)}))},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SigninRequest=void 0;var n=r(0),i=r(3),o=r(13);t.SigninRequest=function(){function e(t){var r=t.url,s=t.client_id,a=t.redirect_uri,u=t.response_type,c=t.scope,l=t.authority,d=t.data,h=t.prompt,p=t.display,f=t.max_age,g=t.ui_locales,y=t.id_token_hint,v=t.login_hint,m=t.acr_values,w=t.resource,b=t.response_mode,S=t.request,_=t.request_uri,E=t.extraQueryParams,A=t.request_type,k=t.client_secret,F=t.extraTokenParams,C=t.skipUserInfo;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!r)throw n.Log.error("SigninRequest.ctor: No url passed"),new Error("url");if(!s)throw n.Log.error("SigninRequest.ctor: No client_id passed"),new Error("client_id");if(!a)throw n.Log.error("SigninRequest.ctor: No redirect_uri passed"),new Error("redirect_uri");if(!u)throw n.Log.error("SigninRequest.ctor: No response_type passed"),new Error("response_type");if(!c)throw n.Log.error("SigninRequest.ctor: No scope passed"),new Error("scope");if(!l)throw n.Log.error("SigninRequest.ctor: No authority passed"),new Error("authority");var P=e.isOidc(u),x=e.isCode(u);b||(b=e.isCode(u)?"query":null),this.state=new o.SigninState({nonce:P,data:d,client_id:s,authority:l,redirect_uri:a,code_verifier:x,request_type:A,response_mode:b,client_secret:k,scope:c,extraTokenParams:F,skipUserInfo:C}),r=i.UrlUtility.addQueryParam(r,"client_id",s),r=i.UrlUtility.addQueryParam(r,"redirect_uri",a),r=i.UrlUtility.addQueryParam(r,"response_type",u),r=i.UrlUtility.addQueryParam(r,"scope",c),r=i.UrlUtility.addQueryParam(r,"state",this.state.id),P&&(r=i.UrlUtility.addQueryParam(r,"nonce",this.state.nonce)),x&&(r=i.UrlUtility.addQueryParam(r,"code_challenge",this.state.code_challenge),r=i.UrlUtility.addQueryParam(r,"code_challenge_method","S256"));var R={prompt:h,display:p,max_age:f,ui_locales:g,id_token_hint:y,login_hint:v,acr_values:m,resource:w,request:S,request_uri:_,response_mode:b};for(var T in R)R[T]&&(r=i.UrlUtility.addQueryParam(r,T,R[T]));for(var I in E)r=i.UrlUtility.addQueryParam(r,I,E[I]);this.url=r}return e.isOidc=function(e){return!!e.split(/\s+/g).filter((function(e){return"id_token"===e}))[0]},e.isOAuth=function(e){return!!e.split(/\s+/g).filter((function(e){return"token"===e}))[0]},e.isCode=function(e){return!!e.split(/\s+/g).filter((function(e){return"code"===e}))[0]},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.State=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r(14));function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.State=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.id,n=t.data,i=t.created,a=t.request_type;s(this,e),this._id=r||(0,o.default)(),this._data=n,this._created="number"==typeof i&&i>0?i:parseInt(Date.now()/1e3),this._request_type=a}return e.prototype.toStorageString=function(){return i.Log.debug("State.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type})},e.fromStorageString=function(t){return i.Log.debug("State.fromStorageString"),new e(JSON.parse(t))},e.clearStaleState=function(t,r){var n=Date.now()/1e3-r;return t.getAllKeys().then((function(r){i.Log.debug("State.clearStaleState: got keys",r);for(var o=[],s=function(s){var a=r[s];u=t.get(a).then((function(r){var o=!1;if(r)try{var s=e.fromStorageString(r);i.Log.debug("State.clearStaleState: got item from key: ",a,s.created),s.created<=n&&(o=!0)}catch(e){i.Log.error("State.clearStaleState: Error parsing state for key",a,e.message),o=!0}else i.Log.debug("State.clearStaleState: no item in storage for key: ",a),o=!0;if(o)return i.Log.debug("State.clearStaleState: removed item for key: ",a),t.remove(a)})),o.push(u)},a=0;a<r.length;a++){var u;s(a)}return i.Log.debug("State.clearStaleState: waiting on promise count:",o.length),Promise.all(o)}))},n(e,[{key:"id",get:function(){return this._id}},{key:"data",get:function(){return this._data}},{key:"created",get:function(){return this._created}},{key:"request_type",get:function(){return this._request_type}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OidcClient=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0),o=r(5),s=r(12),a=r(8),u=r(34),c=r(35),l=r(36),d=r(13),h=r(9);function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.OidcClient=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(this,e),t instanceof o.OidcClientSettings?this._settings=t:this._settings=new o.OidcClientSettings(t)}return e.prototype.createSigninRequest=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.response_type,n=t.scope,o=t.redirect_uri,s=t.data,u=t.state,c=t.prompt,l=t.display,d=t.max_age,h=t.ui_locales,p=t.id_token_hint,f=t.login_hint,g=t.acr_values,y=t.resource,v=t.request,m=t.request_uri,w=t.response_mode,b=t.extraQueryParams,S=t.extraTokenParams,_=t.request_type,E=t.skipUserInfo,A=arguments[1];i.Log.debug("OidcClient.createSigninRequest");var k=this._settings.client_id;r=r||this._settings.response_type,n=n||this._settings.scope,o=o||this._settings.redirect_uri,c=c||this._settings.prompt,l=l||this._settings.display,d=d||this._settings.max_age,h=h||this._settings.ui_locales,g=g||this._settings.acr_values,y=y||this._settings.resource,w=w||this._settings.response_mode,b=b||this._settings.extraQueryParams,S=S||this._settings.extraTokenParams;var F=this._settings.authority;return a.SigninRequest.isCode(r)&&"code"!==r?Promise.reject(new Error("OpenID Connect hybrid flow is not supported")):this._metadataService.getAuthorizationEndpoint().then((function(t){i.Log.debug("OidcClient.createSigninRequest: Received authorization endpoint",t);var C=new a.SigninRequest({url:t,client_id:k,redirect_uri:o,response_type:r,scope:n,data:s||u,authority:F,prompt:c,display:l,max_age:d,ui_locales:h,id_token_hint:p,login_hint:f,acr_values:g,resource:y,request:v,request_uri:m,extraQueryParams:b,extraTokenParams:S,request_type:_,response_mode:w,client_secret:e._settings.client_secret,skipUserInfo:E}),P=C.state;return(A=A||e._stateStore).set(P.id,P.toStorageString()).then((function(){return C}))}))},e.prototype.readSigninResponseState=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i.Log.debug("OidcClient.readSigninResponseState");var n="query"===this._settings.response_mode||!this._settings.response_mode&&a.SigninRequest.isCode(this._settings.response_type),o=n?"?":"#",s=new u.SigninResponse(e,o);if(!s.state)return i.Log.error("OidcClient.readSigninResponseState: No state in response"),Promise.reject(new Error("No state in response"));t=t||this._stateStore;var c=r?t.remove.bind(t):t.get.bind(t);return c(s.state).then((function(e){if(!e)throw i.Log.error("OidcClient.readSigninResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:d.SigninState.fromStorageString(e),response:s}}))},e.prototype.processSigninResponse=function(e,t){var r=this;return i.Log.debug("OidcClient.processSigninResponse"),this.readSigninResponseState(e,t,!0).then((function(e){var t=e.state,n=e.response;return i.Log.debug("OidcClient.processSigninResponse: Received state from storage; validating response"),r._validator.validateSigninResponse(t,n)}))},e.prototype.createSignoutRequest=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.id_token_hint,n=t.data,o=t.state,s=t.post_logout_redirect_uri,a=t.extraQueryParams,u=t.request_type,l=arguments[1];return i.Log.debug("OidcClient.createSignoutRequest"),s=s||this._settings.post_logout_redirect_uri,a=a||this._settings.extraQueryParams,this._metadataService.getEndSessionEndpoint().then((function(t){if(!t)throw i.Log.error("OidcClient.createSignoutRequest: No end session endpoint url returned"),new Error("no end session endpoint");i.Log.debug("OidcClient.createSignoutRequest: Received end session endpoint",t);var d=new c.SignoutRequest({url:t,id_token_hint:r,post_logout_redirect_uri:s,data:n||o,extraQueryParams:a,request_type:u}),h=d.state;return h&&(i.Log.debug("OidcClient.createSignoutRequest: Signout request has state to persist"),(l=l||e._stateStore).set(h.id,h.toStorageString())),d}))},e.prototype.readSignoutResponseState=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i.Log.debug("OidcClient.readSignoutResponseState");var n=new l.SignoutResponse(e);if(!n.state)return i.Log.debug("OidcClient.readSignoutResponseState: No state in response"),n.error?(i.Log.warn("OidcClient.readSignoutResponseState: Response was error: ",n.error),Promise.reject(new s.ErrorResponse(n))):Promise.resolve({state:void 0,response:n});var o=n.state;t=t||this._stateStore;var a=r?t.remove.bind(t):t.get.bind(t);return a(o).then((function(e){if(!e)throw i.Log.error("OidcClient.readSignoutResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:h.State.fromStorageString(e),response:n}}))},e.prototype.processSignoutResponse=function(e,t){var r=this;return i.Log.debug("OidcClient.processSignoutResponse"),this.readSignoutResponseState(e,t,!0).then((function(e){var t=e.state,n=e.response;return t?(i.Log.debug("OidcClient.processSignoutResponse: Received state from storage; validating response"),r._validator.validateSignoutResponse(t,n)):(i.Log.debug("OidcClient.processSignoutResponse: No state from storage; skipping validating response"),n)}))},e.prototype.clearStaleState=function(e){return i.Log.debug("OidcClient.clearStaleState"),e=e||this._stateStore,h.State.clearStaleState(e,this.settings.staleStateAge)},n(e,[{key:"_stateStore",get:function(){return this.settings.stateStore}},{key:"_validator",get:function(){return this.settings.validator}},{key:"_metadataService",get:function(){return this.settings.metadataService}},{key:"settings",get:function(){return this._settings}},{key:"metadataService",get:function(){return this._metadataService}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenClient=void 0;var n=r(7),i=r(2),o=r(0);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.TokenClient=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.JsonService,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.MetadataService;if(s(this,e),!t)throw o.Log.error("TokenClient.ctor: No settings passed"),new Error("settings");this._settings=t,this._jsonService=new r,this._metadataService=new a(this._settings)}return e.prototype.exchangeCode=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(t=Object.assign({},t)).grant_type=t.grant_type||"authorization_code",t.client_id=t.client_id||this._settings.client_id,t.client_secret=t.client_secret||this._settings.client_secret,t.redirect_uri=t.redirect_uri||this._settings.redirect_uri;var r=void 0,n=t._client_authentication||this._settings._client_authentication;return delete t._client_authentication,t.code?t.redirect_uri?t.code_verifier?t.client_id?t.client_secret||"client_secret_basic"!=n?("client_secret_basic"==n&&(r=t.client_id+":"+t.client_secret,delete t.client_id,delete t.client_secret),this._metadataService.getTokenEndpoint(!1).then((function(n){return o.Log.debug("TokenClient.exchangeCode: Received token endpoint"),e._jsonService.postForm(n,t,r).then((function(e){return o.Log.debug("TokenClient.exchangeCode: response received"),e}))}))):(o.Log.error("TokenClient.exchangeCode: No client_secret passed"),Promise.reject(new Error("A client_secret is required"))):(o.Log.error("TokenClient.exchangeCode: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(o.Log.error("TokenClient.exchangeCode: No code_verifier passed"),Promise.reject(new Error("A code_verifier is required"))):(o.Log.error("TokenClient.exchangeCode: No redirect_uri passed"),Promise.reject(new Error("A redirect_uri is required"))):(o.Log.error("TokenClient.exchangeCode: No code passed"),Promise.reject(new Error("A code is required")))},e.prototype.exchangeRefreshToken=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(t=Object.assign({},t)).grant_type=t.grant_type||"refresh_token",t.client_id=t.client_id||this._settings.client_id,t.client_secret=t.client_secret||this._settings.client_secret;var r=void 0,n=t._client_authentication||this._settings._client_authentication;return delete t._client_authentication,t.refresh_token?t.client_id?("client_secret_basic"==n&&(r=t.client_id+":"+t.client_secret,delete t.client_id,delete t.client_secret),this._metadataService.getTokenEndpoint(!1).then((function(n){return o.Log.debug("TokenClient.exchangeRefreshToken: Received token endpoint"),e._jsonService.postForm(n,t,r).then((function(e){return o.Log.debug("TokenClient.exchangeRefreshToken: response received"),e}))}))):(o.Log.error("TokenClient.exchangeRefreshToken: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(o.Log.error("TokenClient.exchangeRefreshToken: No refresh_token passed"),Promise.reject(new Error("A refresh_token is required")))},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorResponse=void 0;var n=r(0);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.ErrorResponse=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=r.error,a=r.error_description,u=r.error_uri,c=r.state,l=r.session_state;if(i(this,t),!s)throw n.Log.error("No error passed to ErrorResponse"),new Error("error");var d=o(this,e.call(this,a||s));return d.name="ErrorResponse",d.error=s,d.error_description=a,d.error_uri=u,d.state=c,d.session_state=l,d}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(Error)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SigninState=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0),o=r(9),s=r(4),a=function(e){return e&&e.__esModule?e:{default:e}}(r(14));function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.SigninState=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.nonce,i=r.authority,o=r.client_id,l=r.redirect_uri,d=r.code_verifier,h=r.response_mode,p=r.client_secret,f=r.scope,g=r.extraTokenParams,y=r.skipUserInfo;u(this,t);var v=c(this,e.call(this,arguments[0]));if(!0===n?v._nonce=(0,a.default)():n&&(v._nonce=n),!0===d?v._code_verifier=(0,a.default)()+(0,a.default)()+(0,a.default)():d&&(v._code_verifier=d),v.code_verifier){var m=s.JoseUtil.hashString(v.code_verifier,"SHA256");v._code_challenge=s.JoseUtil.hexToBase64Url(m)}return v._redirect_uri=l,v._authority=i,v._client_id=o,v._response_mode=h,v._client_secret=p,v._scope=f,v._extraTokenParams=g,v._skipUserInfo=y,v}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.toStorageString=function(){return i.Log.debug("SigninState.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,nonce:this.nonce,code_verifier:this.code_verifier,redirect_uri:this.redirect_uri,authority:this.authority,client_id:this.client_id,response_mode:this.response_mode,client_secret:this.client_secret,scope:this.scope,extraTokenParams:this.extraTokenParams,skipUserInfo:this.skipUserInfo})},t.fromStorageString=function(e){return i.Log.debug("SigninState.fromStorageString"),new t(JSON.parse(e))},n(t,[{key:"nonce",get:function(){return this._nonce}},{key:"authority",get:function(){return this._authority}},{key:"client_id",get:function(){return this._client_id}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"code_verifier",get:function(){return this._code_verifier}},{key:"code_challenge",get:function(){return this._code_challenge}},{key:"response_mode",get:function(){return this._response_mode}},{key:"client_secret",get:function(){return this._client_secret}},{key:"scope",get:function(){return this._scope}},{key:"extraTokenParams",get:function(){return this._extraTokenParams}},{key:"skipUserInfo",get:function(){return this._skipUserInfo}}]),t}(o.State)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return("undefined"!=n&&null!==n&&void 0!==n.getRandomValues?i:o)().replace(/-/g,"")};var n="undefined"!=typeof window?window.crypto||window.msCrypto:null;function i(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^n.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))}function o(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^16*Math.random()>>e/4).toString(16)}))}e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.User=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0);t.User=function(){function e(t){var r=t.id_token,n=t.session_state,i=t.access_token,o=t.refresh_token,s=t.token_type,a=t.scope,u=t.profile,c=t.expires_at,l=t.state;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id_token=r,this.session_state=n,this.access_token=i,this.refresh_token=o,this.token_type=s,this.scope=a,this.profile=u,this.expires_at=c,this.state=l}return e.prototype.toStorageString=function(){return i.Log.debug("User.toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})},e.fromStorageString=function(t){return i.Log.debug("User.fromStorageString"),new e(JSON.parse(t))},n(e,[{key:"expires_in",get:function(){if(this.expires_at){var e=parseInt(Date.now()/1e3);return this.expires_at-e}},set:function(e){var t=parseInt(e);if("number"==typeof t&&t>0){var r=parseInt(Date.now()/1e3);this.expires_at=r+t}}},{key:"expired",get:function(){var e=this.expires_in;if(void 0!==e)return e<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccessTokenEvents=void 0;var n=r(0),i=r(46);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.AccessTokenEvents=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.accessTokenExpiringNotificationTime,n=void 0===r?60:r,s=t.accessTokenExpiringTimer,a=void 0===s?new i.Timer("Access token expiring"):s,u=t.accessTokenExpiredTimer,c=void 0===u?new i.Timer("Access token expired"):u;o(this,e),this._accessTokenExpiringNotificationTime=n,this._accessTokenExpiring=a,this._accessTokenExpired=c}return e.prototype.load=function(e){if(e.access_token&&void 0!==e.expires_in){var t=e.expires_in;if(n.Log.debug("AccessTokenEvents.load: access token present, remaining duration:",t),t>0){var r=t-this._accessTokenExpiringNotificationTime;r<=0&&(r=1),n.Log.debug("AccessTokenEvents.load: registering expiring timer in:",r),this._accessTokenExpiring.init(r)}else n.Log.debug("AccessTokenEvents.load: canceling existing expiring timer becase we're past expiration."),this._accessTokenExpiring.cancel();var i=t+1;n.Log.debug("AccessTokenEvents.load: registering expired timer in:",i),this._accessTokenExpired.init(i)}else this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},e.prototype.unload=function(){n.Log.debug("AccessTokenEvents.unload: canceling existing access token timers"),this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},e.prototype.addAccessTokenExpiring=function(e){this._accessTokenExpiring.addHandler(e)},e.prototype.removeAccessTokenExpiring=function(e){this._accessTokenExpiring.removeHandler(e)},e.prototype.addAccessTokenExpired=function(e){this._accessTokenExpired.addHandler(e)},e.prototype.removeAccessTokenExpired=function(e){this._accessTokenExpired.removeHandler(e)},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Event=void 0;var n=r(0);t.Event=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t,this._callbacks=[]}return e.prototype.addHandler=function(e){this._callbacks.push(e)},e.prototype.removeHandler=function(e){var t=this._callbacks.findIndex((function(t){return t===e}));t>=0&&this._callbacks.splice(t,1)},e.prototype.raise=function(){n.Log.debug("Event: Raising event: "+this._name);for(var e=0;e<this._callbacks.length;e++){var t;(t=this._callbacks)[e].apply(t,arguments)}},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionMonitor=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0),o=r(19),s=r(1);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.SessionMonitor=function(){function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.CheckSessionIFrame,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.Global.timer;if(a(this,e),!t)throw i.Log.error("SessionMonitor.ctor: No user manager passed to SessionMonitor"),new Error("userManager");this._userManager=t,this._CheckSessionIFrameCtor=n,this._timer=u,this._userManager.events.addUserLoaded(this._start.bind(this)),this._userManager.events.addUserUnloaded(this._stop.bind(this)),Promise.resolve(this._userManager.getUser().then((function(e){e?r._start(e):r._settings.monitorAnonymousSession&&r._userManager.querySessionStatus().then((function(e){var t={session_state:e.session_state};e.sub&&e.sid&&(t.profile={sub:e.sub,sid:e.sid}),r._start(t)})).catch((function(e){i.Log.error("SessionMonitor ctor: error from querySessionStatus:",e.message)}))})).catch((function(e){i.Log.error("SessionMonitor ctor: error from getUser:",e.message)})))}return e.prototype._start=function(e){var t=this,r=e.session_state;r&&(e.profile?(this._sub=e.profile.sub,this._sid=e.profile.sid,i.Log.debug("SessionMonitor._start: session_state:",r,", sub:",this._sub)):(this._sub=void 0,this._sid=void 0,i.Log.debug("SessionMonitor._start: session_state:",r,", anonymous user")),this._checkSessionIFrame?this._checkSessionIFrame.start(r):this._metadataService.getCheckSessionIframe().then((function(e){if(e){i.Log.debug("SessionMonitor._start: Initializing check session iframe");var n=t._client_id,o=t._checkSessionInterval,s=t._stopCheckSessionOnError;t._checkSessionIFrame=new t._CheckSessionIFrameCtor(t._callback.bind(t),n,e,o,s),t._checkSessionIFrame.load().then((function(){t._checkSessionIFrame.start(r)}))}else i.Log.warn("SessionMonitor._start: No check session iframe found in the metadata")})).catch((function(e){i.Log.error("SessionMonitor._start: Error from getCheckSessionIframe:",e.message)})))},e.prototype._stop=function(){var e=this;if(this._sub=void 0,this._sid=void 0,this._checkSessionIFrame&&(i.Log.debug("SessionMonitor._stop"),this._checkSessionIFrame.stop()),this._settings.monitorAnonymousSession)var t=this._timer.setInterval((function(){e._timer.clearInterval(t),e._userManager.querySessionStatus().then((function(t){var r={session_state:t.session_state};t.sub&&t.sid&&(r.profile={sub:t.sub,sid:t.sid}),e._start(r)})).catch((function(e){i.Log.error("SessionMonitor: error from querySessionStatus:",e.message)}))}),1e3)},e.prototype._callback=function(){var e=this;this._userManager.querySessionStatus().then((function(t){var r=!0;t?t.sub===e._sub?(r=!1,e._checkSessionIFrame.start(t.session_state),t.sid===e._sid?i.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, restarting check session iframe; session_state:",t.session_state):(i.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, session state has changed, restarting check session iframe; session_state:",t.session_state),e._userManager.events._raiseUserSessionChanged())):i.Log.debug("SessionMonitor._callback: Different subject signed into OP:",t.sub):i.Log.debug("SessionMonitor._callback: Subject no longer signed into OP"),r&&(e._sub?(i.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed out event"),e._userManager.events._raiseUserSignedOut()):(i.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed in event"),e._userManager.events._raiseUserSignedIn()))})).catch((function(t){e._sub&&(i.Log.debug("SessionMonitor._callback: Error calling queryCurrentSigninSession; raising signed out event",t.message),e._userManager.events._raiseUserSignedOut())}))},n(e,[{key:"_settings",get:function(){return this._userManager.settings}},{key:"_metadataService",get:function(){return this._userManager.metadataService}},{key:"_client_id",get:function(){return this._settings.client_id}},{key:"_checkSessionInterval",get:function(){return this._settings.checkSessionInterval}},{key:"_stopCheckSessionOnError",get:function(){return this._settings.stopCheckSessionOnError}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckSessionIFrame=void 0;var n=r(0);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.CheckSessionIFrame=function(){function e(t,r,n,o){var s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];i(this,e),this._callback=t,this._client_id=r,this._url=n,this._interval=o||2e3,this._stopOnError=s;var a=n.indexOf("/",n.indexOf("//")+2);this._frame_origin=n.substr(0,a),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.style.display="none",this._frame.width=0,this._frame.height=0,this._frame.src=n}return e.prototype.load=function(){var e=this;return new Promise((function(t){e._frame.onload=function(){t()},window.document.body.appendChild(e._frame),e._boundMessageEvent=e._message.bind(e),window.addEventListener("message",e._boundMessageEvent,!1)}))},e.prototype._message=function(e){e.origin===this._frame_origin&&e.source===this._frame.contentWindow&&("error"===e.data?(n.Log.error("CheckSessionIFrame: error message from check session op iframe"),this._stopOnError&&this.stop()):"changed"===e.data?(n.Log.debug("CheckSessionIFrame: changed message from check session op iframe"),this.stop(),this._callback()):n.Log.debug("CheckSessionIFrame: "+e.data+" message from check session op iframe"))},e.prototype.start=function(e){var t=this;if(this._session_state!==e){n.Log.debug("CheckSessionIFrame.start"),this.stop(),this._session_state=e;var r=function(){t._frame.contentWindow.postMessage(t._client_id+" "+t._session_state,t._frame_origin)};r(),this._timer=window.setInterval(r,this._interval)}},e.prototype.stop=function(){this._session_state=null,this._timer&&(n.Log.debug("CheckSessionIFrame.stop"),window.clearInterval(this._timer),this._timer=null)},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenRevocationClient=void 0;var n=r(0),i=r(2),o=r(1);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a="access_token",u="refresh_token";t.TokenRevocationClient=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.Global.XMLHttpRequest,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.MetadataService;if(s(this,e),!t)throw n.Log.error("TokenRevocationClient.ctor: No settings provided"),new Error("No settings provided.");this._settings=t,this._XMLHttpRequestCtor=r,this._metadataService=new a(this._settings)}return e.prototype.revoke=function(e,t){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"access_token";if(!e)throw n.Log.error("TokenRevocationClient.revoke: No token provided"),new Error("No token provided.");if(i!==a&&i!=u)throw n.Log.error("TokenRevocationClient.revoke: Invalid token type"),new Error("Invalid token type.");return this._metadataService.getRevocationEndpoint().then((function(o){if(o){n.Log.debug("TokenRevocationClient.revoke: Revoking "+i);var s=r._settings.client_id,a=r._settings.client_secret;return r._revoke(o,s,a,e,i)}if(t)throw n.Log.error("TokenRevocationClient.revoke: Revocation not supported"),new Error("Revocation not supported")}))},e.prototype._revoke=function(e,t,r,i,o){var s=this;return new Promise((function(a,u){var c=new s._XMLHttpRequestCtor;c.open("POST",e),c.onload=function(){n.Log.debug("TokenRevocationClient.revoke: HTTP response received, status",c.status),200===c.status?a():u(Error(c.statusText+" ("+c.status+")"))},c.onerror=function(){n.Log.debug("TokenRevocationClient.revoke: Network Error."),u("Network Error")};var l="client_id="+encodeURIComponent(t);r&&(l+="&client_secret="+encodeURIComponent(r)),l+="&token_type_hint="+encodeURIComponent(o),l+="&token="+encodeURIComponent(i),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.send(l)}))},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CordovaPopupWindow=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0);t.CordovaPopupWindow=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t})),this.features=t.popupWindowFeatures||"location=no,toolbar=no,zoom=no",this.target=t.popupWindowTarget||"_blank",this.redirect_uri=t.startUrl,i.Log.debug("CordovaPopupWindow.ctor: redirect_uri: "+this.redirect_uri)}return e.prototype._isInAppBrowserInstalled=function(e){return["cordova-plugin-inappbrowser","cordova-plugin-inappbrowser.inappbrowser","org.apache.cordova.inappbrowser"].some((function(t){return e.hasOwnProperty(t)}))},e.prototype.navigate=function(e){if(e&&e.url){if(!window.cordova)return this._error("cordova is undefined");var t=window.cordova.require("cordova/plugin_list").metadata;if(!1===this._isInAppBrowserInstalled(t))return this._error("InAppBrowser plugin not found");this._popup=cordova.InAppBrowser.open(e.url,this.target,this.features),this._popup?(i.Log.debug("CordovaPopupWindow.navigate: popup successfully created"),this._exitCallbackEvent=this._exitCallback.bind(this),this._loadStartCallbackEvent=this._loadStartCallback.bind(this),this._popup.addEventListener("exit",this._exitCallbackEvent,!1),this._popup.addEventListener("loadstart",this._loadStartCallbackEvent,!1)):this._error("Error opening popup window")}else this._error("No url provided");return this.promise},e.prototype._loadStartCallback=function(e){0===e.url.indexOf(this.redirect_uri)&&this._success({url:e.url})},e.prototype._exitCallback=function(e){this._error(e)},e.prototype._success=function(e){this._cleanup(),i.Log.debug("CordovaPopupWindow: Successful response from cordova popup window"),this._resolve(e)},e.prototype._error=function(e){this._cleanup(),i.Log.error(e),this._reject(new Error(e))},e.prototype.close=function(){this._cleanup()},e.prototype._cleanup=function(){this._popup&&(i.Log.debug("CordovaPopupWindow: cleaning up popup"),this._popup.removeEventListener("exit",this._exitCallbackEvent,!1),this._popup.removeEventListener("loadstart",this._loadStartCallbackEvent,!1),this._popup.close()),this._popup=null},n(e,[{key:"promise",get:function(){return this._promise}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(10),o=r(5),s=r(6),a=r(37),u=r(38),c=r(16),l=r(2),d=r(48),h=r(49),p=r(19),f=r(20),g=r(18),y=r(1),v=r(15),m=r(50);t.default={Version:m.Version,Log:n.Log,OidcClient:i.OidcClient,OidcClientSettings:o.OidcClientSettings,WebStorageStateStore:s.WebStorageStateStore,InMemoryWebStorage:a.InMemoryWebStorage,UserManager:u.UserManager,AccessTokenEvents:c.AccessTokenEvents,MetadataService:l.MetadataService,CordovaPopupNavigator:d.CordovaPopupNavigator,CordovaIFrameNavigator:h.CordovaIFrameNavigator,CheckSessionIFrame:p.CheckSessionIFrame,TokenRevocationClient:f.TokenRevocationClient,SessionMonitor:g.SessionMonitor,Global:y.Global,User:v.User},e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClockService=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.getEpochTime=function(){return Promise.resolve(Date.now()/1e3|0)},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseValidator=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=r(0),o=r(2),s=r(25),a=r(11),u=r(12),c=r(4);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d=["nonce","at_hash","iat","nbf","exp","aud","iss","c_hash"];t.ResponseValidator=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.MetadataService,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.UserInfoService,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c.JoseUtil,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:a.TokenClient;if(l(this,e),!t)throw i.Log.error("ResponseValidator.ctor: No settings passed to ResponseValidator"),new Error("settings");this._settings=t,this._metadataService=new r(this._settings),this._userInfoService=new n(this._settings),this._joseUtil=u,this._tokenClient=new d(this._settings)}return e.prototype.validateSigninResponse=function(e,t){var r=this;return i.Log.debug("ResponseValidator.validateSigninResponse"),this._processSigninParams(e,t).then((function(t){return i.Log.debug("ResponseValidator.validateSigninResponse: state processed"),r._validateTokens(e,t).then((function(t){return i.Log.debug("ResponseValidator.validateSigninResponse: tokens validated"),r._processClaims(e,t).then((function(e){return i.Log.debug("ResponseValidator.validateSigninResponse: claims processed"),e}))}))}))},e.prototype.validateSignoutResponse=function(e,t){return e.id!==t.state?(i.Log.error("ResponseValidator.validateSignoutResponse: State does not match"),Promise.reject(new Error("State does not match"))):(i.Log.debug("ResponseValidator.validateSignoutResponse: state validated"),t.state=e.data,t.error?(i.Log.warn("ResponseValidator.validateSignoutResponse: Response was error",t.error),Promise.reject(new u.ErrorResponse(t))):Promise.resolve(t))},e.prototype._processSigninParams=function(e,t){if(e.id!==t.state)return i.Log.error("ResponseValidator._processSigninParams: State does not match"),Promise.reject(new Error("State does not match"));if(!e.client_id)return i.Log.error("ResponseValidator._processSigninParams: No client_id on state"),Promise.reject(new Error("No client_id on state"));if(!e.authority)return i.Log.error("ResponseValidator._processSigninParams: No authority on state"),Promise.reject(new Error("No authority on state"));if(this._settings.authority){if(this._settings.authority&&this._settings.authority!==e.authority)return i.Log.error("ResponseValidator._processSigninParams: authority mismatch on settings vs. signin state"),Promise.reject(new Error("authority mismatch on settings vs. signin state"))}else this._settings.authority=e.authority;if(this._settings.client_id){if(this._settings.client_id&&this._settings.client_id!==e.client_id)return i.Log.error("ResponseValidator._processSigninParams: client_id mismatch on settings vs. signin state"),Promise.reject(new Error("client_id mismatch on settings vs. signin state"))}else this._settings.client_id=e.client_id;return i.Log.debug("ResponseValidator._processSigninParams: state validated"),t.state=e.data,t.error?(i.Log.warn("ResponseValidator._processSigninParams: Response was error",t.error),Promise.reject(new u.ErrorResponse(t))):e.nonce&&!t.id_token?(i.Log.error("ResponseValidator._processSigninParams: Expecting id_token in response"),Promise.reject(new Error("No id_token in response"))):!e.nonce&&t.id_token?(i.Log.error("ResponseValidator._processSigninParams: Not expecting id_token in response"),Promise.reject(new Error("Unexpected id_token in response"))):e.code_verifier&&!t.code?(i.Log.error("ResponseValidator._processSigninParams: Expecting code in response"),Promise.reject(new Error("No code in response"))):!e.code_verifier&&t.code?(i.Log.error("ResponseValidator._processSigninParams: Not expecting code in response"),Promise.reject(new Error("Unexpected code in response"))):(t.scope||(t.scope=e.scope),Promise.resolve(t))},e.prototype._processClaims=function(e,t){var r=this;if(t.isOpenIdConnect){if(i.Log.debug("ResponseValidator._processClaims: response is OIDC, processing claims"),t.profile=this._filterProtocolClaims(t.profile),!0!==e.skipUserInfo&&this._settings.loadUserInfo&&t.access_token)return i.Log.debug("ResponseValidator._processClaims: loading user info"),this._userInfoService.getClaims(t.access_token).then((function(e){return i.Log.debug("ResponseValidator._processClaims: user info claims received from user info endpoint"),e.sub!==t.profile.sub?(i.Log.error("ResponseValidator._processClaims: sub from user info endpoint does not match sub in id_token"),Promise.reject(new Error("sub from user info endpoint does not match sub in id_token"))):(t.profile=r._mergeClaims(t.profile,e),i.Log.debug("ResponseValidator._processClaims: user info claims received, updated profile:",t.profile),t)}));i.Log.debug("ResponseValidator._processClaims: not loading user info")}else i.Log.debug("ResponseValidator._processClaims: response is not OIDC, not processing claims");return Promise.resolve(t)},e.prototype._mergeClaims=function(e,t){var r=Object.assign({},e);for(var i in t){var o=t[i];Array.isArray(o)||(o=[o]);for(var s=0;s<o.length;s++){var a=o[s];r[i]?Array.isArray(r[i])?r[i].indexOf(a)<0&&r[i].push(a):r[i]!==a&&("object"===(void 0===a?"undefined":n(a))&&this._settings.mergeClaims?r[i]=this._mergeClaims(r[i],a):r[i]=[r[i],a]):r[i]=a}}return r},e.prototype._filterProtocolClaims=function(e){i.Log.debug("ResponseValidator._filterProtocolClaims, incoming claims:",e);var t=Object.assign({},e);return this._settings._filterProtocolClaims?(d.forEach((function(e){delete t[e]})),i.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims filtered",t)):i.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims not filtered"),t},e.prototype._validateTokens=function(e,t){return t.code?(i.Log.debug("ResponseValidator._validateTokens: Validating code"),this._processCode(e,t)):t.id_token?t.access_token?(i.Log.debug("ResponseValidator._validateTokens: Validating id_token and access_token"),this._validateIdTokenAndAccessToken(e,t)):(i.Log.debug("ResponseValidator._validateTokens: Validating id_token"),this._validateIdToken(e,t)):(i.Log.debug("ResponseValidator._validateTokens: No code to process or id_token to validate"),Promise.resolve(t))},e.prototype._processCode=function(e,t){var r=this,o={client_id:e.client_id,client_secret:e.client_secret,code:t.code,redirect_uri:e.redirect_uri,code_verifier:e.code_verifier};return e.extraTokenParams&&"object"===n(e.extraTokenParams)&&Object.assign(o,e.extraTokenParams),this._tokenClient.exchangeCode(o).then((function(n){for(var o in n)t[o]=n[o];return t.id_token?(i.Log.debug("ResponseValidator._processCode: token response successful, processing id_token"),r._validateIdTokenAttributes(e,t)):(i.Log.debug("ResponseValidator._processCode: token response successful, returning response"),t)}))},e.prototype._validateIdTokenAttributes=function(e,t){var r=this;return this._metadataService.getIssuer().then((function(n){var o=e.client_id,s=r._settings.clockSkew;return i.Log.debug("ResponseValidator._validateIdTokenAttributes: Validaing JWT attributes; using clock skew (in seconds) of: ",s),r._settings.getEpochTime().then((function(a){return r._joseUtil.validateJwtAttributes(t.id_token,n,o,s,a).then((function(r){return e.nonce&&e.nonce!==r.nonce?(i.Log.error("ResponseValidator._validateIdTokenAttributes: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):r.sub?(t.profile=r,t):(i.Log.error("ResponseValidator._validateIdTokenAttributes: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))}))}))}))},e.prototype._validateIdTokenAndAccessToken=function(e,t){var r=this;return this._validateIdToken(e,t).then((function(e){return r._validateAccessToken(e)}))},e.prototype._getSigningKeyForJwt=function(e){var t=this;return this._metadataService.getSigningKeys().then((function(r){var n=e.header.kid;if(!r)return i.Log.error("ResponseValidator._validateIdToken: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));i.Log.debug("ResponseValidator._validateIdToken: Received signing keys");var o=void 0;if(n)o=r.filter((function(e){return e.kid===n}))[0];else{if((r=t._filterByAlg(r,e.header.alg)).length>1)return i.Log.error("ResponseValidator._validateIdToken: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));o=r[0]}return Promise.resolve(o)}))},e.prototype._getSigningKeyForJwtWithSingleRetry=function(e){var t=this;return this._getSigningKeyForJwt(e).then((function(r){return r?Promise.resolve(r):(t._metadataService.resetSigningKeys(),t._getSigningKeyForJwt(e))}))},e.prototype._validateIdToken=function(e,t){var r=this;if(!e.nonce)return i.Log.error("ResponseValidator._validateIdToken: No nonce on state"),Promise.reject(new Error("No nonce on state"));var n=this._joseUtil.parseJwt(t.id_token);return n&&n.header&&n.payload?e.nonce!==n.payload.nonce?(i.Log.error("ResponseValidator._validateIdToken: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):this._metadataService.getIssuer().then((function(o){return i.Log.debug("ResponseValidator._validateIdToken: Received issuer"),r._getSigningKeyForJwtWithSingleRetry(n).then((function(s){if(!s)return i.Log.error("ResponseValidator._validateIdToken: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var a=e.client_id,u=r._settings.clockSkew;return i.Log.debug("ResponseValidator._validateIdToken: Validaing JWT; using clock skew (in seconds) of: ",u),r._joseUtil.validateJwt(t.id_token,s,o,a,u).then((function(){return i.Log.debug("ResponseValidator._validateIdToken: JWT validation successful"),n.payload.sub?(t.profile=n.payload,t):(i.Log.error("ResponseValidator._validateIdToken: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))}))}))})):(i.Log.error("ResponseValidator._validateIdToken: Failed to parse id_token",n),Promise.reject(new Error("Failed to parse id_token")))},e.prototype._filterByAlg=function(e,t){var r=null;if(t.startsWith("RS"))r="RSA";else if(t.startsWith("PS"))r="PS";else{if(!t.startsWith("ES"))return i.Log.debug("ResponseValidator._filterByAlg: alg not supported: ",t),[];r="EC"}return i.Log.debug("ResponseValidator._filterByAlg: Looking for keys that match kty: ",r),e=e.filter((function(e){return e.kty===r})),i.Log.debug("ResponseValidator._filterByAlg: Number of keys that match kty: ",r,e.length),e},e.prototype._validateAccessToken=function(e){if(!e.profile)return i.Log.error("ResponseValidator._validateAccessToken: No profile loaded from id_token"),Promise.reject(new Error("No profile loaded from id_token"));if(!e.profile.at_hash)return i.Log.error("ResponseValidator._validateAccessToken: No at_hash in id_token"),Promise.reject(new Error("No at_hash in id_token"));if(!e.id_token)return i.Log.error("ResponseValidator._validateAccessToken: No id_token"),Promise.reject(new Error("No id_token"));var t=this._joseUtil.parseJwt(e.id_token);if(!t||!t.header)return i.Log.error("ResponseValidator._validateAccessToken: Failed to parse id_token",t),Promise.reject(new Error("Failed to parse id_token"));var r=t.header.alg;if(!r||5!==r.length)return i.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",r),Promise.reject(new Error("Unsupported alg: "+r));var n=r.substr(2,3);if(!n)return i.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",r,n),Promise.reject(new Error("Unsupported alg: "+r));if(256!==(n=parseInt(n))&&384!==n&&512!==n)return i.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",r,n),Promise.reject(new Error("Unsupported alg: "+r));var o="sha"+n,s=this._joseUtil.hashString(e.access_token,o);if(!s)return i.Log.error("ResponseValidator._validateAccessToken: access_token hash failed:",o),Promise.reject(new Error("Failed to validate at_hash"));var a=s.substr(0,s.length/2),u=this._joseUtil.hexToBase64Url(a);return u!==e.profile.at_hash?(i.Log.error("ResponseValidator._validateAccessToken: Failed to validate at_hash",u,e.profile.at_hash),Promise.reject(new Error("Failed to validate at_hash"))):(i.Log.debug("ResponseValidator._validateAccessToken: success"),Promise.resolve(e))},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserInfoService=void 0;var n=r(7),i=r(2),o=r(0),s=r(4);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.UserInfoService=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.JsonService,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.MetadataService,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.JoseUtil;if(a(this,e),!t)throw o.Log.error("UserInfoService.ctor: No settings passed"),new Error("settings");this._settings=t,this._jsonService=new r(void 0,void 0,this._getClaimsFromJwt.bind(this)),this._metadataService=new u(this._settings),this._joseUtil=c}return e.prototype.getClaims=function(e){var t=this;return e?this._metadataService.getUserInfoEndpoint().then((function(r){return o.Log.debug("UserInfoService.getClaims: received userinfo url",r),t._jsonService.getJson(r,e).then((function(e){return o.Log.debug("UserInfoService.getClaims: claims received",e),e}))})):(o.Log.error("UserInfoService.getClaims: No token passed"),Promise.reject(new Error("A token is required")))},e.prototype._getClaimsFromJwt=function e(t){var r=this;try{var n=this._joseUtil.parseJwt(t.responseText);if(!n||!n.header||!n.payload)return o.Log.error("UserInfoService._getClaimsFromJwt: Failed to parse JWT",n),Promise.reject(new Error("Failed to parse id_token"));var i=n.header.kid,s=void 0;switch(this._settings.userInfoJwtIssuer){case"OP":s=this._metadataService.getIssuer();break;case"ANY":s=Promise.resolve(n.payload.iss);break;default:s=Promise.resolve(this._settings.userInfoJwtIssuer)}return s.then((function(e){return o.Log.debug("UserInfoService._getClaimsFromJwt: Received issuer:"+e),r._metadataService.getSigningKeys().then((function(s){if(!s)return o.Log.error("UserInfoService._getClaimsFromJwt: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));o.Log.debug("UserInfoService._getClaimsFromJwt: Received signing keys");var a=void 0;if(i)a=s.filter((function(e){return e.kid===i}))[0];else{if((s=r._filterByAlg(s,n.header.alg)).length>1)return o.Log.error("UserInfoService._getClaimsFromJwt: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));a=s[0]}if(!a)return o.Log.error("UserInfoService._getClaimsFromJwt: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var u=r._settings.client_id,c=r._settings.clockSkew;return o.Log.debug("UserInfoService._getClaimsFromJwt: Validaing JWT; using clock skew (in seconds) of: ",c),r._joseUtil.validateJwt(t.responseText,a,e,u,c,void 0,!0).then((function(){return o.Log.debug("UserInfoService._getClaimsFromJwt: JWT validation successful"),n.payload}))}))}))}catch(e){return o.Log.error("UserInfoService._getClaimsFromJwt: Error parsing JWT response",e.message),void reject(e)}},e.prototype._filterByAlg=function(e,t){var r=null;if(t.startsWith("RS"))r="RSA";else if(t.startsWith("PS"))r="PS";else{if(!t.startsWith("ES"))return o.Log.debug("UserInfoService._filterByAlg: alg not supported: ",t),[];r="EC"}return o.Log.debug("UserInfoService._filterByAlg: Looking for keys that match kty: ",r),e=e.filter((function(e){return e.kty===r})),o.Log.debug("UserInfoService._filterByAlg: Number of keys that match kty: ",r,e.length),e},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AllowedSigningAlgs=t.b64tohex=t.hextob64u=t.crypto=t.X509=t.KeyUtil=t.jws=void 0;var n=r(27);t.jws=n.jws,t.KeyUtil=n.KEYUTIL,t.X509=n.X509,t.crypto=n.crypto,t.hextob64u=n.hextob64u,t.b64tohex=n.b64tohex,t.AllowedSigningAlgs=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"]},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r,n,i,o,s,a,u,c,l,d,h,p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f={userAgent:!1},g={},y=y||(r=Math,i=(n={}).lib={},o=i.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var r=new e;return t&&r.mixIn(t),r.hasOwnProperty("init")||(r.init=function(){r.$super.init.apply(this,arguments)}),r.init.prototype=r,r.$super=this,r},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),s=i.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(var o=0;o<i;o++){var s=r[o>>>2]>>>24-o%4*8&255;t[n+o>>>2]|=s<<24-(n+o)%4*8}else for(o=0;o<i;o+=4)t[n+o>>>2]=r[o>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=r.ceil(t/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(4294967296*r.random()|0);return new s.init(t,e)}}),a=n.enc={},u=a.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new s.init(r,t/2)}},c=a.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new s.init(r,t)}},l=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},d=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,n=t.words,i=t.sigBytes,o=this.blockSize,a=i/(4*o),u=(a=e?r.ceil(a):r.max((0|a)-this._minBufferSize,0))*o,c=r.min(4*u,i);if(u){for(var l=0;l<u;l+=o)this._doProcessBlock(n,l);var d=n.splice(0,u);t.sigBytes-=c}return new s.init(d,c)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),i.Hasher=d.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new h.HMAC.init(e,r).finalize(t)}}}),h=n.algo={},n);!function(e){var t,r=(t=y).lib,n=r.Base,i=r.WordArray;(t=t.x64={}).Word=n.extend({init:function(e,t){this.high=e,this.low=t}}),t.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,r=[],n=0;n<t;n++){var o=e[n];r.push(o.high),r.push(o.low)}return i.create(r,this.sigBytes)},clone:function(){for(var e=n.clone.call(this),t=e.words=this.words.slice(0),r=t.length,i=0;i<r;i++)t[i]=t[i].clone();return e}})}(),function(){var e=y,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp(),e=[];for(var i=0;i<r;i+=3)for(var o=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;4>s&&i+.75*s<r;s++)e.push(n.charAt(o>>>6*(3-s)&63));if(t=n.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var r=e.length,n=this._map;(i=n.charAt(64))&&-1!=(i=e.indexOf(i))&&(r=i);for(var i=[],o=0,s=0;s<r;s++)if(s%4){var a=n.indexOf(e.charAt(s-1))<<s%4*2,u=n.indexOf(e.charAt(s))>>>6-s%4*2;i[o>>>2]|=(a|u)<<24-o%4*8,o++}return t.create(i,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){for(var t=y,r=(i=t.lib).WordArray,n=i.Hasher,i=t.algo,o=[],s=[],a=function(e){return 4294967296*(e-(0|e))|0},u=2,c=0;64>c;){var l;e:{l=u;for(var d=e.sqrt(l),h=2;h<=d;h++)if(!(l%h)){l=!1;break e}l=!0}l&&(8>c&&(o[c]=a(e.pow(u,.5))),s[c]=a(e.pow(u,1/3)),c++),u++}var p=[];i=i.SHA256=n.extend({_doReset:function(){this._hash=new r.init(o.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],a=r[3],u=r[4],c=r[5],l=r[6],d=r[7],h=0;64>h;h++){if(16>h)p[h]=0|e[t+h];else{var f=p[h-15],g=p[h-2];p[h]=((f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3)+p[h-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+p[h-16]}f=d+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&c^~u&l)+s[h]+p[h],g=((n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22))+(n&i^n&o^i&o),d=l,l=c,c=u,u=a+f|0,a=o,o=i,i=n,n=f+g|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+a|0,r[4]=r[4]+u|0,r[5]=r[5]+c|0,r[6]=r[6]+l|0,r[7]=r[7]+d|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return r[i>>>5]|=128<<24-i%32,r[14+(i+64>>>9<<4)]=e.floor(n/4294967296),r[15+(i+64>>>9<<4)]=n,t.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA256=n._createHelper(i),t.HmacSHA256=n._createHmacHelper(i)}(Math),function(){function e(){return n.create.apply(n,arguments)}for(var t=y,r=t.lib.Hasher,n=(o=t.x64).Word,i=o.WordArray,o=t.algo,s=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],a=[],u=0;80>u;u++)a[u]=e();o=o.SHA512=r.extend({_doReset:function(){this._hash=new i.init([new n.init(1779033703,4089235720),new n.init(3144134277,2227873595),new n.init(1013904242,4271175723),new n.init(2773480762,1595750129),new n.init(1359893119,2917565137),new n.init(2600822924,725511199),new n.init(528734635,4215389547),new n.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var r=(d=this._hash.words)[0],n=d[1],i=d[2],o=d[3],u=d[4],c=d[5],l=d[6],d=d[7],h=r.high,p=r.low,f=n.high,g=n.low,y=i.high,v=i.low,m=o.high,w=o.low,b=u.high,S=u.low,_=c.high,E=c.low,A=l.high,k=l.low,F=d.high,C=d.low,P=h,x=p,R=f,T=g,I=y,O=v,U=m,D=w,j=b,L=S,N=_,H=E,M=A,B=k,K=F,V=C,W=0;80>W;W++){var $=a[W];if(16>W)var J=$.high=0|e[t+2*W],q=$.low=0|e[t+2*W+1];else{J=((q=(J=a[W-15]).high)>>>1|(z=J.low)<<31)^(q>>>8|z<<24)^q>>>7;var z=(z>>>1|q<<31)^(z>>>8|q<<24)^(z>>>7|q<<25),G=((q=(G=a[W-2]).high)>>>19|(Y=G.low)<<13)^(q<<3|Y>>>29)^q>>>6,Y=(Y>>>19|q<<13)^(Y<<3|q>>>29)^(Y>>>6|q<<26),X=(q=a[W-7]).high,Z=(Q=a[W-16]).high,Q=Q.low;J=(J=(J=J+X+((q=z+q.low)>>>0<z>>>0?1:0))+G+((q+=Y)>>>0<Y>>>0?1:0))+Z+((q+=Q)>>>0<Q>>>0?1:0),$.high=J,$.low=q}X=j&N^~j&M,Q=L&H^~L&B,$=P&R^P&I^R&I;var ee=x&T^x&O^T&O,te=(z=(P>>>28|x<<4)^(P<<30|x>>>2)^(P<<25|x>>>7),G=(x>>>28|P<<4)^(x<<30|P>>>2)^(x<<25|P>>>7),(Y=s[W]).high),re=Y.low;Z=K+((j>>>14|L<<18)^(j>>>18|L<<14)^(j<<23|L>>>9))+((Y=V+((L>>>14|j<<18)^(L>>>18|j<<14)^(L<<23|j>>>9)))>>>0<V>>>0?1:0),K=M,V=B,M=N,B=H,N=j,H=L,j=U+(Z=(Z=(Z=Z+X+((Y+=Q)>>>0<Q>>>0?1:0))+te+((Y+=re)>>>0<re>>>0?1:0))+J+((Y+=q)>>>0<q>>>0?1:0))+((L=D+Y|0)>>>0<D>>>0?1:0)|0,U=I,D=O,I=R,O=T,R=P,T=x,P=Z+($=z+$+((q=G+ee)>>>0<G>>>0?1:0))+((x=Y+q|0)>>>0<Y>>>0?1:0)|0}p=r.low=p+x,r.high=h+P+(p>>>0<x>>>0?1:0),g=n.low=g+T,n.high=f+R+(g>>>0<T>>>0?1:0),v=i.low=v+O,i.high=y+I+(v>>>0<O>>>0?1:0),w=o.low=w+D,o.high=m+U+(w>>>0<D>>>0?1:0),S=u.low=S+L,u.high=b+j+(S>>>0<L>>>0?1:0),E=c.low=E+H,c.high=_+N+(E>>>0<H>>>0?1:0),k=l.low=k+B,l.high=A+M+(k>>>0<B>>>0?1:0),C=d.low=C+V,d.high=F+K+(C>>>0<V>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[30+(n+128>>>10<<5)]=Math.floor(r/4294967296),t[31+(n+128>>>10<<5)]=r,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32}),t.SHA512=r._createHelper(o),t.HmacSHA512=r._createHmacHelper(o)}(),function(){var e=y,t=(i=e.x64).Word,r=i.WordArray,n=(i=e.algo).SHA512,i=i.SHA384=n.extend({_doReset:function(){this._hash=new r.init([new t.init(3418070365,3238371032),new t.init(1654270250,914150663),new t.init(2438529370,812702999),new t.init(355462360,4144912697),new t.init(1731405415,4290775857),new t.init(2394180231,1750603025),new t.init(3675008525,1694076839),new t.init(1203062813,3204075428)])},_doFinalize:function(){var e=n._doFinalize.call(this);return e.sigBytes-=16,e}});e.SHA384=n._createHelper(i),e.HmacSHA384=n._createHmacHelper(i)}();var v,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function w(e){var t,r,n="";for(t=0;t+3<=e.length;t+=3)r=parseInt(e.substring(t,t+3),16),n+=m.charAt(r>>6)+m.charAt(63&r);for(t+1==e.length?(r=parseInt(e.substring(t,t+1),16),n+=m.charAt(r<<2)):t+2==e.length&&(r=parseInt(e.substring(t,t+2),16),n+=m.charAt(r>>2)+m.charAt((3&r)<<4));(3&n.length)>0;)n+="=";return n}function b(e){var t,r,n,i="",o=0;for(t=0;t<e.length&&"="!=e.charAt(t);++t)(n=m.indexOf(e.charAt(t)))<0||(0==o?(i+=C(n>>2),r=3&n,o=1):1==o?(i+=C(r<<2|n>>4),r=15&n,o=2):2==o?(i+=C(r),i+=C(n>>2),r=3&n,o=3):(i+=C(r<<2|n>>4),i+=C(15&n),o=0));return 1==o&&(i+=C(r<<2)),i}function S(e){var t,r=b(e),n=new Array;for(t=0;2*t<r.length;++t)n[t]=parseInt(r.substring(2*t,2*t+2),16);return n}function _(e,t,r){null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function E(){return new _(null)}"Microsoft Internet Explorer"==f.appName?(_.prototype.am=function(e,t,r,n,i,o){for(var s=32767&t,a=t>>15;--o>=0;){var u=32767&this[e],c=this[e++]>>15,l=a*u+c*s;i=((u=s*u+((32767&l)<<15)+r[n]+(1073741823&i))>>>30)+(l>>>15)+a*c+(i>>>30),r[n++]=1073741823&u}return i},v=30):"Netscape"!=f.appName?(_.prototype.am=function(e,t,r,n,i,o){for(;--o>=0;){var s=t*this[e++]+r[n]+i;i=Math.floor(s/67108864),r[n++]=67108863&s}return i},v=26):(_.prototype.am=function(e,t,r,n,i,o){for(var s=16383&t,a=t>>14;--o>=0;){var u=16383&this[e],c=this[e++]>>14,l=a*u+c*s;i=((u=s*u+((16383&l)<<14)+r[n]+i)>>28)+(l>>14)+a*c,r[n++]=268435455&u}return i},v=28),_.prototype.DB=v,_.prototype.DM=(1<<v)-1,_.prototype.DV=1<<v,_.prototype.FV=Math.pow(2,52),_.prototype.F1=52-v,_.prototype.F2=2*v-52;var A,k,F=new Array;for(A="0".charCodeAt(0),k=0;k<=9;++k)F[A++]=k;for(A="a".charCodeAt(0),k=10;k<36;++k)F[A++]=k;for(A="A".charCodeAt(0),k=10;k<36;++k)F[A++]=k;function C(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function P(e,t){var r=F[e.charCodeAt(t)];return null==r?-1:r}function x(e){var t=E();return t.fromInt(e),t}function R(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function T(e){this.m=e}function I(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function O(e,t){return e&t}function U(e,t){return e|t}function D(e,t){return e^t}function j(e,t){return e&~t}function L(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function N(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function H(){}function M(e){return e}function B(e){this.r2=E(),this.q3=E(),_.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}T.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},T.prototype.revert=function(e){return e},T.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},T.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},T.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},I.prototype.convert=function(e){var t=E();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(_.ZERO)>0&&this.m.subTo(t,t),t},I.prototype.revert=function(e){var t=E();return e.copyTo(t),this.reduce(t),t},I.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e[t],n=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[r=t+this.m.t]+=this.m.am(0,n,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},I.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},I.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},_.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},_.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},_.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var n=e.length,i=!1,o=0;--n>=0;){var s=8==r?255&e[n]:P(e,n);s<0?"-"==e.charAt(n)&&(i=!0):(i=!1,0==o?this[this.t++]=s:o+r>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,(o+=r)>=this.DB&&(o-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&_.ZERO.subTo(this,this)},_.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},_.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s},_.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s},_.prototype.lShiftTo=function(e,t){var r,n=e%this.DB,i=this.DB-n,o=(1<<i)-1,s=Math.floor(e/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t[r+s+1]=this[r]>>i|a,a=(this[r]&o)<<n;for(r=s-1;r>=0;--r)t[r]=0;t[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp()},_.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,i=this.DB-n,o=(1<<n)-1;t[0]=this[r]>>n;for(var s=r+1;s<this.t;++s)t[s-r-1]|=(this[s]&o)<<i,t[s-r]=this[s]>>n;n>0&&(t[this.t-r-1]|=(this.s&o)<<i),t.t=this.t-r,t.clamp()}},_.prototype.subTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]-e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e[r],t[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[r++]=this.DV+n:n>0&&(t[r++]=n),t.t=r,t.clamp()},_.prototype.multiplyTo=function(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t[i]=0;for(i=0;i<n.t;++i)t[i+r.t]=r.am(0,n[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&_.ZERO.subTo(t,t)},_.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()},_.prototype.divRemTo=function(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=E());var o=E(),s=this.s,a=e.s,u=this.DB-R(n[n.t-1]);u>0?(n.lShiftTo(u,o),i.lShiftTo(u,r)):(n.copyTo(o),i.copyTo(r));var c=o.t,l=o[c-1];if(0!=l){var d=l*(1<<this.F1)+(c>1?o[c-2]>>this.F2:0),h=this.FV/d,p=(1<<this.F1)/d,f=1<<this.F2,g=r.t,y=g-c,v=null==t?E():t;for(o.dlShiftTo(y,v),r.compareTo(v)>=0&&(r[r.t++]=1,r.subTo(v,r)),_.ONE.dlShiftTo(c,v),v.subTo(o,o);o.t<c;)o[o.t++]=0;for(;--y>=0;){var m=r[--g]==l?this.DM:Math.floor(r[g]*h+(r[g-1]+f)*p);if((r[g]+=o.am(0,m,r,y,0,c))<m)for(o.dlShiftTo(y,v),r.subTo(v,r);r[g]<--m;)r.subTo(v,r)}null!=t&&(r.drShiftTo(c,t),s!=a&&_.ZERO.subTo(t,t)),r.t=c,r.clamp(),u>0&&r.rShiftTo(u,r),s<0&&_.ZERO.subTo(r,r)}}},_.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},_.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},_.prototype.exp=function(e,t){if(e>4294967295||e<1)return _.ONE;var r=E(),n=E(),i=t.convert(this),o=R(e)-1;for(i.copyTo(r);--o>=0;)if(t.sqrTo(r,n),(e&1<<o)>0)t.mulTo(n,i,r);else{var s=r;r=n,n=s}return t.revert(r)},_.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%t;if(s-- >0)for(a<this.DB&&(r=this[s]>>a)>0&&(i=!0,o=C(r));s>=0;)a<t?(r=(this[s]&(1<<a)-1)<<t-a,r|=this[--s]>>(a+=this.DB-t)):(r=this[s]>>(a-=t)&n,a<=0&&(a+=this.DB,--s)),r>0&&(i=!0),i&&(o+=C(r));return i?o:"0"},_.prototype.negate=function(){var e=E();return _.ZERO.subTo(this,e),e},_.prototype.abs=function(){return this.s<0?this.negate():this},_.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this[r]-e[r]))return t;return 0},_.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+R(this[this.t-1]^this.s&this.DM)},_.prototype.mod=function(e){var t=E();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(_.ZERO)>0&&e.subTo(t,t),t},_.prototype.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new T(t):new I(t),this.exp(e,r)},_.ZERO=x(0),_.ONE=x(1),H.prototype.convert=M,H.prototype.revert=M,H.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},H.prototype.sqrTo=function(e,t){e.squareTo(t)},B.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=E();return e.copyTo(t),this.reduce(t),t},B.prototype.revert=function(e){return e},B.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},B.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},B.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var K,V,W,$=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],J=(1<<26)/$[$.length-1];function q(){this.i=0,this.j=0,this.S=new Array}function z(){!function(e){V[W++]^=255&e,V[W++]^=e>>8&255,V[W++]^=e>>16&255,V[W++]^=e>>24&255,W>=256&&(W-=256)}((new Date).getTime())}if(_.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},_.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=x(r),i=E(),o=E(),s="";for(this.divRemTo(n,i,o);i.signum()>0;)s=(r+o.intValue()).toString(e).substr(1)+s,i.divRemTo(n,i,o);return o.intValue().toString(e)+s},_.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,o=0,s=0,a=0;a<e.length;++a){var u=P(e,a);u<0?"-"==e.charAt(a)&&0==this.signum()&&(i=!0):(s=t*s+u,++o>=r&&(this.dMultiply(n),this.dAddOffset(s,0),o=0,s=0))}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(s,0)),i&&_.ZERO.subTo(this,this)},_.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(_.ONE.shiftLeft(e-1),U,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(_.ONE.shiftLeft(e-1),this);else{var n=new Array,i=7&e;n.length=1+(e>>3),t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}},_.prototype.bitwiseTo=function(e,t,r){var n,i,o=Math.min(e.t,this.t);for(n=0;n<o;++n)r[n]=t(this[n],e[n]);if(e.t<this.t){for(i=e.s&this.DM,n=o;n<this.t;++n)r[n]=t(this[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<e.t;++n)r[n]=t(i,e[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},_.prototype.changeBit=function(e,t){var r=_.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r},_.prototype.addTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]+e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e[r],t[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t[r++]=n:n<-1&&(t[r++]=this.DV+n),t.t=r,t.clamp()},_.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},_.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},_.prototype.multiplyLowerTo=function(e,t,r){var n,i=Math.min(this.t+e.t,t);for(r.s=0,r.t=i;i>0;)r[--i]=0;for(n=r.t-this.t;i<n;++i)r[i+this.t]=this.am(0,e[i],r,i,0,this.t);for(n=Math.min(e.t,t);i<n;++i)this.am(0,e[i],r,i,0,t-i);r.clamp()},_.prototype.multiplyUpperTo=function(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r[this.t+n-t]=this.am(t-n,e[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)},_.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this[n])%e;return r},_.prototype.millerRabin=function(e){var t=this.subtract(_.ONE),r=t.getLowestSetBit();if(r<=0)return!1;var n=t.shiftRight(r);(e=e+1>>1)>$.length&&(e=$.length);for(var i=E(),o=0;o<e;++o){i.fromInt($[Math.floor(Math.random()*$.length)]);var s=i.modPow(n,this);if(0!=s.compareTo(_.ONE)&&0!=s.compareTo(t)){for(var a=1;a++<r&&0!=s.compareTo(t);)if(0==(s=s.modPowInt(2,this)).compareTo(_.ONE))return!1;if(0!=s.compareTo(t))return!1}}return!0},_.prototype.clone=function(){var e=E();return this.copyTo(e),e},_.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},_.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},_.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},_.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},_.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,i=0;if(e-- >0)for(n<this.DB&&(r=this[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this[e]&(1<<n)-1)<<8-n,r|=this[--e]>>(n+=this.DB-8)):(r=this[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t},_.prototype.equals=function(e){return 0==this.compareTo(e)},_.prototype.min=function(e){return this.compareTo(e)<0?this:e},_.prototype.max=function(e){return this.compareTo(e)>0?this:e},_.prototype.and=function(e){var t=E();return this.bitwiseTo(e,O,t),t},_.prototype.or=function(e){var t=E();return this.bitwiseTo(e,U,t),t},_.prototype.xor=function(e){var t=E();return this.bitwiseTo(e,D,t),t},_.prototype.andNot=function(e){var t=E();return this.bitwiseTo(e,j,t),t},_.prototype.not=function(){for(var e=E(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},_.prototype.shiftLeft=function(e){var t=E();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},_.prototype.shiftRight=function(e){var t=E();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},_.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+L(this[e]);return this.s<0?this.t*this.DB:-1},_.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=N(this[r]^t);return e},_.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},_.prototype.setBit=function(e){return this.changeBit(e,U)},_.prototype.clearBit=function(e){return this.changeBit(e,j)},_.prototype.flipBit=function(e){return this.changeBit(e,D)},_.prototype.add=function(e){var t=E();return this.addTo(e,t),t},_.prototype.subtract=function(e){var t=E();return this.subTo(e,t),t},_.prototype.multiply=function(e){var t=E();return this.multiplyTo(e,t),t},_.prototype.divide=function(e){var t=E();return this.divRemTo(e,t,null),t},_.prototype.remainder=function(e){var t=E();return this.divRemTo(e,null,t),t},_.prototype.divideAndRemainder=function(e){var t=E(),r=E();return this.divRemTo(e,t,r),new Array(t,r)},_.prototype.modPow=function(e,t){var r,n,i=e.bitLength(),o=x(1);if(i<=0)return o;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new T(t):t.isEven()?new B(t):new I(t);var s=new Array,a=3,u=r-1,c=(1<<r)-1;if(s[1]=n.convert(this),r>1){var l=E();for(n.sqrTo(s[1],l);a<=c;)s[a]=E(),n.mulTo(l,s[a-2],s[a]),a+=2}var d,h,p=e.t-1,f=!0,g=E();for(i=R(e[p])-1;p>=0;){for(i>=u?d=e[p]>>i-u&c:(d=(e[p]&(1<<i+1)-1)<<u-i,p>0&&(d|=e[p-1]>>this.DB+i-u)),a=r;0==(1&d);)d>>=1,--a;if((i-=a)<0&&(i+=this.DB,--p),f)s[d].copyTo(o),f=!1;else{for(;a>1;)n.sqrTo(o,g),n.sqrTo(g,o),a-=2;a>0?n.sqrTo(o,g):(h=o,o=g,g=h),n.mulTo(g,s[d],o)}for(;p>=0&&0==(e[p]&1<<i);)n.sqrTo(o,g),h=o,o=g,g=h,--i<0&&(i=this.DB-1,--p)}return n.revert(o)},_.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return _.ZERO;for(var r=e.clone(),n=this.clone(),i=x(1),o=x(0),s=x(0),a=x(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(i.isEven()&&o.isEven()||(i.addTo(this,i),o.subTo(e,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),t?(s.isEven()&&a.isEven()||(s.addTo(this,s),a.subTo(e,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(s,i),o.subTo(a,o)):(n.subTo(r,n),t&&s.subTo(i,s),a.subTo(o,a))}return 0!=n.compareTo(_.ONE)?_.ZERO:a.compareTo(e)>=0?a.subtract(e):a.signum()<0?(a.addTo(e,a),a.signum()<0?a.add(e):a):a},_.prototype.pow=function(e){return this.exp(e,new H)},_.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return t;for(i<o&&(o=i),o>0&&(t.rShiftTo(o,t),r.rShiftTo(o,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r},_.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r[0]<=$[$.length-1]){for(t=0;t<$.length;++t)if(r[0]==$[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<$.length;){for(var n=$[t],i=t+1;i<$.length&&n<J;)n*=$[i++];for(n=r.modInt(n);t<i;)if(n%$[t++]==0)return!1}return r.millerRabin(e)},_.prototype.square=function(){var e=E();return this.squareTo(e),e},q.prototype.init=function(e){var t,r,n;for(t=0;t<256;++t)this.S[t]=t;for(r=0,t=0;t<256;++t)r=r+this.S[t]+e[t%e.length]&255,n=this.S[t],this.S[t]=this.S[r],this.S[r]=n;this.i=0,this.j=0},q.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]},null==V){var G;if(V=new Array,W=0,void 0!==g&&(void 0!==g.crypto||void 0!==g.msCrypto)){var Y=g.crypto||g.msCrypto;if(Y.getRandomValues){var X=new Uint8Array(32);for(Y.getRandomValues(X),G=0;G<32;++G)V[W++]=X[G]}else if("Netscape"==f.appName&&f.appVersion<"5"){var Z=g.crypto.random(32);for(G=0;G<Z.length;++G)V[W++]=255&Z.charCodeAt(G)}}for(;W<256;)G=Math.floor(65536*Math.random()),V[W++]=G>>>8,V[W++]=255&G;W=0,z()}function Q(){if(null==K){for(z(),(K=new q).init(V),W=0;W<V.length;++W)V[W]=0;W=0}return K.next()}function ee(){}function te(e,t){return new _(e,t)}function re(e,t,r){for(var n="",i=0;n.length<t;)n+=r(String.fromCharCode.apply(String,e.concat([(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i]))),i+=1;return n}function ne(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function ie(e,t){this.x=t,this.q=e}function oe(e,t,r,n){this.curve=e,this.x=t,this.y=r,this.z=null==n?_.ONE:n,this.zinv=null}function se(e,t,r){this.q=e,this.a=this.fromBigInteger(t),this.b=this.fromBigInteger(r),this.infinity=new oe(this,null,null)}ee.prototype.nextBytes=function(e){var t;for(t=0;t<e.length;++t)e[t]=Q()},ne.prototype.doPublic=function(e){return e.modPowInt(this.e,this.n)},ne.prototype.setPublic=function(e,t){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof e)this.n=e,this.e=t;else{if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw"Invalid RSA public key";this.n=te(e,16),this.e=parseInt(t,16)}},ne.prototype.encrypt=function(e){var t=function(e,t){if(t<e.length+11)throw"Message too long for RSA";for(var r=new Array,n=e.length-1;n>=0&&t>0;){var i=e.charCodeAt(n--);i<128?r[--t]=i:i>127&&i<2048?(r[--t]=63&i|128,r[--t]=i>>6|192):(r[--t]=63&i|128,r[--t]=i>>6&63|128,r[--t]=i>>12|224)}r[--t]=0;for(var o=new ee,s=new Array;t>2;){for(s[0]=0;0==s[0];)o.nextBytes(s);r[--t]=s[0]}return r[--t]=2,r[--t]=0,new _(r)}(e,this.n.bitLength()+7>>3);if(null==t)return null;var r=this.doPublic(t);if(null==r)return null;var n=r.toString(16);return 0==(1&n.length)?n:"0"+n},ne.prototype.encryptOAEP=function(e,t,r){var n=function(e,t,r,n){var i=ue.crypto.MessageDigest,o=ue.crypto.Util,s=null;if(r||(r="sha1"),"string"==typeof r&&(s=i.getCanonicalAlgName(r),n=i.getHashLength(s),r=function(e){return _e(o.hashHex(Ee(e),s))}),e.length+2*n+2>t)throw"Message too long for RSA";var a,u="";for(a=0;a<t-e.length-2*n-2;a+=1)u+="\0";var c=r("")+u+"\x01"+e,l=new Array(n);(new ee).nextBytes(l);var d=re(l,c.length,r),h=[];for(a=0;a<c.length;a+=1)h[a]=c.charCodeAt(a)^d.charCodeAt(a);var p=re(h,l.length,r),f=[0];for(a=0;a<l.length;a+=1)f[a+1]=l[a]^p.charCodeAt(a);return new _(f.concat(h))}(e,this.n.bitLength()+7>>3,t,r);if(null==n)return null;var i=this.doPublic(n);if(null==i)return null;var o=i.toString(16);return 0==(1&o.length)?o:"0"+o},ne.prototype.type="RSA",ie.prototype.equals=function(e){return e==this||this.q.equals(e.q)&&this.x.equals(e.x)},ie.prototype.toBigInteger=function(){return this.x},ie.prototype.negate=function(){return new ie(this.q,this.x.negate().mod(this.q))},ie.prototype.add=function(e){return new ie(this.q,this.x.add(e.toBigInteger()).mod(this.q))},ie.prototype.subtract=function(e){return new ie(this.q,this.x.subtract(e.toBigInteger()).mod(this.q))},ie.prototype.multiply=function(e){return new ie(this.q,this.x.multiply(e.toBigInteger()).mod(this.q))},ie.prototype.square=function(){return new ie(this.q,this.x.square().mod(this.q))},ie.prototype.divide=function(e){return new ie(this.q,this.x.multiply(e.toBigInteger().modInverse(this.q)).mod(this.q))},oe.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},oe.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},oe.prototype.equals=function(e){return e==this||(this.isInfinity()?e.isInfinity():e.isInfinity()?this.isInfinity():!!e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(_.ZERO)&&e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(_.ZERO))},oe.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(_.ZERO)&&!this.y.toBigInteger().equals(_.ZERO)},oe.prototype.negate=function(){return new oe(this.curve,this.x,this.y.negate(),this.z)},oe.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),r=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q);if(_.ZERO.equals(r))return _.ZERO.equals(t)?this.twice():this.curve.getInfinity();var n=new _("3"),i=this.x.toBigInteger(),o=this.y.toBigInteger(),s=(e.x.toBigInteger(),e.y.toBigInteger(),r.square()),a=s.multiply(r),u=i.multiply(s),c=t.square().multiply(this.z),l=c.subtract(u.shiftLeft(1)).multiply(e.z).subtract(a).multiply(r).mod(this.curve.q),d=u.multiply(n).multiply(t).subtract(o.multiply(a)).subtract(c.multiply(t)).multiply(e.z).add(t.multiply(a)).mod(this.curve.q),h=a.multiply(this.z).multiply(e.z).mod(this.curve.q);return new oe(this.curve,this.curve.fromBigInteger(l),this.curve.fromBigInteger(d),h)},oe.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=new _("3"),t=this.x.toBigInteger(),r=this.y.toBigInteger(),n=r.multiply(this.z),i=n.multiply(r).mod(this.curve.q),o=this.curve.a.toBigInteger(),s=t.square().multiply(e);_.ZERO.equals(o)||(s=s.add(this.z.square().multiply(o)));var a=(s=s.mod(this.curve.q)).square().subtract(t.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(n).mod(this.curve.q),u=s.multiply(e).multiply(t).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(s.square().multiply(s)).mod(this.curve.q),c=n.square().multiply(n).shiftLeft(3).mod(this.curve.q);return new oe(this.curve,this.curve.fromBigInteger(a),this.curve.fromBigInteger(u),c)},oe.prototype.multiply=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,r=e,n=r.multiply(new _("3")),i=this.negate(),o=this,s=this.curve.q.subtract(e),a=s.multiply(new _("3")),u=new oe(this.curve,this.x,this.y),c=u.negate();for(t=n.bitLength()-2;t>0;--t){o=o.twice();var l=n.testBit(t);l!=r.testBit(t)&&(o=o.add(l?this:i))}for(t=a.bitLength()-2;t>0;--t){u=u.twice();var d=a.testBit(t);d!=s.testBit(t)&&(u=u.add(d?u:c))}return o},oe.prototype.multiplyTwo=function(e,t,r){var n;n=e.bitLength()>r.bitLength()?e.bitLength()-1:r.bitLength()-1;for(var i=this.curve.getInfinity(),o=this.add(t);n>=0;)i=i.twice(),e.testBit(n)?i=r.testBit(n)?i.add(o):i.add(this):r.testBit(n)&&(i=i.add(t)),--n;return i},se.prototype.getQ=function(){return this.q},se.prototype.getA=function(){return this.a},se.prototype.getB=function(){return this.b},se.prototype.equals=function(e){return e==this||this.q.equals(e.q)&&this.a.equals(e.a)&&this.b.equals(e.b)},se.prototype.getInfinity=function(){return this.infinity},se.prototype.fromBigInteger=function(e){return new ie(this.q,e)},se.prototype.decodePointHex=function(e){switch(parseInt(e.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var t=(e.length-2)/2,r=e.substr(2,t),n=e.substr(t+2,t);return new oe(this,this.fromBigInteger(new _(r,16)),this.fromBigInteger(new _(n,16)));default:return null}},ie.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},oe.prototype.getEncoded=function(e){var t=function(e,t){var r=e.toByteArrayUnsigned();if(t<r.length)r=r.slice(r.length-t);else for(;t>r.length;)r.unshift(0);return r},r=this.getX().toBigInteger(),n=this.getY().toBigInteger(),i=t(r,32);return e?n.isEven()?i.unshift(2):i.unshift(3):(i.unshift(4),i=i.concat(t(n,32))),i},oe.decodeFrom=function(e,t){t[0];var r=t.length-1,n=t.slice(1,1+r/2),i=t.slice(1+r/2,1+r);n.unshift(0),i.unshift(0);var o=new _(n),s=new _(i);return new oe(e,e.fromBigInteger(o),e.fromBigInteger(s))},oe.decodeFromHex=function(e,t){t.substr(0,2);var r=t.length-2,n=t.substr(2,r/2),i=t.substr(2+r/2,r/2),o=new _(n,16),s=new _(i,16);return new oe(e,e.fromBigInteger(o),e.fromBigInteger(s))},oe.prototype.add2D=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;if(this.x.equals(e.x))return this.y.equals(e.y)?this.twice():this.curve.getInfinity();var t=e.x.subtract(this.x),r=e.y.subtract(this.y).divide(t),n=r.square().subtract(this.x).subtract(e.x),i=r.multiply(this.x.subtract(n)).subtract(this.y);return new oe(this.curve,n,i)},oe.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=this.curve.fromBigInteger(_.valueOf(2)),t=this.curve.fromBigInteger(_.valueOf(3)),r=this.x.square().multiply(t).add(this.curve.a).divide(this.y.multiply(e)),n=r.square().subtract(this.x.multiply(e)),i=r.multiply(this.x.subtract(n)).subtract(this.y);return new oe(this.curve,n,i)},oe.prototype.multiply2D=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,r=e,n=r.multiply(new _("3")),i=this.negate(),o=this;for(t=n.bitLength()-2;t>0;--t){o=o.twice();var s=n.testBit(t);s!=r.testBit(t)&&(o=o.add2D(s?this:i))}return o},oe.prototype.isOnCurve=function(){var e=this.getX().toBigInteger(),t=this.getY().toBigInteger(),r=this.curve.getA().toBigInteger(),n=this.curve.getB().toBigInteger(),i=this.curve.getQ(),o=t.multiply(t).mod(i),s=e.multiply(e).multiply(e).add(r.multiply(e)).add(n).mod(i);return o.equals(s)},oe.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},oe.prototype.validate=function(){var e=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var t=this.getX().toBigInteger(),r=this.getY().toBigInteger();if(t.compareTo(_.ONE)<0||t.compareTo(e.subtract(_.ONE))>0)throw new Error("x coordinate out of bounds");if(r.compareTo(_.ONE)<0||r.compareTo(e.subtract(_.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(e).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var ae=function(){var e=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),t=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),r={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function n(e,t,n){return t?r[t]:String.fromCharCode(parseInt(n,16))}var i=new String(""),o=Object.hasOwnProperty;return function(r,s){var a,u,c=r.match(e),l=c[0],d=!1;"{"===l?a={}:"["===l?a=[]:(a=[],d=!0);for(var h=[a],f=1-d,g=c.length;f<g;++f){var y;switch((l=c[f]).charCodeAt(0)){default:(y=h[0])[u||y.length]=+l,u=void 0;break;case 34:if(-1!==(l=l.substring(1,l.length-1)).indexOf("\\")&&(l=l.replace(t,n)),y=h[0],!u){if(!(y instanceof Array)){u=l||i;break}u=y.length}y[u]=l,u=void 0;break;case 91:y=h[0],h.unshift(y[u||y.length]=[]),u=void 0;break;case 93:h.shift();break;case 102:(y=h[0])[u||y.length]=!1,u=void 0;break;case 110:(y=h[0])[u||y.length]=null,u=void 0;break;case 116:(y=h[0])[u||y.length]=!0,u=void 0;break;case 123:y=h[0],h.unshift(y[u||y.length]={}),u=void 0;break;case 125:h.shift()}}if(d){if(1!==h.length)throw new Error;a=a[0]}else if(h.length)throw new Error;return s&&(a=function e(t,r){var n=t[r];if(n&&"object"===(void 0===n?"undefined":p(n))){var i=null;for(var a in n)if(o.call(n,a)&&n!==t){var u=e(n,a);void 0!==u?n[a]=u:(i||(i=[]),i.push(a))}if(i)for(var c=i.length;--c>=0;)delete n[i[c]]}return s.call(t,r,n)}({"":a},"")),a}}();void 0!==ue&&ue||(t.KJUR=ue={}),void 0!==ue.asn1&&ue.asn1||(ue.asn1={}),ue.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var t=e.toString(16);return t.length%2==1&&(t="0"+t),t},this.bigIntToMinTwosComplementsHex=function(e){var t=e.toString(16);if("-"!=t.substr(0,1))t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t);else{var r=t.substr(1).length;r%2==1?r+=1:t.match(/^[0-7]/)||(r+=2);for(var n="",i=0;i<r;i++)n+="f";t=new _(n,16).xor(e).add(_.ONE).toString(16).replace(/^-/,"")}return t},this.getPEMStringFromHex=function(e,t){return Ce(e,t)},this.newObject=function(e){var t=ue.asn1,r=t.ASN1Object,n=t.DERBoolean,i=t.DERInteger,o=t.DERBitString,s=t.DEROctetString,a=t.DERNull,u=t.DERObjectIdentifier,c=t.DEREnumerated,l=t.DERUTF8String,d=t.DERNumericString,h=t.DERPrintableString,p=t.DERTeletexString,f=t.DERIA5String,g=t.DERUTCTime,y=t.DERGeneralizedTime,v=t.DERVisibleString,m=t.DERBMPString,w=t.DERSequence,b=t.DERSet,S=t.DERTaggedObject,_=t.ASN1Util.newObject;if(e instanceof t.ASN1Object)return e;var E=Object.keys(e);if(1!=E.length)throw new Error("key of param shall be only one.");var A=E[0];if(-1==":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+A+":"))throw new Error("undefined key: "+A);if("bool"==A)return new n(e[A]);if("int"==A)return new i(e[A]);if("bitstr"==A)return new o(e[A]);if("octstr"==A)return new s(e[A]);if("null"==A)return new a(e[A]);if("oid"==A)return new u(e[A]);if("enum"==A)return new c(e[A]);if("utf8str"==A)return new l(e[A]);if("numstr"==A)return new d(e[A]);if("prnstr"==A)return new h(e[A]);if("telstr"==A)return new p(e[A]);if("ia5str"==A)return new f(e[A]);if("utctime"==A)return new g(e[A]);if("gentime"==A)return new y(e[A]);if("visstr"==A)return new v(e[A]);if("bmpstr"==A)return new m(e[A]);if("asn1"==A)return new r(e[A]);if("seq"==A){for(var k=e[A],F=[],C=0;C<k.length;C++){var P=_(k[C]);F.push(P)}return new w({array:F})}if("set"==A){for(k=e[A],F=[],C=0;C<k.length;C++)P=_(k[C]),F.push(P);return new b({array:F})}if("tag"==A){var x=e[A];if("[object Array]"===Object.prototype.toString.call(x)&&3==x.length){var R=_(x[2]);return new S({tag:x[0],explicit:x[1],obj:R})}return new S(x)}},this.jsonToASN1HEX=function(e){return this.newObject(e).getEncodedHex()}},ue.asn1.ASN1Util.oidHexToInt=function(e){for(var t="",r=parseInt(e.substr(0,2),16),n=(t=Math.floor(r/40)+"."+r%40,""),i=2;i<e.length;i+=2){var o=("00000000"+parseInt(e.substr(i,2),16).toString(2)).slice(-8);n+=o.substr(1,7),"0"==o.substr(0,1)&&(t=t+"."+new _(n,2).toString(10),n="")}return t},ue.asn1.ASN1Util.oidIntToHex=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},r=function(e){var r="",n=new _(e,10).toString(2),i=7-n.length%7;7==i&&(i=0);for(var o="",s=0;s<i;s++)o+="0";for(n=o+n,s=0;s<n.length-1;s+=7){var a=n.substr(s,7);s!=n.length-7&&(a="1"+a),r+=t(parseInt(a,2))}return r};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var n="",i=e.split("."),o=40*parseInt(i[0])+parseInt(i[1]);n+=t(o),i.splice(0,2);for(var s=0;s<i.length;s++)n+=r(i[s]);return n},ue.asn1.ASN1Object=function(e){this.params=null,this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+"".length+",v="+this.hV);var e=this.hV.length/2,t=e.toString(16);if(t.length%2==1&&(t="0"+t),e<128)return t;var r=t.length/2;if(r>15)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);return(128+r).toString(16)+t},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(e){this.params=e},null!=e&&null!=e.tlv&&(this.hTLV=e.tlv,this.isModified=!1)},ue.asn1.DERAbstractString=function(e){ue.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=be(this.s).toLowerCase()},this.setStringHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?this.setString(e):void 0!==e.str?this.setString(e.str):void 0!==e.hex&&this.setStringHex(e.hex))},Be(ue.asn1.DERAbstractString,ue.asn1.ASN1Object),ue.asn1.DERAbstractTime=function(e){ue.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(e){var t=e.getTime()+6e4*e.getTimezoneOffset();return new Date(t)},this.formatDate=function(e,t,r){var n=this.zeroPadding,i=this.localDateToUTC(e),o=String(i.getFullYear());"utc"==t&&(o=o.substr(2,2));var s=o+n(String(i.getMonth()+1),2)+n(String(i.getDate()),2)+n(String(i.getHours()),2)+n(String(i.getMinutes()),2)+n(String(i.getSeconds()),2);if(!0===r){var a=i.getMilliseconds();if(0!=a){var u=n(String(a),3);s=s+"."+(u=u.replace(/[0]+$/,""))}}return s+"Z"},this.zeroPadding=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=ge(e)},this.setByDateValue=function(e,t,r,n,i,o){var s=new Date(Date.UTC(e,t-1,r,n,i,o,0));this.setByDate(s)},this.getFreshValueHex=function(){return this.hV}},Be(ue.asn1.DERAbstractTime,ue.asn1.ASN1Object),ue.asn1.DERAbstractStructured=function(e){ue.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array=e},this.appendASN1Object=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array.push(e)},this.asn1Array=new Array,void 0!==e&&void 0!==e.array&&(this.asn1Array=e.array)},Be(ue.asn1.DERAbstractStructured,ue.asn1.ASN1Object),ue.asn1.DERBoolean=function(e){ue.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=0==e?"010100":"0101ff"},Be(ue.asn1.DERBoolean,ue.asn1.ASN1Object),ue.asn1.DERInteger=function(e){ue.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=ue.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new _(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.bigint?this.setByBigInteger(e.bigint):void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},Be(ue.asn1.DERInteger,ue.asn1.ASN1Object),ue.asn1.DERBitString=function(e){if(void 0!==e&&void 0!==e.obj){var t=ue.asn1.ASN1Util.newObject(e.obj);e.hex="00"+t.getEncodedHex()}ue.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(e){this.hTLV=null,this.isModified=!0,this.hV=e},this.setUnusedBitsAndHexValue=function(e,t){if(e<0||7<e)throw"unused bits shall be from 0 to 7: u = "+e;var r="0"+e;this.hTLV=null,this.isModified=!0,this.hV=r+t},this.setByBinaryString=function(e){var t=8-(e=e.replace(/0+$/,"")).length%8;8==t&&(t=0);for(var r=0;r<=t;r++)e+="0";var n="";for(r=0;r<e.length-1;r+=8){var i=e.substr(r,8),o=parseInt(i,2).toString(16);1==o.length&&(o="0"+o),n+=o}this.hTLV=null,this.isModified=!0,this.hV="0"+t+n},this.setByBooleanArray=function(e){for(var t="",r=0;r<e.length;r++)1==e[r]?t+="1":t+="0";this.setByBinaryString(t)},this.newFalseArray=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=!1;return t},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):void 0!==e.hex?this.setHexValueIncludingUnusedBits(e.hex):void 0!==e.bin?this.setByBinaryString(e.bin):void 0!==e.array&&this.setByBooleanArray(e.array))},Be(ue.asn1.DERBitString,ue.asn1.ASN1Object),ue.asn1.DEROctetString=function(e){if(void 0!==e&&void 0!==e.obj){var t=ue.asn1.ASN1Util.newObject(e.obj);e.hex=t.getEncodedHex()}ue.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"},Be(ue.asn1.DEROctetString,ue.asn1.DERAbstractString),ue.asn1.DERNull=function(){ue.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},Be(ue.asn1.DERNull,ue.asn1.ASN1Object),ue.asn1.DERObjectIdentifier=function(e){ue.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueOidString=function(e){var t=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},r=function(e){var r="",n=parseInt(e,10).toString(2),i=7-n.length%7;7==i&&(i=0);for(var o="",s=0;s<i;s++)o+="0";for(n=o+n,s=0;s<n.length-1;s+=7){var a=n.substr(s,7);s!=n.length-7&&(a="1"+a),r+=t(parseInt(a,2))}return r};try{if(!e.match(/^[0-9.]+$/))return null;var n="",i=e.split("."),o=40*parseInt(i[0],10)+parseInt(i[1],10);n+=t(o),i.splice(0,2);for(var s=0;s<i.length;s++)n+=r(i[s]);return n}catch(e){return null}}(e);if(null==t)throw new Error("malformed oid string: "+e);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueName=function(e){var t=ue.asn1.x509.OID.name2oid(e);if(""===t)throw new Error("DERObjectIdentifier oidName undefined: "+e);this.setValueOidString(t)},this.setValueNameOrOid=function(e){e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(e){"string"==typeof e?this.setValueNameOrOid(e):void 0!==e.oid?this.setValueNameOrOid(e.oid):void 0!==e.name?this.setValueNameOrOid(e.name):void 0!==e.hex&&this.setValueHex(e.hex)},void 0!==e&&this.setByParam(e)},Be(ue.asn1.DERObjectIdentifier,ue.asn1.ASN1Object),ue.asn1.DEREnumerated=function(e){ue.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=ue.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new _(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},Be(ue.asn1.DEREnumerated,ue.asn1.ASN1Object),ue.asn1.DERUTF8String=function(e){ue.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"},Be(ue.asn1.DERUTF8String,ue.asn1.DERAbstractString),ue.asn1.DERNumericString=function(e){ue.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"},Be(ue.asn1.DERNumericString,ue.asn1.DERAbstractString),ue.asn1.DERPrintableString=function(e){ue.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"},Be(ue.asn1.DERPrintableString,ue.asn1.DERAbstractString),ue.asn1.DERTeletexString=function(e){ue.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"},Be(ue.asn1.DERTeletexString,ue.asn1.DERAbstractString),ue.asn1.DERIA5String=function(e){ue.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"},Be(ue.asn1.DERIA5String,ue.asn1.DERAbstractString),ue.asn1.DERVisibleString=function(e){ue.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="1a"},Be(ue.asn1.DERVisibleString,ue.asn1.DERAbstractString),ue.asn1.DERBMPString=function(e){ue.asn1.DERBMPString.superclass.constructor.call(this,e),this.hT="1e"},Be(ue.asn1.DERBMPString,ue.asn1.DERAbstractString),ue.asn1.DERUTCTime=function(e){ue.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"utc"),this.hV=ge(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=ge(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{12}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date))},Be(ue.asn1.DERUTCTime,ue.asn1.DERAbstractTime),ue.asn1.DERGeneralizedTime=function(e){ue.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.withMillis=!1,this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=ge(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=ge(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{14}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date),!0===e.millis&&(this.withMillis=!0))},Be(ue.asn1.DERGeneralizedTime,ue.asn1.DERAbstractTime),ue.asn1.DERSequence=function(e){ue.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var e="",t=0;t<this.asn1Array.length;t++)e+=this.asn1Array[t].getEncodedHex();return this.hV=e,this.hV}},Be(ue.asn1.DERSequence,ue.asn1.DERAbstractStructured),ue.asn1.DERSet=function(e){ue.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var e=new Array,t=0;t<this.asn1Array.length;t++){var r=this.asn1Array[t];e.push(r.getEncodedHex())}return 1==this.sortFlag&&e.sort(),this.hV=e.join(""),this.hV},void 0!==e&&void 0!==e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},Be(ue.asn1.DERSet,ue.asn1.DERAbstractStructured),ue.asn1.DERTaggedObject=function(e){ue.asn1.DERTaggedObject.superclass.constructor.call(this);var t=ue.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(e,t,r){this.hT=t,this.isExplicit=e,this.asn1Object=r,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=r.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,t),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(e){null!=e.tag&&(this.hT=e.tag),null!=e.explicit&&(this.isExplicit=e.explicit),null!=e.tage&&(this.hT=e.tage,this.isExplicit=!0),null!=e.tagi&&(this.hT=e.tagi,this.isExplicit=!1),null!=e.obj&&(e.obj instanceof t.ASN1Object?(this.asn1Object=e.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):"object"==p(e.obj)&&(this.asn1Object=t.ASN1Util.newObject(e.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},null!=e&&this.setByParam(e)},Be(ue.asn1.DERTaggedObject,ue.asn1.ASN1Object);var ue,ce,le,de=new function(){};function he(e){for(var t=new Array,r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function pe(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}function fe(e){for(var t="",r=0;r<e.length;r++){var n=e[r].toString(16);1==n.length&&(n="0"+n),t+=n}return t}function ge(e){return fe(he(e))}function ye(e){return(e=(e=e.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function ve(e){return e.length%4==2?e+="==":e.length%4==3&&(e+="="),(e=e.replace(/-/g,"+")).replace(/_/g,"/")}function me(e){return e.length%2==1&&(e="0"+e),ye(w(e))}function we(e){return b(ve(e))}function be(e){return Te(Le(e))}function Se(e){return decodeURIComponent(Ie(e))}function _e(e){for(var t="",r=0;r<e.length-1;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t}function Ee(e){for(var t="",r=0;r<e.length;r++)t+=("0"+e.charCodeAt(r).toString(16)).slice(-2);return t}function Ae(e){return w(e)}function ke(e){var t=Ae(e).replace(/(.{64})/g,"$1\r\n");return t.replace(/\r\n$/,"")}function Fe(e){return b(e.replace(/[^0-9A-Za-z\/+=]*/g,""))}function Ce(e,t){return"-----BEGIN "+t+"-----\r\n"+ke(e)+"\r\n-----END "+t+"-----\r\n"}function Pe(e,t){if(-1==e.indexOf("-----BEGIN "))throw"can't find PEM header: "+t;return Fe(e=void 0!==t?(e=e.replace(new RegExp("^[^]*-----BEGIN "+t+"-----"),"")).replace(new RegExp("-----END "+t+"-----[^]*$"),""):(e=e.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function xe(e){var t,r,n,i,o,s,a,u,c,l,d;if(d=e.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return u=d[1],t=parseInt(u),2===u.length&&(50<=t&&t<100?t=1900+t:0<=t&&t<50&&(t=2e3+t)),r=parseInt(d[2])-1,n=parseInt(d[3]),i=parseInt(d[4]),o=parseInt(d[5]),s=parseInt(d[6]),a=0,""!==(c=d[7])&&(l=(c.substr(1)+"00").substr(0,3),a=parseInt(l)),Date.UTC(t,r,n,i,o,s,a);throw"unsupported zulu format: "+e}function Re(e){return~~(xe(e)/1e3)}function Te(e){return e.replace(/%/g,"")}function Ie(e){return e.replace(/(..)/g,"%$1")}function Oe(e){var t="malformed IPv6 address";if(!e.match(/^[0-9A-Fa-f:]+$/))throw t;var r=(e=e.toLowerCase()).split(":").length-1;if(r<2)throw t;var n=":".repeat(7-r+2),i=(e=e.replace("::",n)).split(":");if(8!=i.length)throw t;for(var o=0;o<8;o++)i[o]=("0000"+i[o]).slice(-4);return i.join("")}function Ue(e){if(!e.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var t=(e=e.toLowerCase()).match(/.{1,4}/g),r=0;r<8;r++)t[r]=t[r].replace(/^0+/,""),""==t[r]&&(t[r]="0");var n=(e=":"+t.join(":")+":").match(/:(0:){2,}/g);if(null===n)return e.slice(1,-1);var i="";for(r=0;r<n.length;r++)n[r].length>i.length&&(i=n[r]);return(e=e.replace(i,"::")).slice(1,-1)}function De(e){var t="malformed hex value";if(!e.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw t;if(8!=e.length)return 32==e.length?Ue(e):e;try{return parseInt(e.substr(0,2),16)+"."+parseInt(e.substr(2,2),16)+"."+parseInt(e.substr(4,2),16)+"."+parseInt(e.substr(6,2),16)}catch(e){throw t}}function je(e){return e.match(/.{4}/g).map((function(e){var t=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2),16);if(0==t&r<128)return String.fromCharCode(r);if(t<8){var n=128|63&r;return Se((192|(7&t)<<3|(192&r)>>6).toString(16)+n.toString(16))}n=128|(15&t)<<2|(192&r)>>6;var i=128|63&r;return Se((224|(240&t)>>4).toString(16)+n.toString(16)+i.toString(16))})).join("")}function Le(e){for(var t=encodeURIComponent(e),r="",n=0;n<t.length;n++)"%"==t[n]?(r+=t.substr(n,3),n+=2):r=r+"%"+ge(t[n]);return r}function Ne(e){return!(e.length%2!=0||!e.match(/^[0-9a-f]+$/)&&!e.match(/^[0-9A-F]+$/))}function He(e){return e.length%2==1?"0"+e:e.substr(0,1)>"7"?"00"+e:e}de.getLblen=function(e,t){if("8"!=e.substr(t+2,1))return 1;var r=parseInt(e.substr(t+3,1));return 0==r?-1:0<r&&r<10?r+1:-2},de.getL=function(e,t){var r=de.getLblen(e,t);return r<1?"":e.substr(t+2,2*r)},de.getVblen=function(e,t){var r;return""==(r=de.getL(e,t))?-1:("8"===r.substr(0,1)?new _(r.substr(2),16):new _(r,16)).intValue()},de.getVidx=function(e,t){var r=de.getLblen(e,t);return r<0?r:t+2*(r+1)},de.getV=function(e,t){var r=de.getVidx(e,t),n=de.getVblen(e,t);return e.substr(r,2*n)},de.getTLV=function(e,t){return e.substr(t,2)+de.getL(e,t)+de.getV(e,t)},de.getTLVblen=function(e,t){return 2+2*de.getLblen(e,t)+2*de.getVblen(e,t)},de.getNextSiblingIdx=function(e,t){return de.getVidx(e,t)+2*de.getVblen(e,t)},de.getChildIdx=function(e,t){var r,n,i,o=de,s=[];r=o.getVidx(e,t),n=2*o.getVblen(e,t),"03"==e.substr(t,2)&&(r+=2,n-=2),i=0;for(var a=r;i<=n;){var u=o.getTLVblen(e,a);if((i+=u)<=n&&s.push(a),a+=u,i>=n)break}return s},de.getNthChildIdx=function(e,t,r){return de.getChildIdx(e,t)[r]},de.getIdxbyList=function(e,t,r,n){var i,o,s=de;return 0==r.length?void 0!==n&&e.substr(t,2)!==n?-1:t:(i=r.shift())>=(o=s.getChildIdx(e,t)).length?-1:s.getIdxbyList(e,o[i],r,n)},de.getIdxbyListEx=function(e,t,r,n){var i,o,s=de;if(0==r.length)return void 0!==n&&e.substr(t,2)!==n?-1:t;i=r.shift(),o=s.getChildIdx(e,t);for(var a=0,u=0;u<o.length;u++){var c=e.substr(o[u],2);if("number"==typeof i&&!s.isContextTag(c)&&a==i||"string"==typeof i&&s.isContextTag(c,i))return s.getIdxbyListEx(e,o[u],r,n);s.isContextTag(c)||a++}return-1},de.getTLVbyList=function(e,t,r,n){var i=de,o=i.getIdxbyList(e,t,r,n);return-1==o||o>=e.length?null:i.getTLV(e,o)},de.getTLVbyListEx=function(e,t,r,n){var i=de,o=i.getIdxbyListEx(e,t,r,n);return-1==o?null:i.getTLV(e,o)},de.getVbyList=function(e,t,r,n,i){var o,s,a=de;return-1==(o=a.getIdxbyList(e,t,r,n))||o>=e.length?null:(s=a.getV(e,o),!0===i&&(s=s.substr(2)),s)},de.getVbyListEx=function(e,t,r,n,i){var o,s,a=de;return-1==(o=a.getIdxbyListEx(e,t,r,n))?null:(s=a.getV(e,o),"03"==e.substr(o,2)&&!1!==i&&(s=s.substr(2)),s)},de.getInt=function(e,t,r){null==r&&(r=-1);try{var n=e.substr(t,2);if("02"!=n&&"03"!=n)return r;var i=de.getV(e,t);return"02"==n?parseInt(i,16):function(e){try{var t=e.substr(0,2);if("00"==t)return parseInt(e.substr(2),16);var r=parseInt(t,16),n=e.substr(2),i=parseInt(n,16).toString(2);return"0"==i&&(i="00000000"),i=i.slice(0,0-r),parseInt(i,2)}catch(e){return-1}}(i)}catch(e){return r}},de.getOID=function(e,t,r){null==r&&(r=null);try{return"06"!=e.substr(t,2)?r:function(e){if(!Ne(e))return null;try{var t=[],r=e.substr(0,2),n=parseInt(r,16);t[0]=new String(Math.floor(n/40)),t[1]=new String(n%40);for(var i=e.substr(2),o=[],s=0;s<i.length/2;s++)o.push(parseInt(i.substr(2*s,2),16));var a=[],u="";for(s=0;s<o.length;s++)128&o[s]?u+=Me((127&o[s]).toString(2),7):(u+=Me((127&o[s]).toString(2),7),a.push(new String(parseInt(u,2))),u="");var c=t.join(".");return a.length>0&&(c=c+"."+a.join(".")),c}catch(e){return null}}(de.getV(e,t))}catch(e){return r}},de.getOIDName=function(e,t,r){null==r&&(r=null);try{var n=de.getOID(e,t,r);if(n==r)return r;var i=ue.asn1.x509.OID.oid2name(n);return""==i?n:i}catch(e){return r}},de.getString=function(e,t,r){null==r&&(r=null);try{return _e(de.getV(e,t))}catch(e){return r}},de.hextooidstr=function(e){var t=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},r=[],n=e.substr(0,2),i=parseInt(n,16);r[0]=new String(Math.floor(i/40)),r[1]=new String(i%40);for(var o=e.substr(2),s=[],a=0;a<o.length/2;a++)s.push(parseInt(o.substr(2*a,2),16));var u=[],c="";for(a=0;a<s.length;a++)128&s[a]?c+=t((127&s[a]).toString(2),7):(c+=t((127&s[a]).toString(2),7),u.push(new String(parseInt(c,2))),c="");var l=r.join(".");return u.length>0&&(l=l+"."+u.join(".")),l},de.dump=function(e,t,r,n){var i=de,o=i.getV,s=i.dump,a=i.getChildIdx,u=e;e instanceof ue.asn1.ASN1Object&&(u=e.getEncodedHex());var c=function(e,t){return e.length<=2*t?e:e.substr(0,t)+"..(total "+e.length/2+"bytes).."+e.substr(e.length-t,t)};void 0===t&&(t={ommit_long_octet:32}),void 0===r&&(r=0),void 0===n&&(n="");var l,d=t.ommit_long_octet;if("01"==(l=u.substr(r,2)))return"00"==(h=o(u,r))?n+"BOOLEAN FALSE\n":n+"BOOLEAN TRUE\n";if("02"==l)return n+"INTEGER "+c(h=o(u,r),d)+"\n";if("03"==l){var h=o(u,r);return i.isASN1HEX(h.substr(2))?(S=n+"BITSTRING, encapsulates\n")+s(h.substr(2),t,0,n+"  "):n+"BITSTRING "+c(h,d)+"\n"}if("04"==l)return h=o(u,r),i.isASN1HEX(h)?(S=n+"OCTETSTRING, encapsulates\n")+s(h,t,0,n+"  "):n+"OCTETSTRING "+c(h,d)+"\n";if("05"==l)return n+"NULL\n";if("06"==l){var p=o(u,r),f=ue.asn1.ASN1Util.oidHexToInt(p),g=ue.asn1.x509.OID.oid2name(f),y=f.replace(/\./g," ");return""!=g?n+"ObjectIdentifier "+g+" ("+y+")\n":n+"ObjectIdentifier ("+y+")\n"}if("0a"==l)return n+"ENUMERATED "+parseInt(o(u,r))+"\n";if("0c"==l)return n+"UTF8String '"+Se(o(u,r))+"'\n";if("13"==l)return n+"PrintableString '"+Se(o(u,r))+"'\n";if("14"==l)return n+"TeletexString '"+Se(o(u,r))+"'\n";if("16"==l)return n+"IA5String '"+Se(o(u,r))+"'\n";if("17"==l)return n+"UTCTime "+Se(o(u,r))+"\n";if("18"==l)return n+"GeneralizedTime "+Se(o(u,r))+"\n";if("1a"==l)return n+"VisualString '"+Se(o(u,r))+"'\n";if("1e"==l)return n+"BMPString '"+je(o(u,r))+"'\n";if("30"==l){if("3000"==u.substr(r,4))return n+"SEQUENCE {}\n";S=n+"SEQUENCE\n";var v=t;if((2==(b=a(u,r)).length||3==b.length)&&"06"==u.substr(b[0],2)&&"04"==u.substr(b[b.length-1],2)){g=i.oidname(o(u,b[0]));var m=JSON.parse(JSON.stringify(t));m.x509ExtName=g,v=m}for(var w=0;w<b.length;w++)S+=s(u,v,b[w],n+"  ");return S}if("31"==l){S=n+"SET\n";var b=a(u,r);for(w=0;w<b.length;w++)S+=s(u,t,b[w],n+"  ");return S}if(0!=(128&(l=parseInt(l,16)))){var S,_=31&l;if(0!=(32&l)){for(S=n+"["+_+"]\n",b=a(u,r),w=0;w<b.length;w++)S+=s(u,t,b[w],n+"  ");return S}return h=o(u,r),de.isASN1HEX(h)?(S=n+"["+_+"]\n")+s(h,t,0,n+"  "):(("68747470"==h.substr(0,8)||"subjectAltName"===t.x509ExtName&&2==_)&&(h=Se(h)),n+"["+_+"] "+h+"\n")}return n+"UNKNOWN("+l+") "+o(u,r)+"\n"},de.isContextTag=function(e,t){var r,n;e=e.toLowerCase();try{r=parseInt(e,16)}catch(e){return-1}if(void 0===t)return 128==(192&r);try{return null!=t.match(/^\[[0-9]+\]$/)&&!((n=parseInt(t.substr(1,t.length-1),10))>31)&&128==(192&r)&&(31&r)==n}catch(e){return!1}},de.isASN1HEX=function(e){var t=de;if(e.length%2==1)return!1;var r=t.getVblen(e,0),n=e.substr(0,2),i=t.getL(e,0);return e.length-n.length-i.length==2*r},de.checkStrictDER=function(e,t,r,n,i){var o=de;if(void 0===r){if("string"!=typeof e)throw new Error("not hex string");if(e=e.toLowerCase(),!ue.lang.String.isHex(e))throw new Error("not hex string");r=e.length,i=(n=e.length/2)<128?1:Math.ceil(n.toString(16))+1}if(o.getL(e,t).length>2*i)throw new Error("L of TLV too long: idx="+t);var s=o.getVblen(e,t);if(s>n)throw new Error("value of L too long than hex: idx="+t);var a=o.getTLV(e,t),u=a.length-2-o.getL(e,t).length;if(u!==2*s)throw new Error("V string length and L's value not the same:"+u+"/"+2*s);if(0===t&&e.length!=a.length)throw new Error("total length and TLV length unmatch:"+e.length+"!="+a.length);var c=e.substr(t,2);if("02"===c){var l=o.getVidx(e,t);if("00"==e.substr(l,2)&&e.charCodeAt(l+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(c,16)){for(var d=o.getVblen(e,t),h=0,p=o.getChildIdx(e,t),f=0;f<p.length;f++)h+=o.getTLV(e,p[f]).length,o.checkStrictDER(e,p[f],r,n,i);if(2*d!=h)throw new Error("sum of children's TLV length and L unmatch: "+2*d+"!="+h)}},de.oidname=function(e){var t=ue.asn1;ue.lang.String.isHex(e)&&(e=t.ASN1Util.oidHexToInt(e));var r=t.x509.OID.oid2name(e);return""===r&&(r=e),r},void 0!==ue&&ue||(t.KJUR=ue={}),void 0!==ue.lang&&ue.lang||(ue.lang={}),ue.lang.String=function(){},"function"==typeof e?(t.utf8tob64u=ce=function(t){return ye(e.from(t,"utf8").toString("base64"))},t.b64utoutf8=le=function(t){return e.from(ve(t),"base64").toString("utf8")}):(t.utf8tob64u=ce=function(e){return me(Te(Le(e)))},t.b64utoutf8=le=function(e){return decodeURIComponent(Ie(we(e)))}),ue.lang.String.isInteger=function(e){return!!e.match(/^[0-9]+$/)||!!e.match(/^-[0-9]+$/)},ue.lang.String.isHex=function(e){return Ne(e)},ue.lang.String.isBase64=function(e){return!(!(e=e.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||e.length%4!=0)},ue.lang.String.isBase64URL=function(e){return!e.match(/[+/=]/)&&(e=ve(e),ue.lang.String.isBase64(e))},ue.lang.String.isIntegerArray=function(e){return!!(e=e.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},ue.lang.String.isPrintable=function(e){return null!==e.match(/^[0-9A-Za-z '()+,-./:=?]*$/)},ue.lang.String.isIA5=function(e){return null!==e.match(/^[\x20-\x21\x23-\x7f]*$/)},ue.lang.String.isMail=function(e){return null!==e.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)};var Me=function(e,t,r){return null==r&&(r="0"),e.length>=t?e:new Array(t-e.length+1).join(r)+e};function Be(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t)}void 0!==ue&&ue||(t.KJUR=ue={}),void 0!==ue.crypto&&ue.crypto||(ue.crypto={}),ue.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:y.algo.MD5,sha1:y.algo.SHA1,sha224:y.algo.SHA224,sha256:y.algo.SHA256,sha384:y.algo.SHA384,sha512:y.algo.SHA512,ripemd160:y.algo.RIPEMD160},this.getDigestInfoHex=function(e,t){if(void 0===this.DIGESTINFOHEAD[t])throw"alg not supported in Util.DIGESTINFOHEAD: "+t;return this.DIGESTINFOHEAD[t]+e},this.getPaddedDigestInfoHex=function(e,t,r){var n=this.getDigestInfoHex(e,t),i=r/4;if(n.length+22>i)throw"key is too short for SigAlg: keylen="+r+","+t;for(var o="0001",s="00"+n,a="",u=i-o.length-s.length,c=0;c<u;c+=2)a+="ff";return o+a+s},this.hashString=function(e,t){return new ue.crypto.MessageDigest({alg:t}).digestString(e)},this.hashHex=function(e,t){return new ue.crypto.MessageDigest({alg:t}).digestHex(e)},this.sha1=function(e){return this.hashString(e,"sha1")},this.sha256=function(e){return this.hashString(e,"sha256")},this.sha256Hex=function(e){return this.hashHex(e,"sha256")},this.sha512=function(e){return this.hashString(e,"sha512")},this.sha512Hex=function(e){return this.hashHex(e,"sha512")},this.isKey=function(e){return e instanceof ne||e instanceof ue.crypto.DSA||e instanceof ue.crypto.ECDSA}},ue.crypto.Util.md5=function(e){return new ue.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(e)},ue.crypto.Util.ripemd160=function(e){return new ue.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(e)},ue.crypto.Util.SECURERANDOMGEN=new ee,ue.crypto.Util.getRandomHexOfNbytes=function(e){var t=new Array(e);return ue.crypto.Util.SECURERANDOMGEN.nextBytes(t),fe(t)},ue.crypto.Util.getRandomBigIntegerOfNbytes=function(e){return new _(ue.crypto.Util.getRandomHexOfNbytes(e),16)},ue.crypto.Util.getRandomHexOfNbits=function(e){var t=e%8,r=new Array((e-t)/8+1);return ue.crypto.Util.SECURERANDOMGEN.nextBytes(r),r[0]=(255<<t&255^255)&r[0],fe(r)},ue.crypto.Util.getRandomBigIntegerOfNbits=function(e){return new _(ue.crypto.Util.getRandomHexOfNbits(e),16)},ue.crypto.Util.getRandomBigIntegerZeroToMax=function(e){for(var t=e.bitLength();;){var r=ue.crypto.Util.getRandomBigIntegerOfNbits(t);if(-1!=e.compareTo(r))return r}},ue.crypto.Util.getRandomBigIntegerMinToMax=function(e,t){var r=e.compareTo(t);if(1==r)throw"biMin is greater than biMax";if(0==r)return e;var n=t.subtract(e);return ue.crypto.Util.getRandomBigIntegerZeroToMax(n).add(e)},ue.crypto.MessageDigest=function(e){this.setAlgAndProvider=function(e,t){if(null!==(e=ue.crypto.MessageDigest.getCanonicalAlgName(e))&&void 0===t&&(t=ue.crypto.Util.DEFAULTPROVIDER[e]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(e)&&"cryptojs"==t){try{this.md=ue.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[e].create()}catch(t){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+t}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=y.enc.Hex.parse(e);this.md.update(t)},this.digest=function(){return this.md.finalize().toString(y.enc.Hex)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}if(-1!=":sha256:".indexOf(e)&&"sjcl"==t){try{this.md=new sjcl.hash.sha256}catch(t){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+t}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=sjcl.codec.hex.toBits(e);this.md.update(t)},this.digest=function(){var e=this.md.finalize();return sjcl.codec.hex.fromBits(e)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==e&&void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=ue.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},ue.crypto.MessageDigest.getCanonicalAlgName=function(e){return"string"==typeof e&&(e=(e=e.toLowerCase()).replace(/-/,"")),e},ue.crypto.MessageDigest.getHashLength=function(e){var t=ue.crypto.MessageDigest,r=t.getCanonicalAlgName(e);if(void 0===t.HASHLENGTH[r])throw"not supported algorithm: "+e;return t.HASHLENGTH[r]},ue.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},ue.crypto.Mac=function(e){this.setAlgAndProvider=function(e,t){if(null==(e=e.toLowerCase())&&(e="hmacsha1"),"hmac"!=(e=e.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+e;void 0===t&&(t=ue.crypto.Util.DEFAULTPROVIDER[e]),this.algProv=e+"/"+t;var r=e.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(r)&&"cryptojs"==t){try{var n=ue.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[r];this.mac=y.algo.HMAC.create(n,this.pass)}catch(e){throw"setAlgAndProvider hash alg set fail hashAlg="+r+"/"+e}this.updateString=function(e){this.mac.update(e)},this.updateHex=function(e){var t=y.enc.Hex.parse(e);this.mac.update(t)},this.doFinal=function(){return this.mac.finalize().toString(y.enc.Hex)},this.doFinalString=function(e){return this.updateString(e),this.doFinal()},this.doFinalHex=function(e){return this.updateHex(e),this.doFinal()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(e){if("string"==typeof e){var t=e;return e.length%2!=1&&e.match(/^[0-9A-Fa-f]+$/)||(t=Ee(e)),void(this.pass=y.enc.Hex.parse(t))}if("object"!=(void 0===e?"undefined":p(e)))throw"KJUR.crypto.Mac unsupported password type: "+e;if(t=null,void 0!==e.hex){if(e.hex.length%2!=0||!e.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+e.hex;t=e.hex}if(void 0!==e.utf8&&(t=be(e.utf8)),void 0!==e.rstr&&(t=Ee(e.rstr)),void 0!==e.b64&&(t=b(e.b64)),void 0!==e.b64u&&(t=we(e.b64u)),null==t)throw"KJUR.crypto.Mac unsupported password type: "+e;this.pass=y.enc.Hex.parse(t)},void 0!==e&&(void 0!==e.pass&&this.setPassword(e.pass),void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=ue.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},ue.crypto.Signature=function(e){var t=null;if(this._setAlgNames=function(){var e=this.algName.match(/^(.+)with(.+)$/);e&&(this.mdAlgName=e[1].toLowerCase(),this.pubkeyAlgName=e[2].toLowerCase(),"rsaandmgf1"==this.pubkeyAlgName&&"sha"==this.mdAlgName&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(e,t){for(var r="",n=t/4-e.length,i=0;i<n;i++)r+="0";return r+e},this.setAlgAndProvider=function(e,t){if(this._setAlgNames(),"cryptojs/jsrsa"!=t)throw new Error("provider not supported: "+t);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new ue.crypto.MessageDigest({alg:this.mdAlgName})}catch(e){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+e)}this.init=function(e,t){var r=null;try{r=void 0===t?Ke.getKey(e):Ke.getKey(e,t)}catch(e){throw"init failed:"+e}if(!0===r.isPrivate)this.prvKey=r,this.state="SIGN";else{if(!0!==r.isPublic)throw"init failed.:"+r;this.pubKey=r,this.state="VERIFY"}},this.updateString=function(e){this.md.updateString(e)},this.updateHex=function(e){this.md.updateHex(e)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0===this.prvKey&&void 0!==this.ecprvhex&&void 0!==this.eccurvename&&void 0!==ue.crypto.ECDSA&&(this.prvKey=new ue.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof ne&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof ne&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof ue.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof ue.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(e){return this.updateString(e),this.sign()},this.signHex=function(e){return this.updateHex(e),this.sign()},this.verify=function(e){if(this.sHashHex=this.md.digest(),void 0===this.pubKey&&void 0!==this.ecpubhex&&void 0!==this.eccurvename&&void 0!==ue.crypto.ECDSA&&(this.pubKey=new ue.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof ne&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,e,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof ne&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(void 0!==ue.crypto.ECDSA&&this.pubKey instanceof ue.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(void 0!==ue.crypto.DSA&&this.pubKey instanceof ue.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(e,t){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(e){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(e){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(e){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(e){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=e,void 0!==e&&(void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov?this.provName=ue.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=e.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==e.psssaltlen&&(this.pssSaltLen=e.psssaltlen),void 0!==e.prvkeypem)){if(void 0!==e.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{t=Ke.getKey(e.prvkeypem),this.init(t)}catch(e){throw"fatal error to load pem private key: "+e}}},ue.crypto.Cipher=function(e){},ue.crypto.Cipher.encrypt=function(e,t,r){if(t instanceof ne&&t.isPublic){var n=ue.crypto.Cipher.getAlgByKeyAndName(t,r);if("RSA"===n)return t.encrypt(e);if("RSAOAEP"===n)return t.encryptOAEP(e,"sha1");var i=n.match(/^RSAOAEP(\d+)$/);if(null!==i)return t.encryptOAEP(e,"sha"+i[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+r}throw"Cipher.encrypt: unsupported key or algorithm"},ue.crypto.Cipher.decrypt=function(e,t,r){if(t instanceof ne&&t.isPrivate){var n=ue.crypto.Cipher.getAlgByKeyAndName(t,r);if("RSA"===n)return t.decrypt(e);if("RSAOAEP"===n)return t.decryptOAEP(e,"sha1");var i=n.match(/^RSAOAEP(\d+)$/);if(null!==i)return t.decryptOAEP(e,"sha"+i[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+r}throw"Cipher.decrypt: unsupported key or algorithm"},ue.crypto.Cipher.getAlgByKeyAndName=function(e,t){if(e instanceof ne){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(t))return t;if(null==t)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+t}throw"getAlgByKeyAndName: not supported algorithm name: "+t},ue.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==ue&&ue||(t.KJUR=ue={}),void 0!==ue.crypto&&ue.crypto||(ue.crypto={}),ue.crypto.ECDSA=function(e){var t=Error,r=_,n=oe,i=ue.crypto.ECDSA,o=ue.crypto.ECParameterDB,s=i.getName,a=de,u=a.getVbyListEx,c=a.isASN1HEX,l=new ee;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(e){return new r(e.bitLength(),l).mod(e.subtract(r.ONE)).add(r.ONE)},this.setNamedCurve=function(e){this.ecparams=o.getByName(e),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=e},this.setPrivateKeyHex=function(e){this.isPrivate=!0,this.prvKeyHex=e},this.setPublicKeyHex=function(e){this.isPublic=!0,this.pubKeyHex=e},this.getPublicKeyXYHex=function(){var e=this.pubKeyHex;if("04"!==e.substr(0,2))throw"this method supports uncompressed format(04) only";var t=this.ecparams.keylen/4;if(e.length!==2+2*t)throw"malformed public key hex length";var r={};return r.x=e.substr(2,t),r.y=e.substr(2+t),r},this.getShortNISTPCurveName=function(){var e=this.curveName;return"secp256r1"===e||"NIST P-256"===e||"P-256"===e||"prime256v1"===e?"P-256":"secp384r1"===e||"NIST P-384"===e||"P-384"===e?"P-384":null},this.generateKeyPairHex=function(){var e=this.ecparams.n,t=this.getBigRandom(e),r=this.ecparams.G.multiply(t),n=r.getX().toBigInteger(),i=r.getY().toBigInteger(),o=this.ecparams.keylen/4,s=("0000000000"+t.toString(16)).slice(-o),a="04"+("0000000000"+n.toString(16)).slice(-o)+("0000000000"+i.toString(16)).slice(-o);return this.setPrivateKeyHex(s),this.setPublicKeyHex(a),{ecprvhex:s,ecpubhex:a}},this.signWithMessageHash=function(e){return this.signHex(e,this.prvKeyHex)},this.signHex=function(e,t){var n=new r(t,16),o=this.ecparams.n,s=new r(e.substring(0,this.ecparams.keylen/4),16);do{var a=this.getBigRandom(o),u=this.ecparams.G.multiply(a).getX().toBigInteger().mod(o)}while(u.compareTo(r.ZERO)<=0);var c=a.modInverse(o).multiply(s.add(n.multiply(u))).mod(o);return i.biRSSigToASN1Sig(u,c)},this.sign=function(e,t){var n=t,i=this.ecparams.n,o=r.fromByteArrayUnsigned(e);do{var s=this.getBigRandom(i),a=this.ecparams.G.multiply(s).getX().toBigInteger().mod(i)}while(a.compareTo(_.ZERO)<=0);var u=s.modInverse(i).multiply(o.add(n.multiply(a))).mod(i);return this.serializeSig(a,u)},this.verifyWithMessageHash=function(e,t){return this.verifyHex(e,t,this.pubKeyHex)},this.verifyHex=function(e,t,o){try{var s,a,u=i.parseSigHex(t);s=u.r,a=u.s;var c=n.decodeFromHex(this.ecparams.curve,o),l=new r(e.substring(0,this.ecparams.keylen/4),16);return this.verifyRaw(l,s,a,c)}catch(e){return!1}},this.verify=function(e,t,i){var o,s,a;if(Bitcoin.Util.isArray(t)){var u=this.parseSig(t);o=u.r,s=u.s}else{if("object"!==(void 0===t?"undefined":p(t))||!t.r||!t.s)throw"Invalid value for signature";o=t.r,s=t.s}if(i instanceof oe)a=i;else{if(!Bitcoin.Util.isArray(i))throw"Invalid format for pubkey value, must be byte array or ECPointFp";a=n.decodeFrom(this.ecparams.curve,i)}var c=r.fromByteArrayUnsigned(e);return this.verifyRaw(c,o,s,a)},this.verifyRaw=function(e,t,n,i){var o=this.ecparams.n,s=this.ecparams.G;if(t.compareTo(r.ONE)<0||t.compareTo(o)>=0)return!1;if(n.compareTo(r.ONE)<0||n.compareTo(o)>=0)return!1;var a=n.modInverse(o),u=e.multiply(a).mod(o),c=t.multiply(a).mod(o);return s.multiply(u).add(i.multiply(c)).getX().toBigInteger().mod(o).equals(t)},this.serializeSig=function(e,t){var r=e.toByteArraySigned(),n=t.toByteArraySigned(),i=[];return i.push(2),i.push(r.length),(i=i.concat(r)).push(2),i.push(n.length),(i=i.concat(n)).unshift(i.length),i.unshift(48),i},this.parseSig=function(e){var t;if(48!=e[0])throw new Error("Signature not a valid DERSequence");if(2!=e[t=2])throw new Error("First element in signature must be a DERInteger");var n=e.slice(t+2,t+2+e[t+1]);if(2!=e[t+=2+e[t+1]])throw new Error("Second element in signature must be a DERInteger");var i=e.slice(t+2,t+2+e[t+1]);return t+=2+e[t+1],{r:r.fromByteArrayUnsigned(n),s:r.fromByteArrayUnsigned(i)}},this.parseSigCompact=function(e){if(65!==e.length)throw"Signature has the wrong length";var t=e[0]-27;if(t<0||t>7)throw"Invalid signature type";var n=this.ecparams.n;return{r:r.fromByteArrayUnsigned(e.slice(1,33)).mod(n),s:r.fromByteArrayUnsigned(e.slice(33,65)).mod(n),i:t}},this.readPKCS5PrvKeyHex=function(e){if(!1===c(e))throw new Error("not ASN.1 hex string");var t,r,n;try{t=u(e,0,["[0]",0],"06"),r=u(e,0,[1],"04");try{n=u(e,0,["[1]",0],"03")}catch(e){}}catch(e){throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=s(t),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(n),this.setPrivateKeyHex(r),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(e){if(!1===c(e))throw new t("not ASN.1 hex string");var r,n,i;try{u(e,0,[1,0],"06"),r=u(e,0,[1,1],"06"),n=u(e,0,[2,0,1],"04");try{i=u(e,0,[2,0,"[1]",0],"03")}catch(e){}}catch(e){throw new t("malformed PKCS#8 plain ECC private key")}if(this.curveName=s(r),void 0===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(i),this.setPrivateKeyHex(n),this.isPublic=!1},this.readPKCS8PubKeyHex=function(e){if(!1===c(e))throw new t("not ASN.1 hex string");var r,n;try{u(e,0,[0,0],"06"),r=u(e,0,[0,1],"06"),n=u(e,0,[1],"03")}catch(e){throw new t("malformed PKCS#8 ECC public key")}if(this.curveName=s(r),null===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(n)},this.readCertPubKeyHex=function(e,r){if(!1===c(e))throw new t("not ASN.1 hex string");var n,i;try{n=u(e,0,[0,5,0,1],"06"),i=u(e,0,[0,5,1],"03")}catch(e){throw new t("malformed X.509 certificate ECC public key")}if(this.curveName=s(n),null===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(i)},void 0!==e&&void 0!==e.curve&&(this.curveName=e.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==e&&(void 0!==e.prv&&this.setPrivateKeyHex(e.prv),void 0!==e.pub&&this.setPublicKeyHex(e.pub))},ue.crypto.ECDSA.parseSigHex=function(e){var t=ue.crypto.ECDSA.parseSigHexInHexRS(e);return{r:new _(t.r,16),s:new _(t.s,16)}},ue.crypto.ECDSA.parseSigHexInHexRS=function(e){var t=de,r=t.getChildIdx,n=t.getV;if(t.checkStrictDER(e,0),"30"!=e.substr(0,2))throw new Error("signature is not a ASN.1 sequence");var i=r(e,0);if(2!=i.length)throw new Error("signature shall have two elements");var o=i[0],s=i[1];if("02"!=e.substr(o,2))throw new Error("1st item not ASN.1 integer");if("02"!=e.substr(s,2))throw new Error("2nd item not ASN.1 integer");return{r:n(e,o),s:n(e,s)}},ue.crypto.ECDSA.asn1SigToConcatSig=function(e){var t=ue.crypto.ECDSA.parseSigHexInHexRS(e),r=t.r,n=t.s;if("00"==r.substr(0,2)&&r.length%32==2&&(r=r.substr(2)),"00"==n.substr(0,2)&&n.length%32==2&&(n=n.substr(2)),r.length%32==30&&(r="00"+r),n.length%32==30&&(n="00"+n),r.length%32!=0)throw"unknown ECDSA sig r length error";if(n.length%32!=0)throw"unknown ECDSA sig s length error";return r+n},ue.crypto.ECDSA.concatSigToASN1Sig=function(e){if(e.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var t=e.substr(0,e.length/2),r=e.substr(e.length/2);return ue.crypto.ECDSA.hexRSSigToASN1Sig(t,r)},ue.crypto.ECDSA.hexRSSigToASN1Sig=function(e,t){var r=new _(e,16),n=new _(t,16);return ue.crypto.ECDSA.biRSSigToASN1Sig(r,n)},ue.crypto.ECDSA.biRSSigToASN1Sig=function(e,t){var r=ue.asn1,n=new r.DERInteger({bigint:e}),i=new r.DERInteger({bigint:t});return new r.DERSequence({array:[n,i]}).getEncodedHex()},ue.crypto.ECDSA.getName=function(e){return"2b8104001f"===e?"secp192k1":"2a8648ce3d030107"===e?"secp256r1":"2b8104000a"===e?"secp256k1":"2b81040021"===e?"secp224r1":"2b81040022"===e?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(e)?"secp256r1":-1!=="|secp256k1|".indexOf(e)?"secp256k1":-1!=="|secp224r1|NIST P-224|P-224|".indexOf(e)?"secp224r1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(e)?"secp384r1":null},void 0!==ue&&ue||(t.KJUR=ue={}),void 0!==ue.crypto&&ue.crypto||(ue.crypto={}),ue.crypto.ECParameterDB=new function(){var e={},t={};function r(e){return new _(e,16)}this.getByName=function(r){var n=r;if(void 0!==t[n]&&(n=t[r]),void 0!==e[n])return e[n];throw"unregistered EC curve name: "+n},this.regist=function(n,i,o,s,a,u,c,l,d,h,p,f){e[n]={};var g=r(o),y=r(s),v=r(a),m=r(u),w=r(c),b=new se(g,y,v),S=b.decodePointHex("04"+l+d);e[n].name=n,e[n].keylen=i,e[n].curve=b,e[n].G=S,e[n].n=m,e[n].h=w,e[n].oid=p,e[n].info=f;for(var _=0;_<h.length;_++)t[h[_]]=n}},ue.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),ue.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),ue.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),ue.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),ue.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),ue.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),ue.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),ue.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),ue.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),ue.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);var Ke=function(){var e=function(e,r,n){return t(y.AES,e,r,n)},t=function(e,t,r,n){var i=y.enc.Hex.parse(t),o=y.enc.Hex.parse(r),s=y.enc.Hex.parse(n),a={};a.key=o,a.iv=s,a.ciphertext=i;var u=e.decrypt(a,o,{iv:s});return y.enc.Hex.stringify(u)},r=function(e,t,r){return n(y.AES,e,t,r)},n=function(e,t,r,n){var i=y.enc.Hex.parse(t),o=y.enc.Hex.parse(r),s=y.enc.Hex.parse(n),a=e.encrypt(i,o,{iv:s}),u=y.enc.Hex.parse(a.toString());return y.enc.Base64.stringify(u)},i={"AES-256-CBC":{proc:e,eproc:r,keylen:32,ivlen:16},"AES-192-CBC":{proc:e,eproc:r,keylen:24,ivlen:16},"AES-128-CBC":{proc:e,eproc:r,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(e,r,n){return t(y.TripleDES,e,r,n)},eproc:function(e,t,r){return n(y.TripleDES,e,t,r)},keylen:24,ivlen:8},"DES-CBC":{proc:function(e,r,n){return t(y.DES,e,r,n)},eproc:function(e,t,r){return n(y.DES,e,t,r)},keylen:8,ivlen:8}},o=function(e){var t={},r=e.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));r&&(t.cipher=r[1],t.ivsalt=r[2]);var n=e.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));n&&(t.type=n[1]);var i=-1,o=0;-1!=e.indexOf("\r\n\r\n")&&(i=e.indexOf("\r\n\r\n"),o=2),-1!=e.indexOf("\n\n")&&(i=e.indexOf("\n\n"),o=1);var s=e.indexOf("-----END");if(-1!=i&&-1!=s){var a=e.substring(i+2*o,s-o);a=a.replace(/\s+/g,""),t.data=a}return t},s=function(e,t,r){for(var n=r.substring(0,16),o=y.enc.Hex.parse(n),s=y.enc.Utf8.parse(t),a=i[e].keylen+i[e].ivlen,u="",c=null;;){var l=y.algo.MD5.create();if(null!=c&&l.update(c),l.update(s),l.update(o),c=l.finalize(),(u+=y.enc.Hex.stringify(c)).length>=2*a)break}var d={};return d.keyhex=u.substr(0,2*i[e].keylen),d.ivhex=u.substr(2*i[e].keylen,2*i[e].ivlen),d},a=function(e,t,r,n){var o=y.enc.Base64.parse(e),s=y.enc.Hex.stringify(o);return(0,i[t].proc)(s,r,n)};return{version:"1.0.0",parsePKCS5PEM:function(e){return o(e)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(e,t,r){return s(e,t,r)},decryptKeyB64:function(e,t,r,n){return a(e,t,r,n)},getDecryptedKeyHex:function(e,t){var r=o(e),n=(r.type,r.cipher),i=r.ivsalt,u=r.data,c=s(n,t,i).keyhex;return a(u,n,c,i)},getEncryptedPKCS5PEMFromPrvKeyHex:function(e,t,r,n,o){var a="";if(void 0!==n&&null!=n||(n="AES-256-CBC"),void 0===i[n])throw new Error("KEYUTIL unsupported algorithm: "+n);return void 0!==o&&null!=o||(o=function(e){var t=y.lib.WordArray.random(e);return y.enc.Hex.stringify(t)}(i[n].ivlen).toUpperCase()),a="-----BEGIN "+e+" PRIVATE KEY-----\r\n",a+="Proc-Type: 4,ENCRYPTED\r\n",a+="DEK-Info: "+n+","+o+"\r\n",a+="\r\n",(a+=function(e,t,r,n){return(0,i[t].eproc)(e,r,n)}(t,n,s(n,r,o).keyhex,o).replace(/(.{64})/g,"$1\r\n"))+"\r\n-----END "+e+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(t){var r=de,n=r.getChildIdx,i=r.getV,o={},s=n(t,0);if(2!=s.length)throw new Error("malformed format: SEQUENCE(0).items != 2: "+s.length);o.ciphertext=i(t,s[1]);var a=n(t,s[0]);if(2!=a.length)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+a.length);if("2a864886f70d01050d"!=i(t,a[0]))throw new Error("this only supports pkcs5PBES2");var u=n(t,a[1]);if(2!=a.length)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+u.length);var c=n(t,u[1]);if(2!=c.length)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+c.length);if("2a864886f70d0307"!=i(t,c[0]))throw"this only supports TripleDES";o.encryptionSchemeAlg="TripleDES",o.encryptionSchemeIV=i(t,c[1]);var l=n(t,u[0]);if(2!=l.length)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+l.length);if("2a864886f70d01050c"!=i(t,l[0]))throw new Error("this only supports pkcs5PBKDF2");var d=n(t,l[1]);if(d.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+d.length);o.pbkdf2Salt=i(t,d[0]);var h=i(t,d[1]);try{o.pbkdf2Iter=parseInt(h,16)}catch(e){throw new Error("malformed format pbkdf2Iter: "+h)}return o},getPBKDF2KeyHexFromParam:function(e,t){var r=y.enc.Hex.parse(e.pbkdf2Salt),n=e.pbkdf2Iter,i=y.PBKDF2(t,r,{keySize:6,iterations:n});return y.enc.Hex.stringify(i)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(e,t){var r=Pe(e,"ENCRYPTED PRIVATE KEY"),n=this.parseHexOfEncryptedPKCS8(r),i=Ke.getPBKDF2KeyHexFromParam(n,t),o={};o.ciphertext=y.enc.Hex.parse(n.ciphertext);var s=y.enc.Hex.parse(i),a=y.enc.Hex.parse(n.encryptionSchemeIV),u=y.TripleDES.decrypt(o,s,{iv:a});return y.enc.Hex.stringify(u)},getKeyFromEncryptedPKCS8PEM:function(e,t){var r=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(e,t);return this.getKeyFromPlainPrivatePKCS8Hex(r)},parsePlainPrivatePKCS8Hex:function(e){var t=de,r=t.getChildIdx,n=t.getV,i={algparam:null};if("30"!=e.substr(0,2))throw new Error("malformed plain PKCS8 private key(code:001)");var o=r(e,0);if(o.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if("30"!=e.substr(o[1],2))throw new Error("malformed PKCS8 private key(code:003)");var s=r(e,o[1]);if(2!=s.length)throw new Error("malformed PKCS8 private key(code:004)");if("06"!=e.substr(s[0],2))throw new Error("malformed PKCS8 private key(code:005)");if(i.algoid=n(e,s[0]),"06"==e.substr(s[1],2)&&(i.algparam=n(e,s[1])),"04"!=e.substr(o[2],2))throw new Error("malformed PKCS8 private key(code:006)");return i.keyidx=t.getVidx(e,o[2]),i},getKeyFromPlainPrivatePKCS8PEM:function(e){var t=Pe(e,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(t)},getKeyFromPlainPrivatePKCS8Hex:function(e){var t,r=this.parsePlainPrivatePKCS8Hex(e);if("2a864886f70d010101"==r.algoid)t=new ne;else if("2a8648ce380401"==r.algoid)t=new ue.crypto.DSA;else{if("2a8648ce3d0201"!=r.algoid)throw new Error("unsupported private key algorithm");t=new ue.crypto.ECDSA}return t.readPKCS8PrvKeyHex(e),t},_getKeyFromPublicPKCS8Hex:function(e){var t,r=de.getVbyList(e,0,[0,0],"06");if("2a864886f70d010101"===r)t=new ne;else if("2a8648ce380401"===r)t=new ue.crypto.DSA;else{if("2a8648ce3d0201"!==r)throw new Error("unsupported PKCS#8 public key hex");t=new ue.crypto.ECDSA}return t.readPKCS8PubKeyHex(e),t},parsePublicRawRSAKeyHex:function(e){var t=de,r=t.getChildIdx,n=t.getV,i={};if("30"!=e.substr(0,2))throw new Error("malformed RSA key(code:001)");var o=r(e,0);if(2!=o.length)throw new Error("malformed RSA key(code:002)");if("02"!=e.substr(o[0],2))throw new Error("malformed RSA key(code:003)");if(i.n=n(e,o[0]),"02"!=e.substr(o[1],2))throw new Error("malformed RSA key(code:004)");return i.e=n(e,o[1]),i},parsePublicPKCS8Hex:function(e){var t=de,r=t.getChildIdx,n=t.getV,i={algparam:null},o=r(e,0);if(2!=o.length)throw new Error("outer DERSequence shall have 2 elements: "+o.length);var s=o[0];if("30"!=e.substr(s,2))throw new Error("malformed PKCS8 public key(code:001)");var a=r(e,s);if(2!=a.length)throw new Error("malformed PKCS8 public key(code:002)");if("06"!=e.substr(a[0],2))throw new Error("malformed PKCS8 public key(code:003)");if(i.algoid=n(e,a[0]),"06"==e.substr(a[1],2)?i.algparam=n(e,a[1]):"30"==e.substr(a[1],2)&&(i.algparam={},i.algparam.p=t.getVbyList(e,a[1],[0],"02"),i.algparam.q=t.getVbyList(e,a[1],[1],"02"),i.algparam.g=t.getVbyList(e,a[1],[2],"02")),"03"!=e.substr(o[1],2))throw new Error("malformed PKCS8 public key(code:004)");return i.key=n(e,o[1]).substr(2),i}}}();function Ve(e,t){for(var r="",n=t/4-e.length,i=0;i<n;i++)r+="0";return r+e}function We(e,t,r){for(var n="",i=0;n.length<t;)n+=_e(r(Ee(e+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])))),i+=1;return n}function $e(e){for(var t in ue.crypto.Util.DIGESTINFOHEAD){var r=ue.crypto.Util.DIGESTINFOHEAD[t],n=r.length;if(e.substring(0,n)==r)return[t,e.substring(n)]}return[]}function Je(e){var t,r=de,n=r.getChildIdx,i=r.getV,o=r.getTLV,s=r.getVbyList,a=r.getVbyListEx,u=r.getTLVbyList,c=r.getTLVbyListEx,l=r.getIdxbyList,d=r.getIdxbyListEx,h=r.getVidx,p=r.getInt,f=r.oidname,g=r.hextooidstr,y=Pe;try{t=ue.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch(e){}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(null===this.hex||0!==this.version)return this.version;var e=u(this.hex,0,[0,0]);if("a0"==e.substr(0,2)){var t=u(e,0,[0]),r=p(t,0);if(r<0||2<r)throw new Error("malformed version field");return this.version=r+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return a(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var e=c(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(e)},this.getAlgorithmIdentifierName=function(e){for(var r in t)if(e===t[r])return r;return f(a(e,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return u(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return u(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var e=s(this.hex,0,[0,4+this.foffset,0]);return e=e.replace(/(..)/g,"%$1"),decodeURIComponent(e)},this.getNotAfter=function(){var e=s(this.hex,0,[0,4+this.foffset,1]);return e=e.replace(/(..)/g,"%$1"),decodeURIComponent(e)},this.getPublicKeyHex=function(){return r.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return l(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var e=this.getPublicKeyIdx();return l(this.hex,e,[1,0],"30")},this.getPublicKey=function(){return Ke.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var e=u(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(e)},this.getSignatureValueHex=function(){return s(this.hex,0,[2],"03",!0)},this.verifySignature=function(e){var t=this.getSignatureAlgorithmField(),r=this.getSignatureValueHex(),n=u(this.hex,0,[0],"30"),i=new ue.crypto.Signature({alg:t});return i.init(e),i.updateHex(n),i.verify(r)},this.parseExt=function(e){var t,o,a;if(void 0===e){if(a=this.hex,3!==this.version)return-1;t=l(a,0,[0,7,0],"30"),o=n(a,t)}else{a=Pe(e);var u=l(a,0,[0,3,0,0],"06");if("2a864886f70d01090e"!=i(a,u))return void(this.aExtInfo=new Array);t=l(a,0,[0,3,0,1,0],"30"),o=n(a,t),this.hex=a}this.aExtInfo=new Array;for(var c=0;c<o.length;c++){var d={critical:!1},p=0;3===n(a,o[c]).length&&(d.critical=!0,p=1),d.oid=r.hextooidstr(s(a,o[c],[0],"06"));var f=l(a,o[c],[1+p]);d.vidx=h(a,f),this.aExtInfo.push(d)}},this.getExtInfo=function(e){var t=this.aExtInfo,r=e;if(e.match(/^[0-9.]+$/)||(r=ue.asn1.x509.OID.name2oid(e)),""!==r)for(var n=0;n<t.length;n++)if(t[n].oid===r)return t[n]},this.getExtBasicConstraints=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("basicConstraints");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var n={extname:"basicConstraints"};if(t&&(n.critical=!0),"3000"===e)return n;if("30030101ff"===e)return n.cA=!0,n;if("30060101ff02"===e.substr(0,12)){var s=i(e,10),a=parseInt(s,16);return n.cA=!0,n.pathLen=a,n}throw new Error("hExtV parse error: "+e)},this.getExtKeyUsage=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("keyUsage");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var n={extname:"keyUsage"};return t&&(n.critical=!0),n.names=this.getExtKeyUsageString(e).split(","),n},this.getExtKeyUsageBin=function(e){if(void 0===e){var t=this.getExtInfo("keyUsage");if(void 0===t)return"";e=o(this.hex,t.vidx)}if(8!=e.length&&10!=e.length)throw new Error("malformed key usage value: "+e);var r="000000000000000"+parseInt(e.substr(6),16).toString(2);return 8==e.length&&(r=r.slice(-8)),10==e.length&&(r=r.slice(-16)),""==(r=r.replace(/0+$/,""))&&(r="0"),r},this.getExtKeyUsageString=function(e){for(var t=this.getExtKeyUsageBin(e),r=new Array,n=0;n<t.length;n++)"1"==t.substr(n,1)&&r.push(Je.KEYUSAGE_NAME[n]);return r.join(",")},this.getExtSubjectKeyIdentifier=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("subjectKeyIdentifier");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var n={extname:"subjectKeyIdentifier"};t&&(n.critical=!0);var s=i(e,0);return n.kid={hex:s},n},this.getExtAuthorityKeyIdentifier=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("authorityKeyIdentifier");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var s={extname:"authorityKeyIdentifier"};t&&(s.critical=!0);for(var a=n(e,0),u=0;u<a.length;u++){var c=e.substr(a[u],2);if("80"===c&&(s.kid={hex:i(e,a[u])}),"a1"===c){var l=o(e,a[u]),d=this.getGeneralNames(l);s.issuer=d[0].dn}"82"===c&&(s.sn={hex:i(e,a[u])})}return s},this.getExtExtKeyUsage=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("extKeyUsage");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var s={extname:"extKeyUsage",array:[]};t&&(s.critical=!0);for(var a=n(e,0),u=0;u<a.length;u++)s.array.push(f(i(e,a[u])));return s},this.getExtExtKeyUsageName=function(){var e=this.getExtInfo("extKeyUsage");if(void 0===e)return e;var t=new Array,r=o(this.hex,e.vidx);if(""===r)return t;for(var s=n(r,0),a=0;a<s.length;a++)t.push(f(i(r,s[a])));return t},this.getExtSubjectAltName=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("subjectAltName");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var n={extname:"subjectAltName",array:[]};return t&&(n.critical=!0),n.array=this.getGeneralNames(e),n},this.getExtIssuerAltName=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("issuerAltName");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var n={extname:"issuerAltName",array:[]};return t&&(n.critical=!0),n.array=this.getGeneralNames(e),n},this.getGeneralNames=function(e){for(var t=n(e,0),r=[],i=0;i<t.length;i++){var s=this.getGeneralName(o(e,t[i]));void 0!==s&&r.push(s)}return r},this.getGeneralName=function(e){var t=e.substr(0,2),r=i(e,0),n=_e(r);return"81"==t?{rfc822:n}:"82"==t?{dns:n}:"86"==t?{uri:n}:"87"==t?{ip:De(r)}:"a4"==t?{dn:this.getX500Name(r)}:void 0},this.getExtSubjectAltName2=function(){var e,t,r,s=this.getExtInfo("subjectAltName");if(void 0===s)return s;for(var a=new Array,u=o(this.hex,s.vidx),c=n(u,0),l=0;l<c.length;l++)r=u.substr(c[l],2),e=i(u,c[l]),"81"===r&&(t=Se(e),a.push(["MAIL",t])),"82"===r&&(t=Se(e),a.push(["DNS",t])),"84"===r&&(t=Je.hex2dn(e,0),a.push(["DN",t])),"86"===r&&(t=Se(e),a.push(["URI",t])),"87"===r&&(t=De(e),a.push(["IP",t]));return a},this.getExtCRLDistributionPoints=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("cRLDistributionPoints");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var i={extname:"cRLDistributionPoints",array:[]};t&&(i.critical=!0);for(var s=n(e,0),a=0;a<s.length;a++){var u=o(e,s[a]);i.array.push(this.getDistributionPoint(u))}return i},this.getDistributionPoint=function(e){for(var t={},r=n(e,0),i=0;i<r.length;i++){var s=e.substr(r[i],2),a=o(e,r[i]);"a0"==s&&(t.dpname=this.getDistributionPointName(a))}return t},this.getDistributionPointName=function(e){for(var t={},r=n(e,0),i=0;i<r.length;i++){var s=e.substr(r[i],2),a=o(e,r[i]);"a0"==s&&(t.full=this.getGeneralNames(a))}return t},this.getExtCRLDistributionPointsURI=function(){var e=this.getExtInfo("cRLDistributionPoints");if(void 0===e)return e;for(var t=new Array,r=n(this.hex,e.vidx),i=0;i<r.length;i++)try{var o=Se(s(this.hex,r[i],[0,0,0],"86"));t.push(o)}catch(e){}return t},this.getExtAIAInfo=function(){var e=this.getExtInfo("authorityInfoAccess");if(void 0===e)return e;for(var t={ocsp:[],caissuer:[]},r=n(this.hex,e.vidx),i=0;i<r.length;i++){var o=s(this.hex,r[i],[0],"06"),a=s(this.hex,r[i],[1],"86");"2b06010505073001"===o&&t.ocsp.push(Se(a)),"2b06010505073002"===o&&t.caissuer.push(Se(a))}return t},this.getExtAuthorityInfoAccess=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("authorityInfoAccess");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var i={extname:"authorityInfoAccess",array:[]};t&&(i.critical=!0);for(var u=n(e,0),c=0;c<u.length;c++){var l=a(e,u[c],[0],"06"),d=Se(s(e,u[c],[1],"86"));if("2b06010505073001"==l)i.array.push({ocsp:d});else{if("2b06010505073002"!=l)throw new Error("unknown method: "+l);i.array.push({caissuer:d})}}return i},this.getExtCertificatePolicies=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("certificatePolicies");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var i={extname:"certificatePolicies",array:[]};t&&(i.critical=!0);for(var s=n(e,0),a=0;a<s.length;a++){var u=o(e,s[a]),c=this.getPolicyInformation(u);i.array.push(c)}return i},this.getPolicyInformation=function(e){var t={},r=s(e,0,[0],"06");t.policyoid=f(r);var i=d(e,0,[1],"30");if(-1!=i){t.array=[];for(var a=n(e,i),u=0;u<a.length;u++){var c=o(e,a[u]),l=this.getPolicyQualifierInfo(c);t.array.push(l)}}return t},this.getPolicyQualifierInfo=function(e){var t={},r=s(e,0,[0],"06");if("2b06010505070201"===r){var n=a(e,0,[1],"16");t.cps=_e(n)}else if("2b06010505070202"===r){var i=u(e,0,[1],"30");t.unotice=this.getUserNotice(i)}return t},this.getUserNotice=function(e){for(var t={},r=n(e,0),i=0;i<r.length;i++){var s=o(e,r[i]);"30"!=s.substr(0,2)&&(t.exptext=this.getDisplayText(s))}return t},this.getDisplayText=function(e){var t={};return t.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[e.substr(0,2)],t.str=_e(i(e,0)),t},this.getExtCRLNumber=function(e,t){var r={extname:"cRLNumber"};if(t&&(r.critical=!0),"02"==e.substr(0,2))return r.num={hex:i(e,0)},r;throw new Error("hExtV parse error: "+e)},this.getExtCRLReason=function(e,t){var r={extname:"cRLReason"};if(t&&(r.critical=!0),"0a"==e.substr(0,2))return r.code=parseInt(i(e,0),16),r;throw new Error("hExtV parse error: "+e)},this.getExtOcspNonce=function(e,t){var r={extname:"ocspNonce"};t&&(r.critical=!0);var n=i(e,0);return r.hex=n,r},this.getExtOcspNoCheck=function(e,t){var r={extname:"ocspNoCheck"};return t&&(r.critical=!0),r},this.getExtAdobeTimeStamp=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("adobeTimeStamp");if(void 0===r)return;e=o(this.hex,r.vidx),t=r.critical}var i={extname:"adobeTimeStamp"};t&&(i.critical=!0);var s=n(e,0);if(s.length>1){var a=o(e,s[1]),u=this.getGeneralName(a);null!=u.uri&&(i.uri=u.uri)}if(s.length>2){var c=o(e,s[2]);"0101ff"==c&&(i.reqauth=!0),"010100"==c&&(i.reqauth=!1)}return i},this.getX500NameRule=function(e){for(var t=null,r=[],n=0;n<e.length;n++)for(var i=e[n],o=0;o<i.length;o++)r.push(i[o]);for(n=0;n<r.length;n++){var s=r[n],a=s.ds,u=s.value,c=s.type;if("prn"!=a&&"utf8"!=a&&"ia5"!=a)return"mixed";if("ia5"==a){if("CN"!=c)return"mixed";if(ue.lang.String.isMail(u))continue;return"mixed"}if("C"==c){if("prn"==a)continue;return"mixed"}if(null==t)t=a;else if(t!==a)return"mixed"}return null==t?"prn":t},this.getX500Name=function(e){var t=this.getX500NameArray(e);return{array:t,str:this.dnarraytostr(t)}},this.getX500NameArray=function(e){for(var t=[],r=n(e,0),i=0;i<r.length;i++)t.push(this.getRDN(o(e,r[i])));return t},this.getRDN=function(e){for(var t=[],r=n(e,0),i=0;i<r.length;i++)t.push(this.getAttrTypeAndValue(o(e,r[i])));return t},this.getAttrTypeAndValue=function(e){var t={type:null,value:null,ds:null},r=n(e,0),i=s(e,r[0],[],"06"),o=s(e,r[1],[]),a=ue.asn1.ASN1Util.oidHexToInt(i);return t.type=ue.asn1.x509.OID.oid2atype(a),t.ds=this.HEX2STAG[e.substr(r[1],2)],"bmp"!=t.ds?t.value=Se(o):t.value=je(o),t},this.readCertPEM=function(e){this.readCertHex(y(e))},this.readCertHex=function(e){this.hex=e,this.getVersion();try{l(this.hex,0,[0,7],"a3"),this.parseExt()}catch(e){}},this.getParam=function(){var e={};return e.version=this.getVersion(),e.serial={hex:this.getSerialNumberHex()},e.sigalg=this.getSignatureAlgorithmField(),e.issuer=this.getIssuer(),e.notbefore=this.getNotBefore(),e.notafter=this.getNotAfter(),e.subject=this.getSubject(),e.sbjpubkey=Ce(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(e.ext=this.getExtParamArray()),e.sighex=this.getSignatureValueHex(),e},this.getExtParamArray=function(e){null==e&&-1!=d(this.hex,0,[0,"[3]"])&&(e=c(this.hex,0,[0,"[3]",0],"30"));for(var t=[],r=n(e,0),i=0;i<r.length;i++){var s=o(e,r[i]),a=this.getExtParam(s);null!=a&&t.push(a)}return t},this.getExtParam=function(e){var t=n(e,0).length;if(2!=t&&3!=t)throw new Error("wrong number elements in Extension: "+t+" "+e);var r=g(s(e,0,[0],"06")),i=!1;3==t&&"0101ff"==u(e,0,[1])&&(i=!0);var o=u(e,0,[t-1,0]),a=void 0;if("2.5.29.14"==r?a=this.getExtSubjectKeyIdentifier(o,i):"2.5.29.15"==r?a=this.getExtKeyUsage(o,i):"2.5.29.17"==r?a=this.getExtSubjectAltName(o,i):"2.5.29.18"==r?a=this.getExtIssuerAltName(o,i):"2.5.29.19"==r?a=this.getExtBasicConstraints(o,i):"2.5.29.31"==r?a=this.getExtCRLDistributionPoints(o,i):"2.5.29.32"==r?a=this.getExtCertificatePolicies(o,i):"2.5.29.35"==r?a=this.getExtAuthorityKeyIdentifier(o,i):"2.5.29.37"==r?a=this.getExtExtKeyUsage(o,i):"1.3.6.1.5.5.7.1.1"==r?a=this.getExtAuthorityInfoAccess(o,i):"2.5.29.20"==r?a=this.getExtCRLNumber(o,i):"2.5.29.21"==r?a=this.getExtCRLReason(o,i):"1.3.6.1.5.5.7.48.1.2"==r?a=this.getExtOcspNonce(o,i):"1.3.6.1.5.5.7.48.1.5"==r?a=this.getExtOcspNoCheck(o,i):"1.2.840.113583.1.1.9.1"==r&&(a=this.getExtAdobeTimeStamp(o,i)),null!=a)return a;var c={extname:r,extn:o};return i&&(c.critical=!0),c},this.findExt=function(e,t){for(var r=0;r<e.length;r++)if(e[r].extname==t)return e[r];return null},this.updateExtCDPFullURI=function(e,t){var r=this.findExt(e,"cRLDistributionPoints");if(null!=r&&null!=r.array)for(var n=r.array,i=0;i<n.length;i++)if(null!=n[i].dpname&&null!=n[i].dpname.full)for(var o=n[i].dpname.full,s=0;s<o.length;s++){var a=o[i];null!=a.uri&&(a.uri=t)}},this.updateExtAIAOCSP=function(e,t){var r=this.findExt(e,"authorityInfoAccess");if(null!=r&&null!=r.array)for(var n=r.array,i=0;i<n.length;i++)null!=n[i].ocsp&&(n[i].ocsp=t)},this.updateExtAIACAIssuer=function(e,t){var r=this.findExt(e,"authorityInfoAccess");if(null!=r&&null!=r.array)for(var n=r.array,i=0;i<n.length;i++)null!=n[i].caissuer&&(n[i].caissuer=t)},this.dnarraytostr=function(e){return"/"+e.map((function(e){return function(e){return e.map((function(e){return function(e){return e.type+"="+e.value}(e).replace(/\+/,"\\+")})).join("+")}(e).replace(/\//,"\\/")})).join("/")},this.getInfo=function(){var e,t,r,n=function(e){return JSON.stringify(e.array).replace(/[\[\]\{\}\"]/g,"")},i=function(e){for(var t="",r=e.array,n=0;n<r.length;n++){var i=r[n];if(t+="    policy oid: "+i.policyoid+"\n",void 0!==i.array)for(var o=0;o<i.array.length;o++){var s=i.array[o];void 0!==s.cps&&(t+="    cps: "+s.cps+"\n")}}return t},o=function(t){for(var r="",n=t.array,i=0;i<n.length;i++){var o=n[i];try{void 0!==o.dpname.full[0].uri&&(r+="    "+o.dpname.full[0].uri+"\n")}catch(e){}try{void 0!==o.dname.full[0].dn.hex&&(r+="    "+Je.hex2dn(o.dpname.full[0].dn.hex)+"\n")}catch(e){}}return r},s=function(e){for(var t="",r=e.array,n=0;n<r.length;n++){var i=r[n];void 0!==i.caissuer&&(t+="    caissuer: "+i.caissuer+"\n"),void 0!==i.ocsp&&(t+="    ocsp: "+i.ocsp+"\n")}return t};if(e="Basic Fields\n",e+="  serial number: "+this.getSerialNumberHex()+"\n",e+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",e+="  issuer: "+this.getIssuerString()+"\n",e+="  notBefore: "+this.getNotBefore()+"\n",e+="  notAfter: "+this.getNotAfter()+"\n",e+="  subject: "+this.getSubjectString()+"\n",e+="  subject public key info: \n",e+="    key algorithm: "+(t=this.getPublicKey()).type+"\n","RSA"===t.type&&(e+="    n="+He(t.n.toString(16)).substr(0,16)+"...\n",e+="    e="+He(t.e.toString(16))+"\n"),null!=(r=this.aExtInfo)){e+="X509v3 Extensions:\n";for(var a=0;a<r.length;a++){var u=r[a],c=ue.asn1.x509.OID.oid2name(u.oid);""===c&&(c=u.oid);var l="";if(!0===u.critical&&(l="CRITICAL"),e+="  "+c+" "+l+":\n","basicConstraints"===c){var d=this.getExtBasicConstraints();void 0===d.cA?e+="    {}\n":(e+="    cA=true",void 0!==d.pathLen&&(e+=", pathLen="+d.pathLen),e+="\n")}else if("keyUsage"===c)e+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===c)e+="    "+this.getExtSubjectKeyIdentifier().kid.hex+"\n";else if("authorityKeyIdentifier"===c){var h=this.getExtAuthorityKeyIdentifier();void 0!==h.kid&&(e+="    kid="+h.kid.hex+"\n")}else"extKeyUsage"===c?e+="    "+this.getExtExtKeyUsage().array.join(", ")+"\n":"subjectAltName"===c?e+="    "+n(this.getExtSubjectAltName())+"\n":"cRLDistributionPoints"===c?e+=o(this.getExtCRLDistributionPoints()):"authorityInfoAccess"===c?e+=s(this.getExtAuthorityInfoAccess()):"certificatePolicies"===c&&(e+=i(this.getExtCertificatePolicies()))}}return(e+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n")+"signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"},"string"==typeof e&&(-1!=e.indexOf("-----BEGIN")?this.readCertPEM(e):ue.lang.String.isHex(e)&&this.readCertHex(e))}Ke.getKey=function(e,t,r){var n,i=(v=de).getChildIdx,o=(v.getV,v.getVbyList),s=ue.crypto,a=s.ECDSA,u=s.DSA,c=ne,l=Pe,d=Ke;if(void 0!==c&&e instanceof c)return e;if(void 0!==a&&e instanceof a)return e;if(void 0!==u&&e instanceof u)return e;if(void 0!==e.curve&&void 0!==e.xy&&void 0===e.d)return new a({pub:e.xy,curve:e.curve});if(void 0!==e.curve&&void 0!==e.d)return new a({prv:e.d,curve:e.curve});if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(x=new c).setPublic(e.n,e.e),x;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.co&&void 0===e.qi)return(x=new c).setPrivateEx(e.n,e.e,e.d,e.p,e.q,e.dp,e.dq,e.co),x;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0===e.p)return(x=new c).setPrivate(e.n,e.e,e.d),x;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0===e.x)return(x=new u).setPublic(e.p,e.q,e.g,e.y),x;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0!==e.x)return(x=new u).setPrivate(e.p,e.q,e.g,e.y,e.x),x;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(x=new c).setPublic(we(e.n),we(e.e)),x;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.qi)return(x=new c).setPrivateEx(we(e.n),we(e.e),we(e.d),we(e.p),we(e.q),we(e.dp),we(e.dq),we(e.qi)),x;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d)return(x=new c).setPrivate(we(e.n),we(e.e),we(e.d)),x;if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0===e.d){var h=(P=new a({curve:e.crv})).ecparams.keylen/4,p="04"+("0000000000"+we(e.x)).slice(-h)+("0000000000"+we(e.y)).slice(-h);return P.setPublicKeyHex(p),P}if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0!==e.d){h=(P=new a({curve:e.crv})).ecparams.keylen/4,p="04"+("0000000000"+we(e.x)).slice(-h)+("0000000000"+we(e.y)).slice(-h);var f=("0000000000"+we(e.d)).slice(-h);return P.setPublicKeyHex(p),P.setPrivateKeyHex(f),P}if("pkcs5prv"===r){var g,y=e,v=de;if(9===(g=i(y,0)).length)(x=new c).readPKCS5PrvKeyHex(y);else if(6===g.length)(x=new u).readPKCS5PrvKeyHex(y);else{if(!(g.length>2&&"04"===y.substr(g[1],2)))throw new Error("unsupported PKCS#1/5 hexadecimal key");(x=new a).readPKCS5PrvKeyHex(y)}return x}if("pkcs8prv"===r)return d.getKeyFromPlainPrivatePKCS8Hex(e);if("pkcs8pub"===r)return d._getKeyFromPublicPKCS8Hex(e);if("x509pub"===r)return Je.getPublicKeyFromCertHex(e);if(-1!=e.indexOf("-END CERTIFICATE-",0)||-1!=e.indexOf("-END X509 CERTIFICATE-",0)||-1!=e.indexOf("-END TRUSTED CERTIFICATE-",0))return Je.getPublicKeyFromCertPEM(e);if(-1!=e.indexOf("-END PUBLIC KEY-")){var m=Pe(e,"PUBLIC KEY");return d._getKeyFromPublicPKCS8Hex(m)}if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var w=l(e,"RSA PRIVATE KEY");return d.getKey(w,null,"pkcs5prv")}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var b=o(n=l(e,"DSA PRIVATE KEY"),0,[1],"02"),S=o(n,0,[2],"02"),E=o(n,0,[3],"02"),A=o(n,0,[4],"02"),k=o(n,0,[5],"02");return(x=new u).setPrivate(new _(b,16),new _(S,16),new _(E,16),new _(A,16),new _(k,16)),x}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED"))return w=l(e,"EC PRIVATE KEY"),d.getKey(w,null,"pkcs5prv");if(-1!=e.indexOf("-END PRIVATE KEY-"))return d.getKeyFromPlainPrivatePKCS8PEM(e);if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var F=d.getDecryptedKeyHex(e,t),C=new ne;return C.readPKCS5PrvKeyHex(F),C}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var P,x=o(n=d.getDecryptedKeyHex(e,t),0,[1],"04"),R=o(n,0,[2,0],"06"),T=o(n,0,[3,0],"03").substr(2);if(void 0===ue.crypto.OID.oidhex2name[R])throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+R);return(P=new a({curve:ue.crypto.OID.oidhex2name[R]})).setPublicKeyHex(T),P.setPrivateKeyHex(x),P.isPublic=!1,P}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED"))return b=o(n=d.getDecryptedKeyHex(e,t),0,[1],"02"),S=o(n,0,[2],"02"),E=o(n,0,[3],"02"),A=o(n,0,[4],"02"),k=o(n,0,[5],"02"),(x=new u).setPrivate(new _(b,16),new _(S,16),new _(E,16),new _(A,16),new _(k,16)),x;if(-1!=e.indexOf("-END ENCRYPTED PRIVATE KEY-"))return d.getKeyFromEncryptedPKCS8PEM(e,t);throw new Error("not supported argument")},Ke.generateKeypair=function(e,t){if("RSA"==e){var r=t;(s=new ne).generate(r,"10001"),s.isPrivate=!0,s.isPublic=!0;var n=new ne,i=s.n.toString(16),o=s.e.toString(16);return n.setPublic(i,o),n.isPrivate=!1,n.isPublic=!0,(a={}).prvKeyObj=s,a.pubKeyObj=n,a}if("EC"==e){var s,a,u=t,c=new ue.crypto.ECDSA({curve:u}).generateKeyPairHex();return(s=new ue.crypto.ECDSA({curve:u})).setPublicKeyHex(c.ecpubhex),s.setPrivateKeyHex(c.ecprvhex),s.isPrivate=!0,s.isPublic=!1,(n=new ue.crypto.ECDSA({curve:u})).setPublicKeyHex(c.ecpubhex),n.isPrivate=!1,n.isPublic=!0,(a={}).prvKeyObj=s,a.pubKeyObj=n,a}throw new Error("unknown algorithm: "+e)},Ke.getPEM=function(e,t,r,n,i,o){var s=ue,a=s.asn1,u=a.DERObjectIdentifier,c=a.DERInteger,l=a.ASN1Util.newObject,d=a.x509.SubjectPublicKeyInfo,h=s.crypto,p=h.DSA,f=h.ECDSA,g=ne;function v(e){return l({seq:[{int:0},{int:{bigint:e.n}},{int:e.e},{int:{bigint:e.d}},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.dmp1}},{int:{bigint:e.dmq1}},{int:{bigint:e.coeff}}]})}function m(e){return l({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a0",!0,{oid:{name:e.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]})}function w(e){return l({seq:[{int:0},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}},{int:{bigint:e.y}},{int:{bigint:e.x}}]})}if((void 0!==g&&e instanceof g||void 0!==p&&e instanceof p||void 0!==f&&e instanceof f)&&1==e.isPublic&&(void 0===t||"PKCS8PUB"==t))return Ce(E=new d(e).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==t&&void 0!==g&&e instanceof g&&(void 0===r||null==r)&&1==e.isPrivate)return Ce(E=v(e).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==t&&void 0!==f&&e instanceof f&&(void 0===r||null==r)&&1==e.isPrivate){var b=new u({name:e.curveName}).getEncodedHex(),S=m(e).getEncodedHex(),_="";return(_+=Ce(b,"EC PARAMETERS"))+Ce(S,"EC PRIVATE KEY")}if("PKCS1PRV"==t&&void 0!==p&&e instanceof p&&(void 0===r||null==r)&&1==e.isPrivate)return Ce(E=w(e).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==t&&void 0!==g&&e instanceof g&&void 0!==r&&null!=r&&1==e.isPrivate){var E=v(e).getEncodedHex();return void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",E,r,n,o)}if("PKCS5PRV"==t&&void 0!==f&&e instanceof f&&void 0!==r&&null!=r&&1==e.isPrivate)return E=m(e).getEncodedHex(),void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",E,r,n,o);if("PKCS5PRV"==t&&void 0!==p&&e instanceof p&&void 0!==r&&null!=r&&1==e.isPrivate)return E=w(e).getEncodedHex(),void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",E,r,n,o);var A=function(e,t){var r=k(e,t);return new l({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:r.pbkdf2Salt}},{int:r.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:r.encryptionSchemeIV}}]}]}]},{octstr:{hex:r.ciphertext}}]}).getEncodedHex()},k=function(e,t){var r=y.lib.WordArray.random(8),n=y.lib.WordArray.random(8),i=y.PBKDF2(t,r,{keySize:6,iterations:100}),o=y.enc.Hex.parse(e),s=y.TripleDES.encrypt(o,i,{iv:n})+"",a={};return a.ciphertext=s,a.pbkdf2Salt=y.enc.Hex.stringify(r),a.pbkdf2Iter=100,a.encryptionSchemeAlg="DES-EDE3-CBC",a.encryptionSchemeIV=y.enc.Hex.stringify(n),a};if("PKCS8PRV"==t&&null!=g&&e instanceof g&&1==e.isPrivate){var F=v(e).getEncodedHex();return E=l({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:F}}]}).getEncodedHex(),void 0===r||null==r?Ce(E,"PRIVATE KEY"):Ce(S=A(E,r),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==t&&void 0!==f&&e instanceof f&&1==e.isPrivate)return F=new l({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]}).getEncodedHex(),E=l({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:e.curveName}}]},{octstr:{hex:F}}]}).getEncodedHex(),void 0===r||null==r?Ce(E,"PRIVATE KEY"):Ce(S=A(E,r),"ENCRYPTED PRIVATE KEY");if("PKCS8PRV"==t&&void 0!==p&&e instanceof p&&1==e.isPrivate)return F=new c({bigint:e.x}).getEncodedHex(),E=l({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}]},{octstr:{hex:F}}]}).getEncodedHex(),void 0===r||null==r?Ce(E,"PRIVATE KEY"):Ce(S=A(E,r),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},Ke.getKeyFromCSRPEM=function(e){var t=Pe(e,"CERTIFICATE REQUEST");return Ke.getKeyFromCSRHex(t)},Ke.getKeyFromCSRHex=function(e){var t=Ke.parseCSRHex(e);return Ke.getKey(t.p8pubkeyhex,null,"pkcs8pub")},Ke.parseCSRHex=function(e){var t=de,r=t.getChildIdx,n=t.getTLV,i={},o=e;if("30"!=o.substr(0,2))throw new Error("malformed CSR(code:001)");var s=r(o,0);if(s.length<1)throw new Error("malformed CSR(code:002)");if("30"!=o.substr(s[0],2))throw new Error("malformed CSR(code:003)");var a=r(o,s[0]);if(a.length<3)throw new Error("malformed CSR(code:004)");return i.p8pubkeyhex=n(o,a[2]),i},Ke.getKeyID=function(e){var t=Ke,r=de;"string"==typeof e&&-1!=e.indexOf("BEGIN ")&&(e=t.getKey(e));var n=Pe(t.getPEM(e)),i=r.getIdxbyList(n,0,[1]),o=r.getV(n,i).substring(2);return ue.crypto.Util.hashHex(o,"sha1")},Ke.getJWKFromKey=function(e){var t={};if(e instanceof ne&&e.isPrivate)return t.kty="RSA",t.n=me(e.n.toString(16)),t.e=me(e.e.toString(16)),t.d=me(e.d.toString(16)),t.p=me(e.p.toString(16)),t.q=me(e.q.toString(16)),t.dp=me(e.dmp1.toString(16)),t.dq=me(e.dmq1.toString(16)),t.qi=me(e.coeff.toString(16)),t;if(e instanceof ne&&e.isPublic)return t.kty="RSA",t.n=me(e.n.toString(16)),t.e=me(e.e.toString(16)),t;if(e instanceof ue.crypto.ECDSA&&e.isPrivate){if("P-256"!==(n=e.getShortNISTPCurveName())&&"P-384"!==n)throw new Error("unsupported curve name for JWT: "+n);var r=e.getPublicKeyXYHex();return t.kty="EC",t.crv=n,t.x=me(r.x),t.y=me(r.y),t.d=me(e.prvKeyHex),t}if(e instanceof ue.crypto.ECDSA&&e.isPublic){var n;if("P-256"!==(n=e.getShortNISTPCurveName())&&"P-384"!==n)throw new Error("unsupported curve name for JWT: "+n);return r=e.getPublicKeyXYHex(),t.kty="EC",t.crv=n,t.x=me(r.x),t.y=me(r.y),t}throw new Error("not supported key object")},ne.getPosArrayOfChildrenFromHex=function(e){return de.getChildIdx(e,0)},ne.getHexValueArrayOfChildrenFromHex=function(e){var t,r=de.getV,n=r(e,(t=ne.getPosArrayOfChildrenFromHex(e))[0]),i=r(e,t[1]),o=r(e,t[2]),s=r(e,t[3]),a=r(e,t[4]),u=r(e,t[5]),c=r(e,t[6]),l=r(e,t[7]),d=r(e,t[8]);return(t=new Array).push(n,i,o,s,a,u,c,l,d),t},ne.prototype.readPrivateKeyFromPEMString=function(e){var t=Pe(e),r=ne.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8])},ne.prototype.readPKCS5PrvKeyHex=function(e){var t=ne.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},ne.prototype.readPKCS8PrvKeyHex=function(e){var t,r,n,i,o,s,a,u,c=de,l=c.getVbyListEx;if(!1===c.isASN1HEX(e))throw new Error("not ASN.1 hex string");try{t=l(e,0,[2,0,1],"02"),r=l(e,0,[2,0,2],"02"),n=l(e,0,[2,0,3],"02"),i=l(e,0,[2,0,4],"02"),o=l(e,0,[2,0,5],"02"),s=l(e,0,[2,0,6],"02"),a=l(e,0,[2,0,7],"02"),u=l(e,0,[2,0,8],"02")}catch(e){throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(t,r,n,i,o,s,a,u)},ne.prototype.readPKCS5PubKeyHex=function(e){var t=de,r=t.getV;if(!1===t.isASN1HEX(e))throw new Error("keyHex is not ASN.1 hex string");var n=t.getChildIdx(e,0);if(2!==n.length||"02"!==e.substr(n[0],2)||"02"!==e.substr(n[1],2))throw new Error("wrong hex for PKCS#5 public key");var i=r(e,n[0]),o=r(e,n[1]);this.setPublic(i,o)},ne.prototype.readPKCS8PubKeyHex=function(e){var t=de;if(!1===t.isASN1HEX(e))throw new Error("not ASN.1 hex string");if("06092a864886f70d010101"!==t.getTLVbyListEx(e,0,[0,0]))throw new Error("not PKCS8 RSA public key");var r=t.getTLVbyListEx(e,0,[1,0]);this.readPKCS5PubKeyHex(r)},ne.prototype.readCertPubKeyHex=function(e,t){var r,n;(r=new Je).readCertHex(e),n=r.getPublicKeyHex(),this.readPKCS8PubKeyHex(n)},new RegExp("[^0-9a-f]","gi"),ne.prototype.sign=function(e,t){var r=function(e){return ue.crypto.Util.hashString(e,t)}(e);return this.signWithMessageHash(r,t)},ne.prototype.signWithMessageHash=function(e,t){var r=te(ue.crypto.Util.getPaddedDigestInfoHex(e,t,this.n.bitLength()),16);return Ve(this.doPrivate(r).toString(16),this.n.bitLength())},ne.prototype.signPSS=function(e,t,r){var n=function(e){return ue.crypto.Util.hashHex(e,t)}(Ee(e));return void 0===r&&(r=-1),this.signWithMessageHashPSS(n,t,r)},ne.prototype.signWithMessageHashPSS=function(e,t,r){var n,i=_e(e),o=i.length,s=this.n.bitLength()-1,a=Math.ceil(s/8),u=function(e){return ue.crypto.Util.hashHex(e,t)};if(-1===r||void 0===r)r=o;else if(-2===r)r=a-o-2;else if(r<-2)throw new Error("invalid salt length");if(a<o+r+2)throw new Error("data too long");var c="";r>0&&(c=new Array(r),(new ee).nextBytes(c),c=String.fromCharCode.apply(String,c));var l=_e(u(Ee("\0\0\0\0\0\0\0\0"+i+c))),d=[];for(n=0;n<a-r-o-2;n+=1)d[n]=0;var h=String.fromCharCode.apply(String,d)+"\x01"+c,p=We(l,h.length,u),f=[];for(n=0;n<h.length;n+=1)f[n]=h.charCodeAt(n)^p.charCodeAt(n);var g=65280>>8*a-s&255;for(f[0]&=~g,n=0;n<o;n++)f.push(l.charCodeAt(n));return f.push(188),Ve(this.doPrivate(new _(f)).toString(16),this.n.bitLength())},ne.prototype.verify=function(e,t){if(null==(t=t.toLowerCase()).match(/^[0-9a-f]+$/))return!1;var r=te(t,16),n=this.n.bitLength();if(r.bitLength()>n)return!1;var i=this.doPublic(r).toString(16);if(i.length+3!=n/4)return!1;var o=$e(i.replace(/^1f+00/,""));if(0==o.length)return!1;var s=o[0];return o[1]==function(e){return ue.crypto.Util.hashString(e,s)}(e)},ne.prototype.verifyWithMessageHash=function(e,t){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var r=te(t,16);if(r.bitLength()>this.n.bitLength())return 0;var n=$e(this.doPublic(r).toString(16).replace(/^1f+00/,""));return 0!=n.length&&(n[0],n[1]==e)},ne.prototype.verifyPSS=function(e,t,r,n){var i=function(e){return ue.crypto.Util.hashHex(e,r)}(Ee(e));return void 0===n&&(n=-1),this.verifyWithMessageHashPSS(i,t,r,n)},ne.prototype.verifyWithMessageHashPSS=function(e,t,r,n){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var i,o=new _(t,16),s=function(e){return ue.crypto.Util.hashHex(e,r)},a=_e(e),u=a.length,c=this.n.bitLength()-1,l=Math.ceil(c/8);if(-1===n||void 0===n)n=u;else if(-2===n)n=l-u-2;else if(n<-2)throw new Error("invalid salt length");if(l<u+n+2)throw new Error("data too long");var d=this.doPublic(o).toByteArray();for(i=0;i<d.length;i+=1)d[i]&=255;for(;d.length<l;)d.unshift(0);if(188!==d[l-1])throw new Error("encoded message does not end in 0xbc");var h=(d=String.fromCharCode.apply(String,d)).substr(0,l-u-1),p=d.substr(h.length,u),f=65280>>8*l-c&255;if(0!=(h.charCodeAt(0)&f))throw new Error("bits beyond keysize not zero");var g=We(p,h.length,s),y=[];for(i=0;i<h.length;i+=1)y[i]=h.charCodeAt(i)^g.charCodeAt(i);y[0]&=~f;var v=l-u-n-2;for(i=0;i<v;i+=1)if(0!==y[i])throw new Error("leftmost octets not zero");if(1!==y[v])throw new Error("0x01 marker not found");return p===_e(s(Ee("\0\0\0\0\0\0\0\0"+a+String.fromCharCode.apply(String,y.slice(-n)))))},ne.SALT_LEN_HLEN=-1,ne.SALT_LEN_MAX=-2,ne.SALT_LEN_RECOVER=-2,Je.hex2dn=function(e,t){void 0===t&&(t=0);var r=new Je;return de.getTLV(e,t),r.getX500Name(e).str},Je.hex2rdn=function(e,t){if(void 0===t&&(t=0),"31"!==e.substr(t,2))throw new Error("malformed RDN");for(var r=new Array,n=de.getChildIdx(e,t),i=0;i<n.length;i++)r.push(Je.hex2attrTypeValue(e,n[i]));return(r=r.map((function(e){return e.replace("+","\\+")}))).join("+")},Je.hex2attrTypeValue=function(e,t){var r=de,n=r.getV;if(void 0===t&&(t=0),"30"!==e.substr(t,2))throw new Error("malformed attribute type and value");var i=r.getChildIdx(e,t);2!==i.length||e.substr(i[0],2);var o=n(e,i[0]),s=ue.asn1.ASN1Util.oidHexToInt(o);return ue.asn1.x509.OID.oid2atype(s)+"="+_e(n(e,i[1]))},Je.getPublicKeyFromCertHex=function(e){var t=new Je;return t.readCertHex(e),t.getPublicKey()},Je.getPublicKeyFromCertPEM=function(e){var t=new Je;return t.readCertPEM(e),t.getPublicKey()},Je.getPublicKeyInfoPropOfCertPEM=function(e){var t,r,n=de.getVbyList,i={algparam:null};return(t=new Je).readCertPEM(e),r=t.getPublicKeyHex(),i.keyhex=n(r,0,[1],"03").substr(2),i.algoid=n(r,0,[0,0],"06"),"2a8648ce3d0201"===i.algoid&&(i.algparam=n(r,0,[0,1],"06")),i},Je.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==ue&&ue||(t.KJUR=ue={}),void 0!==ue.jws&&ue.jws||(ue.jws={}),ue.jws.JWS=function(){var e=ue.jws.JWS.isSafeJSONString;this.parseJWS=function(t,r){if(void 0===this.parsedJWS||!r&&void 0===this.parsedJWS.sigvalH){var n=t.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==n)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var i=n[1],o=n[2],s=n[3],a=i+"."+o;if(this.parsedJWS={},this.parsedJWS.headB64U=i,this.parsedJWS.payloadB64U=o,this.parsedJWS.sigvalB64U=s,this.parsedJWS.si=a,!r){var u=we(s),c=te(u,16);this.parsedJWS.sigvalH=u,this.parsedJWS.sigvalBI=c}var l=le(i),d=le(o);if(this.parsedJWS.headS=l,this.parsedJWS.payloadS=d,!e(l,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+l}}},ue.jws.JWS.sign=function(e,t,r,n,i){var o,s,a,u=ue,c=u.jws.JWS,l=c.readSafeJSONString,d=c.isSafeJSONString,h=u.crypto,f=(h.ECDSA,h.Mac),g=h.Signature,y=JSON;if("string"!=typeof t&&"object"!=(void 0===t?"undefined":p(t)))throw"spHeader must be JSON string or object: "+t;if("object"==(void 0===t?"undefined":p(t))&&(s=t,o=y.stringify(s)),"string"==typeof t){if(!d(o=t))throw"JWS Head is not safe JSON string: "+o;s=l(o)}if(a=r,"object"==(void 0===r?"undefined":p(r))&&(a=y.stringify(r)),""!=e&&null!=e||void 0===s.alg||(e=s.alg),""!=e&&null!=e&&void 0===s.alg&&(s.alg=e,o=y.stringify(s)),e!==s.alg)throw"alg and sHeader.alg doesn't match: "+e+"!="+s.alg;var v=null;if(void 0===c.jwsalg2sigalg[e])throw"unsupported alg name: "+e;v=c.jwsalg2sigalg[e];var m=ce(o)+"."+ce(a),w="";if("Hmac"==v.substr(0,4)){if(void 0===n)throw"mac key shall be specified for HS* alg";var b=new f({alg:v,prov:"cryptojs",pass:n});b.updateString(m),w=b.doFinal()}else if(-1!=v.indexOf("withECDSA")){(_=new g({alg:v})).init(n,i),_.updateString(m);var S=_.sign();w=ue.crypto.ECDSA.asn1SigToConcatSig(S)}else{var _;"none"!=v&&((_=new g({alg:v})).init(n,i),_.updateString(m),w=_.sign())}return m+"."+me(w)},ue.jws.JWS.verify=function(e,t,r){var n,i=ue,o=i.jws.JWS,s=o.readSafeJSONString,a=i.crypto,u=a.ECDSA,c=a.Mac,l=a.Signature;void 0!==p(ne)&&(n=ne);var d=e.split(".");if(3!==d.length)return!1;var h,f=d[0]+"."+d[1],g=we(d[2]),y=s(le(d[0])),v=null;if(void 0===y.alg)throw"algorithm not specified in header";if(h=(v=y.alg).substr(0,2),null!=r&&"[object Array]"===Object.prototype.toString.call(r)&&r.length>0&&-1==(":"+r.join(":")+":").indexOf(":"+v+":"))throw"algorithm '"+v+"' not accepted in the list";if("none"!=v&&null===t)throw"key shall be specified to verify.";if("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&(t=Ke.getKey(t)),!("RS"!=h&&"PS"!=h||t instanceof n))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==h&&!(t instanceof u))throw"key shall be a ECDSA obj for ES* algs";var m=null;if(void 0===o.jwsalg2sigalg[y.alg])throw"unsupported alg name: "+v;if("none"==(m=o.jwsalg2sigalg[v]))throw"not supported";if("Hmac"==m.substr(0,4)){if(void 0===t)throw"hexadecimal key shall be specified for HMAC";var w=new c({alg:m,pass:t});return w.updateString(f),g==w.doFinal()}if(-1!=m.indexOf("withECDSA")){var b,S=null;try{S=u.concatSigToASN1Sig(g)}catch(e){return!1}return(b=new l({alg:m})).init(t),b.updateString(f),b.verify(S)}return(b=new l({alg:m})).init(t),b.updateString(f),b.verify(g)},ue.jws.JWS.parse=function(e){var t,r,n,i=e.split("."),o={};if(2!=i.length&&3!=i.length)throw"malformed sJWS: wrong number of '.' splitted elements";return t=i[0],r=i[1],3==i.length&&(n=i[2]),o.headerObj=ue.jws.JWS.readSafeJSONString(le(t)),o.payloadObj=ue.jws.JWS.readSafeJSONString(le(r)),o.headerPP=JSON.stringify(o.headerObj,null,"  "),null==o.payloadObj?o.payloadPP=le(r):o.payloadPP=JSON.stringify(o.payloadObj,null,"  "),void 0!==n&&(o.sigHex=we(n)),o},ue.jws.JWS.verifyJWT=function(e,t,r){var n=ue.jws,i=n.JWS,o=i.readSafeJSONString,s=i.inArray,a=i.includedArray,u=e.split("."),c=u[0],l=u[1],d=(we(u[2]),o(le(c))),h=o(le(l));if(void 0===d.alg)return!1;if(void 0===r.alg)throw"acceptField.alg shall be specified";if(!s(d.alg,r.alg))return!1;if(void 0!==h.iss&&"object"===p(r.iss)&&!s(h.iss,r.iss))return!1;if(void 0!==h.sub&&"object"===p(r.sub)&&!s(h.sub,r.sub))return!1;if(void 0!==h.aud&&"object"===p(r.aud))if("string"==typeof h.aud){if(!s(h.aud,r.aud))return!1}else if("object"==p(h.aud)&&!a(h.aud,r.aud))return!1;var f=n.IntDate.getNow();return void 0!==r.verifyAt&&"number"==typeof r.verifyAt&&(f=r.verifyAt),void 0!==r.gracePeriod&&"number"==typeof r.gracePeriod||(r.gracePeriod=0),!(void 0!==h.exp&&"number"==typeof h.exp&&h.exp+r.gracePeriod<f)&&!(void 0!==h.nbf&&"number"==typeof h.nbf&&f<h.nbf-r.gracePeriod)&&!(void 0!==h.iat&&"number"==typeof h.iat&&f<h.iat-r.gracePeriod)&&(void 0===h.jti||void 0===r.jti||h.jti===r.jti)&&!!i.verify(e,t,r.alg)},ue.jws.JWS.includedArray=function(e,t){var r=ue.jws.JWS.inArray;if(null===e)return!1;if("object"!==(void 0===e?"undefined":p(e)))return!1;if("number"!=typeof e.length)return!1;for(var n=0;n<e.length;n++)if(!r(e[n],t))return!1;return!0},ue.jws.JWS.inArray=function(e,t){if(null===t)return!1;if("object"!==(void 0===t?"undefined":p(t)))return!1;if("number"!=typeof t.length)return!1;for(var r=0;r<t.length;r++)if(t[r]==e)return!0;return!1},ue.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},ue.jws.JWS.isSafeJSONString=function(e,t,r){var n=null;try{return"object"!=(void 0===(n=ae(e))?"undefined":p(n))||n.constructor===Array?0:(t&&(t[r]=n),1)}catch(e){return 0}},ue.jws.JWS.readSafeJSONString=function(e){var t=null;try{return"object"!=(void 0===(t=ae(e))?"undefined":p(t))||t.constructor===Array?null:t}catch(e){return null}},ue.jws.JWS.getEncodedSignatureValueFromJWS=function(e){var t=e.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==t)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return t[1]},ue.jws.JWS.getJWKthumbprint=function(e){if("RSA"!==e.kty&&"EC"!==e.kty&&"oct"!==e.kty)throw"unsupported algorithm for JWK Thumprint";var t="{";if("RSA"===e.kty){if("string"!=typeof e.n||"string"!=typeof e.e)throw"wrong n and e value for RSA key";t+='"e":"'+e.e+'",',t+='"kty":"'+e.kty+'",',t+='"n":"'+e.n+'"}'}else if("EC"===e.kty){if("string"!=typeof e.crv||"string"!=typeof e.x||"string"!=typeof e.y)throw"wrong crv, x and y value for EC key";t+='"crv":"'+e.crv+'",',t+='"kty":"'+e.kty+'",',t+='"x":"'+e.x+'",',t+='"y":"'+e.y+'"}'}else if("oct"===e.kty){if("string"!=typeof e.k)throw"wrong k value for oct(symmetric) key";t+='"kty":"'+e.kty+'",',t+='"k":"'+e.k+'"}'}var r=Ee(t);return me(ue.crypto.Util.hashHex(r,"sha256"))},ue.jws.IntDate={},ue.jws.IntDate.get=function(e){var t=ue.jws.IntDate,r=t.getNow,n=t.getZulu;if("now"==e)return r();if("now + 1hour"==e)return r()+3600;if("now + 1day"==e)return r()+86400;if("now + 1month"==e)return r()+2592e3;if("now + 1year"==e)return r()+31536e3;if(e.match(/Z$/))return n(e);if(e.match(/^[0-9]+$/))return parseInt(e);throw"unsupported format: "+e},ue.jws.IntDate.getZulu=function(e){return Re(e)},ue.jws.IntDate.getNow=function(){return~~(new Date/1e3)},ue.jws.IntDate.intDate2UTCString=function(e){return new Date(1e3*e).toUTCString()},ue.jws.IntDate.intDate2Zulu=function(e){var t=new Date(1e3*e);return("0000"+t.getUTCFullYear()).slice(-4)+("00"+(t.getUTCMonth()+1)).slice(-2)+("00"+t.getUTCDate()).slice(-2)+("00"+t.getUTCHours()).slice(-2)+("00"+t.getUTCMinutes()).slice(-2)+("00"+t.getUTCSeconds()).slice(-2)+"Z"},t.SecureRandom=ee,t.rng_seed_time=z,t.BigInteger=_,t.RSAKey=ne;var qe=ue.crypto.EDSA;t.EDSA=qe;var ze=ue.crypto.DSA;t.DSA=ze;var Ge=ue.crypto.Signature;t.Signature=Ge;var Ye=ue.crypto.MessageDigest;t.MessageDigest=Ye;var Xe=ue.crypto.Mac;t.Mac=Xe;var Ze=ue.crypto.Cipher;t.Cipher=Ze,t.KEYUTIL=Ke,t.ASN1HEX=de,t.X509=Je,t.CryptoJS=y,t.b64tohex=b,t.b64toBA=S,t.stoBA=he,t.BAtos=pe,t.BAtohex=fe,t.stohex=ge,t.stob64=function(e){return w(ge(e))},t.stob64u=function(e){return ye(w(ge(e)))},t.b64utos=function(e){return pe(S(ve(e)))},t.b64tob64u=ye,t.b64utob64=ve,t.hex2b64=w,t.hextob64u=me,t.b64utohex=we,t.utf8tob64u=ce,t.b64utoutf8=le,t.utf8tob64=function(e){return w(Te(Le(e)))},t.b64toutf8=function(e){return decodeURIComponent(Ie(b(e)))},t.utf8tohex=be,t.hextoutf8=Se,t.hextorstr=_e,t.rstrtohex=Ee,t.hextob64=Ae,t.hextob64nl=ke,t.b64nltohex=Fe,t.hextopem=Ce,t.pemtohex=Pe,t.hextoArrayBuffer=function(e){if(e.length%2!=0)throw"input is not even length";if(null==e.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var t=new ArrayBuffer(e.length/2),r=new DataView(t),n=0;n<e.length/2;n++)r.setUint8(n,parseInt(e.substr(2*n,2),16));return t},t.ArrayBuffertohex=function(e){for(var t="",r=new DataView(e),n=0;n<e.byteLength;n++)t+=("00"+r.getUint8(n).toString(16)).slice(-2);return t},t.zulutomsec=xe,t.zulutosec=Re,t.zulutodate=function(e){return new Date(xe(e))},t.datetozulu=function(e,t,r){var n,i=e.getUTCFullYear();if(t){if(i<1950||2049<i)throw"not proper year for UTCTime: "+i;n=(""+i).slice(-2)}else n=("000"+i).slice(-4);if(n+=("0"+(e.getUTCMonth()+1)).slice(-2),n+=("0"+e.getUTCDate()).slice(-2),n+=("0"+e.getUTCHours()).slice(-2),n+=("0"+e.getUTCMinutes()).slice(-2),n+=("0"+e.getUTCSeconds()).slice(-2),r){var o=e.getUTCMilliseconds();0!==o&&(n+="."+(o=(o=("00"+o).slice(-3)).replace(/0+$/g,"")))}return n+"Z"},t.uricmptohex=Te,t.hextouricmp=Ie,t.ipv6tohex=Oe,t.hextoipv6=Ue,t.hextoip=De,t.iptohex=function(e){var t="malformed IP address";if(!(e=e.toLowerCase(e)).match(/^[0-9.]+$/)){if(e.match(/^[0-9a-f:]+$/)&&-1!==e.indexOf(":"))return Oe(e);throw t}var r=e.split(".");if(4!==r.length)throw t;var n="";try{for(var i=0;i<4;i++)n+=("0"+parseInt(r[i]).toString(16)).slice(-2);return n}catch(e){throw t}},t.encodeURIComponentAll=Le,t.newline_toUnix=function(e){return e.replace(/\r\n/gm,"\n")},t.newline_toDos=function(e){return(e=e.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},t.hextoposhex=He,t.intarystrtohex=function(e){e=(e=(e=e.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return e.split(/,/).map((function(e,t,r){var n=parseInt(e);if(n<0||255<n)throw"integer not in range 0-255";return("00"+n.toString(16)).slice(-2)})).join("")}catch(e){throw"malformed integer array string: "+e}},t.strdiffidx=function(e,t){var r=e.length;e.length>t.length&&(r=t.length);for(var n=0;n<r;n++)if(e.charCodeAt(n)!=t.charCodeAt(n))return n;return e.length!=t.length?r:-1},t.KJUR=ue;var Qe=ue.crypto;t.crypto=Qe;var et=ue.asn1;t.asn1=et;var tt=ue.jws;t.jws=tt;var rt=ue.lang;t.lang=rt}).call(this,r(28).Buffer)},function(e,t,r){"use strict";(function(e){var n=r(30),i=r(31),o=r(32);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return c(this,e,t,r)}function c(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=h(e,t),e}(e,t,r,n):"string"==typeof t?function(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|f(t,r),i=(e=a(e,n)).write(t,r);return i!==n&&(e=e.slice(0,i)),e}(e,t,r):function(e,t){if(u.isBuffer(t)){var r=0|p(t.length);return 0===(e=a(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?a(e,0):h(e,t);if("Buffer"===t.type&&o(t.data))return h(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(l(t),e=a(e,t<0?0:0|p(t)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function h(e,t){var r=t.length<0?0:0|p(t.length);e=a(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function p(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function f(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return K(e).length;default:if(n)return B(e).length;t=(""+t).toLowerCase(),n=!0}}function g(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,r);case"utf8":case"utf-8":return F(this,t,r);case"ascii":return P(this,t,r);case"latin1":case"binary":return x(this,t,r);case"base64":return k(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function v(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:m(e,t,r,n,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):m(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,r,n,i){var o,s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var l=-1;for(o=r;o<a;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){for(var d=!0,h=0;h<u;h++)if(c(e,o+h)!==c(t,h)){d=!1;break}if(d)return o}return-1}function w(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[r+s]=a}return s}function b(e,t,r,n){return V(B(t,e.length-r),e,r,n)}function S(e,t,r,n){return V(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function _(e,t,r,n){return S(e,t,r,n)}function E(e,t,r,n){return V(K(t),e,r,n)}function A(e,t,r,n){return V(function(e,t){for(var r,n,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function k(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function F(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,s,a,u,c=e[i],l=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=r)switch(d){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,d=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=d}return function(e){var t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=C));return r}(n)}t.Buffer=u,t.SlowBuffer=function(e){return+e!=e&&(e=0),u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,r){return c(null,e,t,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,r){return function(e,t,r,n){return l(t),t<=0?a(e,t):void 0!==r?"string"==typeof n?a(e,t).fill(r,n):a(e,t).fill(r):a(e,t)}(null,e,t,r)},u.allocUnsafe=function(e){return d(null,e)},u.allocUnsafeSlow=function(e){return d(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=u.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var s=e[r];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},u.byteLength=f,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?F(this,0,e):g.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,r,n,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(o,s),c=this.slice(n,i),l=e.slice(t,r),d=0;d<a;++d)if(c[d]!==l[d]){o=c[d],s=l[d];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return w(this,e,t,r);case"utf8":case"utf-8":return b(this,e,t,r);case"ascii":return S(this,e,t,r);case"latin1":case"binary":return _(this,e,t,r);case"base64":return E(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function P(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function x(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function R(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=M(e[o]);return i}function T(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function I(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,r,n,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function U(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function D(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function j(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function L(e,t,r,n,o){return o||j(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function N(e,t,r,n,o){return o||j(e,0,r,8),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;r=new u(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},u.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},u.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUInt8=function(e,t){return t||I(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||I(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||I(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||I(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){t||I(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||I(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||I(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||I(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||I(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,r,n){e=+e,t|=0,r|=0,n||O(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},u.prototype.writeUIntBE=function(e,t,r,n){e=+e,t|=0,r|=0,n||O(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},u.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):D(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);O(this,e,t,r,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);O(this,e,t,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):D(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,r){return L(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return L(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return N(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return N(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var s=u.isBuffer(e)?e:B(new u(e,n).toString()),a=s.length;for(o=0;o<r-t;++o)this[o+t]=s[o%a]}return this};var H=/[^+\/0-9A-Za-z-_]/g;function M(e){return e<16?"0"+e.toString(16):e.toString(16)}function B(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function K(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(H,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function V(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}}).call(this,r(29))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";t.byteLength=function(e){var t=c(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,n=c(e),s=n[0],a=n[1],u=new o(function(e,t,r){return 3*(t+r)/4-r}(0,s,a)),l=0,d=a>0?s-4:s;for(r=0;r<d;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;return 2===a&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,u[l++]=255&t),1===a&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t),u},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],s=16383,a=0,u=r-i;a<u;a+=s)o.push(l(e,a,a+s>u?u:a+s));return 1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)n[a]=s[a],i[s.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e,t,r){for(var i,o,s=[],a=t;a<r;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,l=-7,d=r?i-1:0,h=r?-1:1,p=e[t+d];for(d+=h,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+e[t+d],d+=h,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+e[t+d],d+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=c}return(p?-1:1)*s*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,d=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,f=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+d>=1?h/u:h*Math.pow(2,1-d))*u>=2&&(s++,u/=2),s+d>=l?(a=0,s=l):s+d>=1?(a=(t*u-1)*Math.pow(2,i),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[r+p]=255&a,p+=f,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[r+p]=255&s,p+=f,s/=256,c-=8);e[r+p-f]|=128*g}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.jws,r=e.KeyUtil,i=e.X509,o=e.crypto,s=e.hextob64u,a=e.b64tohex,u=e.AllowedSigningAlgs;return function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.parseJwt=function e(r){n.Log.debug("JoseUtil.parseJwt");try{var i=t.JWS.parse(r);return{header:i.headerObj,payload:i.payloadObj}}catch(e){n.Log.error(e)}},e.validateJwt=function(t,o,s,u,c,l,d){n.Log.debug("JoseUtil.validateJwt");try{if("RSA"===o.kty)if(o.e&&o.n)o=r.getKey(o);else{if(!o.x5c||!o.x5c.length)return n.Log.error("JoseUtil.validateJwt: RSA key missing key material",o),Promise.reject(new Error("RSA key missing key material"));var h=a(o.x5c[0]);o=i.getPublicKeyFromCertHex(h)}else{if("EC"!==o.kty)return n.Log.error("JoseUtil.validateJwt: Unsupported key type",o&&o.kty),Promise.reject(new Error(o.kty));if(!(o.crv&&o.x&&o.y))return n.Log.error("JoseUtil.validateJwt: EC key missing key material",o),Promise.reject(new Error("EC key missing key material"));o=r.getKey(o)}return e._validateJwt(t,o,s,u,c,l,d)}catch(e){return n.Log.error(e&&e.message||e),Promise.reject("JWT validation failed")}},e.validateJwtAttributes=function(t,r,i,o,s,a){o||(o=0),s||(s=parseInt(Date.now()/1e3));var u=e.parseJwt(t).payload;if(!u.iss)return n.Log.error("JoseUtil._validateJwt: issuer was not provided"),Promise.reject(new Error("issuer was not provided"));if(u.iss!==r)return n.Log.error("JoseUtil._validateJwt: Invalid issuer in token",u.iss),Promise.reject(new Error("Invalid issuer in token: "+u.iss));if(!u.aud)return n.Log.error("JoseUtil._validateJwt: aud was not provided"),Promise.reject(new Error("aud was not provided"));if(!(u.aud===i||Array.isArray(u.aud)&&u.aud.indexOf(i)>=0))return n.Log.error("JoseUtil._validateJwt: Invalid audience in token",u.aud),Promise.reject(new Error("Invalid audience in token: "+u.aud));if(u.azp&&u.azp!==i)return n.Log.error("JoseUtil._validateJwt: Invalid azp in token",u.azp),Promise.reject(new Error("Invalid azp in token: "+u.azp));if(!a){var c=s+o,l=s-o;if(!u.iat)return n.Log.error("JoseUtil._validateJwt: iat was not provided"),Promise.reject(new Error("iat was not provided"));if(c<u.iat)return n.Log.error("JoseUtil._validateJwt: iat is in the future",u.iat),Promise.reject(new Error("iat is in the future: "+u.iat));if(u.nbf&&c<u.nbf)return n.Log.error("JoseUtil._validateJwt: nbf is in the future",u.nbf),Promise.reject(new Error("nbf is in the future: "+u.nbf));if(!u.exp)return n.Log.error("JoseUtil._validateJwt: exp was not provided"),Promise.reject(new Error("exp was not provided"));if(u.exp<l)return n.Log.error("JoseUtil._validateJwt: exp is in the past",u.exp),Promise.reject(new Error("exp is in the past:"+u.exp))}return Promise.resolve(u)},e._validateJwt=function(r,i,o,s,a,c,l){return e.validateJwtAttributes(r,o,s,a,c,l).then((function(e){try{return t.JWS.verify(r,i,u)?e:(n.Log.error("JoseUtil._validateJwt: signature validation failed"),Promise.reject(new Error("signature validation failed")))}catch(e){return n.Log.error(e&&e.message||e),Promise.reject(new Error("signature validation failed"))}}))},e.hashString=function e(t,r){try{return o.Util.hashString(t,r)}catch(e){n.Log.error(e)}},e.hexToBase64Url=function e(t){try{return s(t)}catch(e){n.Log.error(e)}},e}()};var n=r(0);e.exports=t.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SigninResponse=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(3);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.SigninResponse=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";o(this,e);var n=i.UrlUtility.parseUrlFragment(t,r);this.error=n.error,this.error_description=n.error_description,this.error_uri=n.error_uri,this.code=n.code,this.state=n.state,this.id_token=n.id_token,this.session_state=n.session_state,this.access_token=n.access_token,this.token_type=n.token_type,this.scope=n.scope,this.profile=void 0,this.expires_in=n.expires_in}return n(e,[{key:"expires_in",get:function(){if(this.expires_at){var e=parseInt(Date.now()/1e3);return this.expires_at-e}},set:function(e){var t=parseInt(e);if("number"==typeof t&&t>0){var r=parseInt(Date.now()/1e3);this.expires_at=r+t}}},{key:"expired",get:function(){var e=this.expires_in;if(void 0!==e)return e<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}},{key:"isOpenIdConnect",get:function(){return this.scopes.indexOf("openid")>=0||!!this.id_token}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignoutRequest=void 0;var n=r(0),i=r(3),o=r(9);t.SignoutRequest=function e(t){var r=t.url,s=t.id_token_hint,a=t.post_logout_redirect_uri,u=t.data,c=t.extraQueryParams,l=t.request_type;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!r)throw n.Log.error("SignoutRequest.ctor: No url passed"),new Error("url");for(var d in s&&(r=i.UrlUtility.addQueryParam(r,"id_token_hint",s)),a&&(r=i.UrlUtility.addQueryParam(r,"post_logout_redirect_uri",a),u&&(this.state=new o.State({data:u,request_type:l}),r=i.UrlUtility.addQueryParam(r,"state",this.state.id))),c)r=i.UrlUtility.addQueryParam(r,d,c[d]);this.url=r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignoutResponse=void 0;var n=r(3);t.SignoutResponse=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=n.UrlUtility.parseUrlFragment(t,"?");this.error=r.error,this.error_description=r.error_description,this.error_uri=r.error_uri,this.state=r.state}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InMemoryWebStorage=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0);t.InMemoryWebStorage=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data={}}return e.prototype.getItem=function(e){return i.Log.debug("InMemoryWebStorage.getItem",e),this._data[e]},e.prototype.setItem=function(e,t){i.Log.debug("InMemoryWebStorage.setItem",e),this._data[e]=t},e.prototype.removeItem=function(e){i.Log.debug("InMemoryWebStorage.removeItem",e),delete this._data[e]},e.prototype.key=function(e){return Object.getOwnPropertyNames(this._data)[e]},n(e,[{key:"length",get:function(){return Object.getOwnPropertyNames(this._data).length}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserManager=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0),o=r(10),s=r(39),a=r(15),u=r(45),c=r(47),l=r(18),d=r(8),h=r(20),p=r(11),f=r(4);function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.UserManager=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.SilentRenewService,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.SessionMonitor,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h.TokenRevocationClient,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:p.TokenClient,v=arguments.length>5&&void 0!==arguments[5]?arguments[5]:f.JoseUtil;g(this,t),r instanceof s.UserManagerSettings||(r=new s.UserManagerSettings(r));var m=y(this,e.call(this,r));return m._events=new u.UserManagerEvents(r),m._silentRenewService=new n(m),m.settings.automaticSilentRenew&&(i.Log.debug("UserManager.ctor: automaticSilentRenew is configured, setting up silent renew"),m.startSilentRenew()),m.settings.monitorSession&&(i.Log.debug("UserManager.ctor: monitorSession is configured, setting up session monitor"),m._sessionMonitor=new o(m)),m._tokenRevocationClient=new a(m._settings),m._tokenClient=new d(m._settings),m._joseUtil=v,m}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getUser=function(){var e=this;return this._loadUser().then((function(t){return t?(i.Log.info("UserManager.getUser: user loaded"),e._events.load(t,!1),t):(i.Log.info("UserManager.getUser: user not found in storage"),null)}))},t.prototype.removeUser=function(){var e=this;return this.storeUser(null).then((function(){i.Log.info("UserManager.removeUser: user removed from storage"),e._events.unload()}))},t.prototype.signinRedirect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="si:r";var t={useReplaceToNavigate:e.useReplaceToNavigate};return this._signinStart(e,this._redirectNavigator,t).then((function(){i.Log.info("UserManager.signinRedirect: successful")}))},t.prototype.signinRedirectCallback=function(e){return this._signinEnd(e||this._redirectNavigator.url).then((function(e){return e.profile&&e.profile.sub?i.Log.info("UserManager.signinRedirectCallback: successful, signed in sub: ",e.profile.sub):i.Log.info("UserManager.signinRedirectCallback: no sub"),e}))},t.prototype.signinPopup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="si:p";var t=e.redirect_uri||this.settings.popup_redirect_uri||this.settings.redirect_uri;return t?(e.redirect_uri=t,e.display="popup",this._signin(e,this._popupNavigator,{startUrl:t,popupWindowFeatures:e.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:e.popupWindowTarget||this.settings.popupWindowTarget}).then((function(e){return e&&(e.profile&&e.profile.sub?i.Log.info("UserManager.signinPopup: signinPopup successful, signed in sub: ",e.profile.sub):i.Log.info("UserManager.signinPopup: no sub")),e}))):(i.Log.error("UserManager.signinPopup: No popup_redirect_uri or redirect_uri configured"),Promise.reject(new Error("No popup_redirect_uri or redirect_uri configured")))},t.prototype.signinPopupCallback=function(e){return this._signinCallback(e,this._popupNavigator).then((function(e){return e&&(e.profile&&e.profile.sub?i.Log.info("UserManager.signinPopupCallback: successful, signed in sub: ",e.profile.sub):i.Log.info("UserManager.signinPopupCallback: no sub")),e})).catch((function(e){i.Log.error(e.message)}))},t.prototype.signinSilent=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=Object.assign({},t),this._loadUser().then((function(r){return r&&r.refresh_token?(t.refresh_token=r.refresh_token,e._useRefreshToken(t)):(t.request_type="si:s",t.id_token_hint=t.id_token_hint||e.settings.includeIdTokenInSilentRenew&&r&&r.id_token,r&&e._settings.validateSubOnSilentRenew&&(i.Log.debug("UserManager.signinSilent, subject prior to silent renew: ",r.profile.sub),t.current_sub=r.profile.sub),e._signinSilentIframe(t))}))},t.prototype._useRefreshToken=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._tokenClient.exchangeRefreshToken(t).then((function(t){return t?t.access_token?e._loadUser().then((function(r){if(r){var n=Promise.resolve();return t.id_token&&(n=e._validateIdTokenFromTokenRefreshToken(r.profile,t.id_token)),n.then((function(){return i.Log.debug("UserManager._useRefreshToken: refresh token response success"),r.id_token=t.id_token||r.id_token,r.access_token=t.access_token,r.refresh_token=t.refresh_token||r.refresh_token,r.expires_in=t.expires_in,e.storeUser(r).then((function(){return e._events.load(r),r}))}))}return null})):(i.Log.error("UserManager._useRefreshToken: No access token returned from token endpoint"),Promise.reject("No access token returned from token endpoint")):(i.Log.error("UserManager._useRefreshToken: No response returned from token endpoint"),Promise.reject("No response returned from token endpoint"))}))},t.prototype._validateIdTokenFromTokenRefreshToken=function(e,t){var r=this;return this._metadataService.getIssuer().then((function(n){return r.settings.getEpochTime().then((function(o){return r._joseUtil.validateJwtAttributes(t,n,r._settings.client_id,r._settings.clockSkew,o).then((function(t){return t?t.sub!==e.sub?(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: sub in id_token does not match current sub"),Promise.reject(new Error("sub in id_token does not match current sub"))):t.auth_time&&t.auth_time!==e.auth_time?(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: auth_time in id_token does not match original auth_time"),Promise.reject(new Error("auth_time in id_token does not match original auth_time"))):t.azp&&t.azp!==e.azp?(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp in id_token does not match original azp"),Promise.reject(new Error("azp in id_token does not match original azp"))):!t.azp&&e.azp?(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp not in id_token, but present in original id_token"),Promise.reject(new Error("azp not in id_token, but present in original id_token"))):void 0:(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: Failed to validate id_token"),Promise.reject(new Error("Failed to validate id_token")))}))}))}))},t.prototype._signinSilentIframe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return t?(e.redirect_uri=t,e.prompt=e.prompt||"none",this._signin(e,this._iframeNavigator,{startUrl:t,silentRequestTimeout:e.silentRequestTimeout||this.settings.silentRequestTimeout}).then((function(e){return e&&(e.profile&&e.profile.sub?i.Log.info("UserManager.signinSilent: successful, signed in sub: ",e.profile.sub):i.Log.info("UserManager.signinSilent: no sub")),e}))):(i.Log.error("UserManager.signinSilent: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},t.prototype.signinSilentCallback=function(e){return this._signinCallback(e,this._iframeNavigator).then((function(e){return e&&(e.profile&&e.profile.sub?i.Log.info("UserManager.signinSilentCallback: successful, signed in sub: ",e.profile.sub):i.Log.info("UserManager.signinSilentCallback: no sub")),e}))},t.prototype.signinCallback=function(e){var t=this;return this.readSigninResponseState(e).then((function(r){var n=r.state;return r.response,"si:r"===n.request_type?t.signinRedirectCallback(e):"si:p"===n.request_type?t.signinPopupCallback(e):"si:s"===n.request_type?t.signinSilentCallback(e):Promise.reject(new Error("invalid response_type in state"))}))},t.prototype.signoutCallback=function(e,t){var r=this;return this.readSignoutResponseState(e).then((function(n){var i=n.state,o=n.response;return i?"so:r"===i.request_type?r.signoutRedirectCallback(e):"so:p"===i.request_type?r.signoutPopupCallback(e,t):Promise.reject(new Error("invalid response_type in state")):o}))},t.prototype.querySessionStatus=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(t=Object.assign({},t)).request_type="si:s";var r=t.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return r?(t.redirect_uri=r,t.prompt="none",t.response_type=t.response_type||this.settings.query_status_response_type,t.scope=t.scope||"openid",t.skipUserInfo=!0,this._signinStart(t,this._iframeNavigator,{startUrl:r,silentRequestTimeout:t.silentRequestTimeout||this.settings.silentRequestTimeout}).then((function(t){return e.processSigninResponse(t.url).then((function(e){if(i.Log.debug("UserManager.querySessionStatus: got signin response"),e.session_state&&e.profile.sub)return i.Log.info("UserManager.querySessionStatus: querySessionStatus success for sub: ",e.profile.sub),{session_state:e.session_state,sub:e.profile.sub,sid:e.profile.sid};i.Log.info("querySessionStatus successful, user not authenticated")})).catch((function(t){if(t.session_state&&e.settings.monitorAnonymousSession&&("login_required"==t.message||"consent_required"==t.message||"interaction_required"==t.message||"account_selection_required"==t.message))return i.Log.info("UserManager.querySessionStatus: querySessionStatus success for anonymous user"),{session_state:t.session_state};throw t}))}))):(i.Log.error("UserManager.querySessionStatus: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},t.prototype._signin=function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._signinStart(e,t,n).then((function(t){return r._signinEnd(t.url,e)}))},t.prototype._signinStart=function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.prepare(n).then((function(t){return i.Log.debug("UserManager._signinStart: got navigator window handle"),r.createSigninRequest(e).then((function(e){return i.Log.debug("UserManager._signinStart: got signin request"),n.url=e.url,n.id=e.state.id,t.navigate(n)})).catch((function(e){throw t.close&&(i.Log.debug("UserManager._signinStart: Error after preparing navigator, closing navigator window"),t.close()),e}))}))},t.prototype._signinEnd=function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.processSigninResponse(e).then((function(e){i.Log.debug("UserManager._signinEnd: got signin response");var n=new a.User(e);if(r.current_sub){if(r.current_sub!==n.profile.sub)return i.Log.debug("UserManager._signinEnd: current user does not match user returned from signin. sub from signin: ",n.profile.sub),Promise.reject(new Error("login_required"));i.Log.debug("UserManager._signinEnd: current user matches user returned from signin")}return t.storeUser(n).then((function(){return i.Log.debug("UserManager._signinEnd: user stored"),t._events.load(n),n}))}))},t.prototype._signinCallback=function(e,t){i.Log.debug("UserManager._signinCallback");var r="query"===this._settings.response_mode||!this._settings.response_mode&&d.SigninRequest.isCode(this._settings.response_type)?"?":"#";return t.callback(e,void 0,r)},t.prototype.signoutRedirect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="so:r";var t=e.post_logout_redirect_uri||this.settings.post_logout_redirect_uri;t&&(e.post_logout_redirect_uri=t);var r={useReplaceToNavigate:e.useReplaceToNavigate};return this._signoutStart(e,this._redirectNavigator,r).then((function(){i.Log.info("UserManager.signoutRedirect: successful")}))},t.prototype.signoutRedirectCallback=function(e){return this._signoutEnd(e||this._redirectNavigator.url).then((function(e){return i.Log.info("UserManager.signoutRedirectCallback: successful"),e}))},t.prototype.signoutPopup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="so:p";var t=e.post_logout_redirect_uri||this.settings.popup_post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return e.post_logout_redirect_uri=t,e.display="popup",e.post_logout_redirect_uri&&(e.state=e.state||{}),this._signout(e,this._popupNavigator,{startUrl:t,popupWindowFeatures:e.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:e.popupWindowTarget||this.settings.popupWindowTarget}).then((function(){i.Log.info("UserManager.signoutPopup: successful")}))},t.prototype.signoutPopupCallback=function(e,t){return void 0===t&&"boolean"==typeof e&&(t=e,e=null),this._popupNavigator.callback(e,t,"?").then((function(){i.Log.info("UserManager.signoutPopupCallback: successful")}))},t.prototype._signout=function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._signoutStart(e,t,n).then((function(e){return r._signoutEnd(e.url)}))},t.prototype._signoutStart=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,r=arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.prepare(n).then((function(r){return i.Log.debug("UserManager._signoutStart: got navigator window handle"),t._loadUser().then((function(o){return i.Log.debug("UserManager._signoutStart: loaded current user from storage"),(t._settings.revokeAccessTokenOnSignout?t._revokeInternal(o):Promise.resolve()).then((function(){var s=e.id_token_hint||o&&o.id_token;return s&&(i.Log.debug("UserManager._signoutStart: Setting id_token into signout request"),e.id_token_hint=s),t.removeUser().then((function(){return i.Log.debug("UserManager._signoutStart: user removed, creating signout request"),t.createSignoutRequest(e).then((function(e){return i.Log.debug("UserManager._signoutStart: got signout request"),n.url=e.url,e.state&&(n.id=e.state.id),r.navigate(n)}))}))}))})).catch((function(e){throw r.close&&(i.Log.debug("UserManager._signoutStart: Error after preparing navigator, closing navigator window"),r.close()),e}))}))},t.prototype._signoutEnd=function(e){return this.processSignoutResponse(e).then((function(e){return i.Log.debug("UserManager._signoutEnd: got signout response"),e}))},t.prototype.revokeAccessToken=function(){var e=this;return this._loadUser().then((function(t){return e._revokeInternal(t,!0).then((function(r){if(r)return i.Log.debug("UserManager.revokeAccessToken: removing token properties from user and re-storing"),t.access_token=null,t.refresh_token=null,t.expires_at=null,t.token_type=null,e.storeUser(t).then((function(){i.Log.debug("UserManager.revokeAccessToken: user stored"),e._events.load(t)}))}))})).then((function(){i.Log.info("UserManager.revokeAccessToken: access token revoked successfully")}))},t.prototype._revokeInternal=function(e,t){var r=this;if(e){var n=e.access_token,o=e.refresh_token;return this._revokeAccessTokenInternal(n,t).then((function(e){return r._revokeRefreshTokenInternal(o,t).then((function(t){return e||t||i.Log.debug("UserManager.revokeAccessToken: no need to revoke due to no token(s), or JWT format"),e||t}))}))}return Promise.resolve(!1)},t.prototype._revokeAccessTokenInternal=function(e,t){return!e||e.indexOf(".")>=0?Promise.resolve(!1):this._tokenRevocationClient.revoke(e,t).then((function(){return!0}))},t.prototype._revokeRefreshTokenInternal=function(e,t){return e?this._tokenRevocationClient.revoke(e,t,"refresh_token").then((function(){return!0})):Promise.resolve(!1)},t.prototype.startSilentRenew=function(){this._silentRenewService.start()},t.prototype.stopSilentRenew=function(){this._silentRenewService.stop()},t.prototype._loadUser=function(){return this._userStore.get(this._userStoreKey).then((function(e){return e?(i.Log.debug("UserManager._loadUser: user storageString loaded"),a.User.fromStorageString(e)):(i.Log.debug("UserManager._loadUser: no user storageString"),null)}))},t.prototype.storeUser=function(e){if(e){i.Log.debug("UserManager.storeUser: storing user");var t=e.toStorageString();return this._userStore.set(this._userStoreKey,t)}return i.Log.debug("storeUser.storeUser: removing user"),this._userStore.remove(this._userStoreKey)},n(t,[{key:"_redirectNavigator",get:function(){return this.settings.redirectNavigator}},{key:"_popupNavigator",get:function(){return this.settings.popupNavigator}},{key:"_iframeNavigator",get:function(){return this.settings.iframeNavigator}},{key:"_userStore",get:function(){return this.settings.userStore}},{key:"events",get:function(){return this._events}},{key:"_userStoreKey",get:function(){return"user:"+this.settings.authority+":"+this.settings.client_id}}]),t}(o.OidcClient)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserManagerSettings=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=(r(0),r(5)),o=r(40),s=r(41),a=r(43),u=r(6),c=r(1),l=r(8);function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.UserManagerSettings=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.popup_redirect_uri,i=r.popup_post_logout_redirect_uri,p=r.popupWindowFeatures,f=r.popupWindowTarget,g=r.silent_redirect_uri,y=r.silentRequestTimeout,v=r.automaticSilentRenew,m=void 0!==v&&v,w=r.validateSubOnSilentRenew,b=void 0!==w&&w,S=r.includeIdTokenInSilentRenew,_=void 0===S||S,E=r.monitorSession,A=void 0===E||E,k=r.monitorAnonymousSession,F=void 0!==k&&k,C=r.checkSessionInterval,P=void 0===C?2e3:C,x=r.stopCheckSessionOnError,R=void 0===x||x,T=r.query_status_response_type,I=r.revokeAccessTokenOnSignout,O=void 0!==I&&I,U=r.accessTokenExpiringNotificationTime,D=void 0===U?60:U,j=r.redirectNavigator,L=void 0===j?new o.RedirectNavigator:j,N=r.popupNavigator,H=void 0===N?new s.PopupNavigator:N,M=r.iframeNavigator,B=void 0===M?new a.IFrameNavigator:M,K=r.userStore,V=void 0===K?new u.WebStorageStateStore({store:c.Global.sessionStorage}):K;d(this,t);var W=h(this,e.call(this,arguments[0]));return W._popup_redirect_uri=n,W._popup_post_logout_redirect_uri=i,W._popupWindowFeatures=p,W._popupWindowTarget=f,W._silent_redirect_uri=g,W._silentRequestTimeout=y,W._automaticSilentRenew=m,W._validateSubOnSilentRenew=b,W._includeIdTokenInSilentRenew=_,W._accessTokenExpiringNotificationTime=D,W._monitorSession=A,W._monitorAnonymousSession=F,W._checkSessionInterval=P,W._stopCheckSessionOnError=R,T?W._query_status_response_type=T:arguments[0]&&arguments[0].response_type?W._query_status_response_type=l.SigninRequest.isOidc(arguments[0].response_type)?"id_token":"code":W._query_status_response_type="id_token",W._revokeAccessTokenOnSignout=O,W._redirectNavigator=L,W._popupNavigator=H,W._iframeNavigator=B,W._userStore=V,W}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"popup_redirect_uri",get:function(){return this._popup_redirect_uri}},{key:"popup_post_logout_redirect_uri",get:function(){return this._popup_post_logout_redirect_uri}},{key:"popupWindowFeatures",get:function(){return this._popupWindowFeatures}},{key:"popupWindowTarget",get:function(){return this._popupWindowTarget}},{key:"silent_redirect_uri",get:function(){return this._silent_redirect_uri}},{key:"silentRequestTimeout",get:function(){return this._silentRequestTimeout}},{key:"automaticSilentRenew",get:function(){return this._automaticSilentRenew}},{key:"validateSubOnSilentRenew",get:function(){return this._validateSubOnSilentRenew}},{key:"includeIdTokenInSilentRenew",get:function(){return this._includeIdTokenInSilentRenew}},{key:"accessTokenExpiringNotificationTime",get:function(){return this._accessTokenExpiringNotificationTime}},{key:"monitorSession",get:function(){return this._monitorSession}},{key:"monitorAnonymousSession",get:function(){return this._monitorAnonymousSession}},{key:"checkSessionInterval",get:function(){return this._checkSessionInterval}},{key:"stopCheckSessionOnError",get:function(){return this._stopCheckSessionOnError}},{key:"query_status_response_type",get:function(){return this._query_status_response_type}},{key:"revokeAccessTokenOnSignout",get:function(){return this._revokeAccessTokenOnSignout}},{key:"redirectNavigator",get:function(){return this._redirectNavigator}},{key:"popupNavigator",get:function(){return this._popupNavigator}},{key:"iframeNavigator",get:function(){return this._iframeNavigator}},{key:"userStore",get:function(){return this._userStore}}]),t}(i.OidcClientSettings)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RedirectNavigator=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0);t.RedirectNavigator=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.prepare=function(){return Promise.resolve(this)},e.prototype.navigate=function(e){return e&&e.url?(e.useReplaceToNavigate?window.location.replace(e.url):window.location=e.url,Promise.resolve()):(i.Log.error("RedirectNavigator.navigate: No url provided"),Promise.reject(new Error("No url provided")))},n(e,[{key:"url",get:function(){return window.location.href}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PopupNavigator=void 0;var n=r(0),i=r(42);t.PopupNavigator=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.prepare=function(e){var t=new i.PopupWindow(e);return Promise.resolve(t)},e.prototype.callback=function e(t,r,o){n.Log.debug("PopupNavigator.callback");try{return i.PopupWindow.notifyOpener(t,r,o),Promise.resolve()}catch(e){return Promise.reject(e)}},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PopupWindow=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0),o=r(3);t.PopupWindow=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t}));var n=t.popupWindowTarget||"_blank",o=t.popupWindowFeatures||"location=no,toolbar=no,width=500,height=500,left=100,top=100;";this._popup=window.open("",n,o),this._popup&&(i.Log.debug("PopupWindow.ctor: popup successfully created"),this._checkForPopupClosedTimer=window.setInterval(this._checkForPopupClosed.bind(this),500))}return e.prototype.navigate=function(e){return this._popup?e&&e.url?(i.Log.debug("PopupWindow.navigate: Setting URL in popup"),this._id=e.id,this._id&&(window["popupCallback_"+e.id]=this._callback.bind(this)),this._popup.focus(),this._popup.window.location=e.url):(this._error("PopupWindow.navigate: no url provided"),this._error("No url provided")):this._error("PopupWindow.navigate: Error opening popup window"),this.promise},e.prototype._success=function(e){i.Log.debug("PopupWindow.callback: Successful response from popup window"),this._cleanup(),this._resolve(e)},e.prototype._error=function(e){i.Log.error("PopupWindow.error: ",e),this._cleanup(),this._reject(new Error(e))},e.prototype.close=function(){this._cleanup(!1)},e.prototype._cleanup=function(e){i.Log.debug("PopupWindow.cleanup"),window.clearInterval(this._checkForPopupClosedTimer),this._checkForPopupClosedTimer=null,delete window["popupCallback_"+this._id],this._popup&&!e&&this._popup.close(),this._popup=null},e.prototype._checkForPopupClosed=function(){this._popup&&!this._popup.closed||this._error("Popup window closed")},e.prototype._callback=function(e,t){this._cleanup(t),e?(i.Log.debug("PopupWindow.callback success"),this._success({url:e})):(i.Log.debug("PopupWindow.callback: Invalid response from popup"),this._error("Invalid response from popup"))},e.notifyOpener=function(e,t,r){if(window.opener){if(e=e||window.location.href){var n=o.UrlUtility.parseUrlFragment(e,r);if(n.state){var s="popupCallback_"+n.state,a=window.opener[s];a?(i.Log.debug("PopupWindow.notifyOpener: passing url message to opener"),a(e,t)):i.Log.warn("PopupWindow.notifyOpener: no matching callback found on opener")}else i.Log.warn("PopupWindow.notifyOpener: no state found in response url")}}else i.Log.warn("PopupWindow.notifyOpener: no window.opener. Can't complete notification.")},n(e,[{key:"promise",get:function(){return this._promise}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IFrameNavigator=void 0;var n=r(0),i=r(44);t.IFrameNavigator=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.prepare=function(e){var t=new i.IFrameWindow(e);return Promise.resolve(t)},e.prototype.callback=function e(t){n.Log.debug("IFrameNavigator.callback");try{return i.IFrameWindow.notifyParent(t),Promise.resolve()}catch(e){return Promise.reject(e)}},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IFrameWindow=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0);t.IFrameWindow=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t})),this._boundMessageEvent=this._message.bind(this),window.addEventListener("message",this._boundMessageEvent,!1),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.width=0,this._frame.height=0,window.document.body.appendChild(this._frame)}return e.prototype.navigate=function(e){if(e&&e.url){var t=e.silentRequestTimeout||1e4;i.Log.debug("IFrameWindow.navigate: Using timeout of:",t),this._timer=window.setTimeout(this._timeout.bind(this),t),this._frame.src=e.url}else this._error("No url provided");return this.promise},e.prototype._success=function(e){this._cleanup(),i.Log.debug("IFrameWindow: Successful response from frame window"),this._resolve(e)},e.prototype._error=function(e){this._cleanup(),i.Log.error(e),this._reject(new Error(e))},e.prototype.close=function(){this._cleanup()},e.prototype._cleanup=function(){this._frame&&(i.Log.debug("IFrameWindow: cleanup"),window.removeEventListener("message",this._boundMessageEvent,!1),window.clearTimeout(this._timer),window.document.body.removeChild(this._frame),this._timer=null,this._frame=null,this._boundMessageEvent=null)},e.prototype._timeout=function(){i.Log.debug("IFrameWindow.timeout"),this._error("Frame window timed out")},e.prototype._message=function(e){if(i.Log.debug("IFrameWindow.message"),this._timer&&e.origin===this._origin&&e.source===this._frame.contentWindow&&"string"==typeof e.data&&(e.data.startsWith("http://")||e.data.startsWith("https://"))){var t=e.data;t?this._success({url:t}):this._error("Invalid response from frame")}},e.notifyParent=function(e){i.Log.debug("IFrameWindow.notifyParent"),(e=e||window.location.href)&&(i.Log.debug("IFrameWindow.notifyParent: posting url message to parent"),window.parent.postMessage(e,location.protocol+"//"+location.host))},n(e,[{key:"promise",get:function(){return this._promise}},{key:"_origin",get:function(){return location.protocol+"//"+location.host}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserManagerEvents=void 0;var n=r(0),i=r(16),o=r(17);t.UserManagerEvents=function(e){function t(r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,r));return n._userLoaded=new o.Event("User loaded"),n._userUnloaded=new o.Event("User unloaded"),n._silentRenewError=new o.Event("Silent renew error"),n._userSignedIn=new o.Event("User signed in"),n._userSignedOut=new o.Event("User signed out"),n._userSessionChanged=new o.Event("User session changed"),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.load=function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n.Log.debug("UserManagerEvents.load"),e.prototype.load.call(this,t),r&&this._userLoaded.raise(t)},t.prototype.unload=function(){n.Log.debug("UserManagerEvents.unload"),e.prototype.unload.call(this),this._userUnloaded.raise()},t.prototype.addUserLoaded=function(e){this._userLoaded.addHandler(e)},t.prototype.removeUserLoaded=function(e){this._userLoaded.removeHandler(e)},t.prototype.addUserUnloaded=function(e){this._userUnloaded.addHandler(e)},t.prototype.removeUserUnloaded=function(e){this._userUnloaded.removeHandler(e)},t.prototype.addSilentRenewError=function(e){this._silentRenewError.addHandler(e)},t.prototype.removeSilentRenewError=function(e){this._silentRenewError.removeHandler(e)},t.prototype._raiseSilentRenewError=function(e){n.Log.debug("UserManagerEvents._raiseSilentRenewError",e.message),this._silentRenewError.raise(e)},t.prototype.addUserSignedIn=function(e){this._userSignedIn.addHandler(e)},t.prototype.removeUserSignedIn=function(e){this._userSignedIn.removeHandler(e)},t.prototype._raiseUserSignedIn=function(){n.Log.debug("UserManagerEvents._raiseUserSignedIn"),this._userSignedIn.raise()},t.prototype.addUserSignedOut=function(e){this._userSignedOut.addHandler(e)},t.prototype.removeUserSignedOut=function(e){this._userSignedOut.removeHandler(e)},t.prototype._raiseUserSignedOut=function(){n.Log.debug("UserManagerEvents._raiseUserSignedOut"),this._userSignedOut.raise()},t.prototype.addUserSessionChanged=function(e){this._userSessionChanged.addHandler(e)},t.prototype.removeUserSessionChanged=function(e){this._userSessionChanged.removeHandler(e)},t.prototype._raiseUserSessionChanged=function(){n.Log.debug("UserManagerEvents._raiseUserSessionChanged"),this._userSessionChanged.raise()},t}(i.AccessTokenEvents)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0),o=r(1),s=r(17);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.Timer=function(e){function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.Global.timer,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;a(this,t);var s=u(this,e.call(this,r));return s._timer=n,s._nowFunc=i||function(){return Date.now()/1e3},s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.init=function(e){e<=0&&(e=1),e=parseInt(e);var t=this.now+e;if(this.expiration===t&&this._timerHandle)i.Log.debug("Timer.init timer "+this._name+" skipping initialization since already initialized for expiration:",this.expiration);else{this.cancel(),i.Log.debug("Timer.init timer "+this._name+" for duration:",e),this._expiration=t;var r=5;e<r&&(r=e),this._timerHandle=this._timer.setInterval(this._callback.bind(this),1e3*r)}},t.prototype.cancel=function(){this._timerHandle&&(i.Log.debug("Timer.cancel: ",this._name),this._timer.clearInterval(this._timerHandle),this._timerHandle=null)},t.prototype._callback=function(){var t=this._expiration-this.now;i.Log.debug("Timer.callback; "+this._name+" timer expires in:",t),this._expiration<=this.now&&(this.cancel(),e.prototype.raise.call(this))},n(t,[{key:"now",get:function(){return parseInt(this._nowFunc())}},{key:"expiration",get:function(){return this._expiration}}]),t}(s.Event)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SilentRenewService=void 0;var n=r(0);t.SilentRenewService=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userManager=t}return e.prototype.start=function(){this._callback||(this._callback=this._tokenExpiring.bind(this),this._userManager.events.addAccessTokenExpiring(this._callback),this._userManager.getUser().then((function(e){})).catch((function(e){n.Log.error("SilentRenewService.start: Error from getUser:",e.message)})))},e.prototype.stop=function(){this._callback&&(this._userManager.events.removeAccessTokenExpiring(this._callback),delete this._callback)},e.prototype._tokenExpiring=function(){var e=this;this._userManager.signinSilent().then((function(e){n.Log.debug("SilentRenewService._tokenExpiring: Silent token renewal successful")}),(function(t){n.Log.error("SilentRenewService._tokenExpiring: Error from signinSilent:",t.message),e._userManager.events._raiseSilentRenewError(t)}))},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CordovaPopupNavigator=void 0;var n=r(21);t.CordovaPopupNavigator=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.prepare=function(e){var t=new n.CordovaPopupWindow(e);return Promise.resolve(t)},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CordovaIFrameNavigator=void 0;var n=r(21);t.CordovaIFrameNavigator=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.prepare=function(e){e.popupWindowFeatures="hidden=yes";var t=new n.CordovaPopupWindow(e);return Promise.resolve(t)},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Version="1.11.6"}])},e.exports=t()},143:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(8888),i=(e,t)=>window.fetch(e,t);t.default=class{constructor(e,t,r,o,s){this.loginHandler=e,this.redirectHandler=t,this.logoutHandler=r,this.sessionInfoManager=o,this.issuerConfigFetcher=s,this.login=async(e,t)=>{var r,i;await this.sessionInfoManager.clear(e.sessionId);const o=(0,n.removeOidcQueryParam)(null!==(r=e.redirectUrl)&&void 0!==r?r:window.location.href);await this.loginHandler.handle({...e,redirectUrl:o,clientName:null!==(i=e.clientName)&&void 0!==i?i:e.clientId,eventEmitter:t})},this.fetch=i,this.logout=async e=>{await this.logoutHandler.handle(e),this.fetch=i},this.getSessionInfo=async e=>this.sessionInfoManager.get(e),this.getAllSessionInfo=async()=>this.sessionInfoManager.getAll(),this.validateCurrentSession=async e=>{const t=await this.sessionInfoManager.get(e);return void 0===t||void 0===t.clientAppId||void 0===t.issuer?null:t},this.handleIncomingRedirect=async(e,t)=>{const r=await this.redirectHandler.handle(e,t);this.fetch=r.fetch.bind(window);const n=new URL(e);return n.searchParams.delete("state"),n.searchParams.delete("code"),n.searchParams.delete("id_token"),n.searchParams.delete("access_token"),n.searchParams.delete("error"),n.searchParams.delete("error_description"),window.history.replaceState(null,"",n.toString()),{isLoggedIn:r.isLoggedIn,webId:r.webId,sessionId:r.sessionId,expirationDate:r.expirationDate}}}}},3598:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Session=t.silentlyAuthenticate=void 0;const n=r(7187),i=r(835),o=r(7466),s=r(3537),a=r(3783),u=r(2464);async function c(e,t,r={inIframe:!1},n){var i;const o=await t.validateCurrentSession(e);return null!==o&&(window.localStorage.setItem(a.KEY_CURRENT_URL,window.location.href),await t.login({sessionId:e,prompt:"none",oidcIssuer:o.issuer,redirectUrl:o.redirectUrl,clientId:o.clientAppId,clientSecret:o.clientAppSecret,tokenType:null!==(i=o.tokenType)&&void 0!==i?i:"DPoP",inIframe:r.inIframe},n),!0)}function l(e){return!!(null===e||void 0===e?void 0:e.isLoggedIn)}t.silentlyAuthenticate=c;class d extends n.EventEmitter{constructor(e={},t){super(),this.tokenRequestInProgress=!1,this.tmpFetchWithCookies=!1,this.login=async e=>{var t;return await this.clientAuthentication.login({sessionId:this.info.sessionId,...e,tokenType:null!==(t=e.tokenType)&&void 0!==t?t:"DPoP"},this),new Promise((()=>{}))},this.fetch=async(e,t)=>this.clientAuthentication.fetch(e,{...t,credentials:this.tmpFetchWithCookies?"include":null===t||void 0===t?void 0:t.credentials}),this.internalLogout=async e=>{window.localStorage.removeItem(a.KEY_CURRENT_SESSION),await this.clientAuthentication.logout(this.info.sessionId),this.info.isLoggedIn=!1,this.tmpFetchWithCookies=!1,e&&this.emit(i.EVENTS.LOGOUT)},this.logout=async()=>this.internalLogout(!0),this.handleIncomingRedirect=async(e={})=>{var t;if(this.info.isLoggedIn)return this.info;if(this.tokenRequestInProgress)return;const r="string"===typeof e?{url:e}:e,n=null!==(t=r.url)&&void 0!==t?t:window.location.href;if(null!==window.frameElement)return void(0,u.postRedirectUrlToParent)(n);!0!==r.useEssSession||!0===r.restorePreviousSession?window.localStorage.setItem("tmp-resource-server-session-enabled","false"):window.localStorage.setItem("tmp-resource-server-session-enabled","true");const o=window.localStorage.getItem("tmp-resource-server-session-info");if("string"===typeof o&&!0!==r.restorePreviousSession&&!0===r.useEssSession){function e(e){var t;const r=Object.keys(null!==(t=e.sessions)&&void 0!==t?t:{});return"string"===typeof e.webId&&r.length>0&&"number"===typeof e.sessions[r[0]].expiration}const t=JSON.parse(o);if(e(t)){const e=Object.keys(t.sessions),r=new URL(t.webId).hostname,n=e.find((e=>new URL(e).hostname===r)),i=null!==n&&void 0!==n?n:e[0];if(t.sessions[i].expiration-Date.now()>3e5)return this.info.isLoggedIn=!0,this.info.webId=t.webId,this.tmpFetchWithCookies=!0,this.info}}this.tokenRequestInProgress=!0;const s=await this.clientAuthentication.handleIncomingRedirect(n,this);if(l(s)){this.setSessionInfo(s);const e=window.localStorage.getItem(a.KEY_CURRENT_URL);null===e?this.emit(i.EVENTS.LOGIN):(window.localStorage.removeItem(a.KEY_CURRENT_URL),this.emit(i.EVENTS.SESSION_RESTORED,e))}else if(!0===r.restorePreviousSession){const e=window.localStorage.getItem(a.KEY_CURRENT_SESSION);if(null!==e){if(await c(e,this.clientAuthentication,void 0,this))return new Promise((()=>{}))}}return this.tokenRequestInProgress=!1,s},e.clientAuthentication?this.clientAuthentication=e.clientAuthentication:e.secureStorage&&e.insecureStorage?this.clientAuthentication=(0,s.getClientAuthenticationWithDependencies)({secureStorage:e.secureStorage,insecureStorage:e.insecureStorage}):this.clientAuthentication=(0,s.getClientAuthenticationWithDependencies)({}),e.sessionInfo?this.info={sessionId:e.sessionInfo.sessionId,isLoggedIn:!1,webId:e.sessionInfo.webId}:this.info={sessionId:null!==t&&void 0!==t?t:(0,o.v4)(),isLoggedIn:!1},(0,u.setupIframeListener)((async e=>{const t=await this.clientAuthentication.handleIncomingRedirect(e,this);l(t)&&this.setSessionInfo(t)})),this.on("tokenRenewal",(()=>c(this.info.sessionId,this.clientAuthentication,{inIframe:!0},this))),this.on(i.EVENTS.LOGIN,(()=>window.localStorage.setItem(a.KEY_CURRENT_SESSION,this.info.sessionId))),this.on(i.EVENTS.SESSION_EXPIRED,(()=>this.internalLogout(!1))),this.on(i.EVENTS.ERROR,(()=>this.internalLogout(!1)))}onLogin(e){this.on(i.EVENTS.LOGIN,e)}onLogout(e){this.on(i.EVENTS.LOGOUT,e)}onError(e){this.on(i.EVENTS.ERROR,e)}onSessionRestore(e){this.on(i.EVENTS.SESSION_RESTORED,e)}onSessionExpiration(e){this.on(i.EVENTS.SESSION_EXPIRED,e)}setSessionInfo(e){this.info.isLoggedIn=e.isLoggedIn,this.info.webId=e.webId,this.info.sessionId=e.sessionId,this.info.expirationDate=e.expirationDate,this.on(i.EVENTS.SESSION_EXTENDED,(e=>{this.info.expirationDate=Date.now()+1e3*e}))}}t.Session=d},3783:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KEY_CURRENT_URL=t.KEY_CURRENT_SESSION=void 0;const n=r(835);t.KEY_CURRENT_SESSION=`${n.SOLID_CLIENT_AUTHN_KEY_PREFIX}currentSession`,t.KEY_CURRENT_URL=`${n.SOLID_CLIENT_AUTHN_KEY_PREFIX}currentUrl`},7814:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onSessionRestore=t.onLogout=t.onLogin=t.handleIncomingRedirect=t.logout=t.login=t.fetch=t.getDefaultSession=void 0;const n=r(3598);let i;function o(){return"undefined"===typeof i&&(i=new n.Session),i}t.getDefaultSession=o;t.fetch=(...e)=>o().fetch(...e);t.login=(...e)=>o().login(...e);t.logout=(...e)=>o().logout(...e);t.handleIncomingRedirect=(...e)=>o().handleIncomingRedirect(...e);t.onLogin=(...e)=>o().onLogin(...e);t.onLogout=(...e)=>o().onLogout(...e);t.onSessionRestore=(...e)=>o().onSessionRestore(...e)},3537:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getClientAuthenticationWithDependencies=void 0;const i=r(835),o=n(r(437)),s=n(r(143)),a=n(r(2018)),u=n(r(1590)),c=n(r(4377)),l=r(5220),d=n(r(2186)),h=r(3624),p=r(4520),f=n(r(5912)),g=n(r(5394)),y=n(r(2536)),v=n(r(7826)),m=r(1446),w=n(r(3144));t.getClientAuthenticationWithDependencies=function(e){const t=new i.InMemoryStorage,r=e.secureStorage||t,n=e.insecureStorage||new g.default,b=new o.default(r,n),S=new c.default(b),_=new v.default(b),E=new h.SessionInfoManager(b),A=new w.default(b,S,_),k=new a.default(b,new u.default(b,new y.default),S,_),F=new f.default([new m.ErrorOidcHandler,new p.AuthCodeRedirectHandler(b,E,S,_,A),new l.FallbackRedirectHandler]);return new s.default(k,F,new d.default(E),E,S)}},2464:function(e,t){"use strict";let r;function n(){return"undefined"===typeof r&&(r=window.document.createElement("iframe"),r.setAttribute("hidden","true"),r.setAttribute("sandbox","allow-scripts allow-same-origin")),r}Object.defineProperty(t,"__esModule",{value:!0}),t.postRedirectUrlToParent=t.setupIframeListener=t.redirectInIframe=void 0,t.redirectInIframe=function(e){const t=n();window.document.body.appendChild(t),t.src=e},t.setupIframeListener=function(e){"undefined"!==typeof window&&window.addEventListener("message",(async t=>{const r=n();t.origin===window.location.origin&&t.source===r.contentWindow&&"string"===typeof t.data.redirectUrl&&await e(t.data.redirectUrl),window.document.body.contains(r)&&window.document.body.removeChild(r)}))},t.postRedirectUrlToParent=function(e){window.top.postMessage({redirectUrl:e},window.location.origin)}},4305:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.InMemoryStorage=t.ConfigurationError=t.NotImplementedError=t.getClientAuthenticationWithDependencies=t.Session=void 0;var o=r(3598);Object.defineProperty(t,"Session",{enumerable:!0,get:function(){return o.Session}});var s=r(3537);Object.defineProperty(t,"getClientAuthenticationWithDependencies",{enumerable:!0,get:function(){return s.getClientAuthenticationWithDependencies}}),i(r(7814),t);var a=r(835);Object.defineProperty(t,"NotImplementedError",{enumerable:!0,get:function(){return a.NotImplementedError}}),Object.defineProperty(t,"ConfigurationError",{enumerable:!0,get:function(){return a.ConfigurationError}}),Object.defineProperty(t,"InMemoryStorage",{enumerable:!0,get:function(){return a.InMemoryStorage}})},7826:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(8888);t.default=class{constructor(e){this.storageUtility=e}async getClient(e,t){var r;const[i,o]=await Promise.all([this.storageUtility.getForUser(e.sessionId,"clientId",{secure:!1}),this.storageUtility.getForUser(e.sessionId,"clientSecret",{secure:!1})]);if(i)return{clientId:i,clientSecret:o,clientType:"dynamic"};const s={...e};s.registrationAccessToken=null!==(r=s.registrationAccessToken)&&void 0!==r?r:await this.storageUtility.getForUser(e.sessionId,"registrationAccessToken");try{const e=await(0,n.registerClient)(s,t),r={clientId:e.clientId};return e.clientSecret&&(r.clientSecret=e.clientSecret),e.idTokenSignedResponseAlg&&(r.idTokenSignedResponseAlg=e.idTokenSignedResponseAlg),await this.storageUtility.setForUser(s.sessionId,r,{secure:!1}),e}catch(a){throw new Error(`Client registration failed: [${a}]`)}}}},4377:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WELL_KNOWN_OPENID_CONFIG=void 0;const n=r(835),i=r(7226);t.WELL_KNOWN_OPENID_CONFIG=".well-known/openid-configuration";const o={issuer:{toKey:"issuer",convertToUrl:!0},authorization_endpoint:{toKey:"authorizationEndpoint",convertToUrl:!0},token_endpoint:{toKey:"tokenEndpoint",convertToUrl:!0},userinfo_endpoint:{toKey:"userinfoEndpoint",convertToUrl:!0},jwks_uri:{toKey:"jwksUri",convertToUrl:!0},registration_endpoint:{toKey:"registrationEndpoint",convertToUrl:!0},scopes_supported:{toKey:"scopesSupported"},response_types_supported:{toKey:"responseTypesSupported"},response_modes_supported:{toKey:"responseModesSupported"},grant_types_supported:{toKey:"grantTypesSupported"},acr_values_supported:{toKey:"acrValuesSupported"},subject_types_supported:{toKey:"subjectTypesSupported"},id_token_signing_alg_values_supported:{toKey:"idTokenSigningAlgValuesSupported"},id_token_encryption_alg_values_supported:{toKey:"idTokenEncryptionAlgValuesSupported"},id_token_encryption_enc_values_supported:{toKey:"idTokenEncryptionEncValuesSupported"},userinfo_signing_alg_values_supported:{toKey:"userinfoSigningAlgValuesSupported"},userinfo_encryption_alg_values_supported:{toKey:"userinfoEncryptionAlgValuesSupported"},userinfo_encryption_enc_values_supported:{toKey:"userinfoEncryptionEncValuesSupported"},request_object_signing_alg_values_supported:{toKey:"requestObjectSigningAlgValuesSupported"},request_object_encryption_alg_values_supported:{toKey:"requestObjectEncryptionAlgValuesSupported"},request_object_encryption_enc_values_supported:{toKey:"requestObjectEncryptionEncValuesSupported"},token_endpoint_auth_methods_supported:{toKey:"tokenEndpointAuthMethodsSupported"},token_endpoint_auth_signing_alg_values_supported:{toKey:"tokenEndpointAuthSigningAlgValuesSupported"},display_values_supported:{toKey:"displayValuesSupported"},claim_types_supported:{toKey:"claimTypesSupported"},claims_supported:{toKey:"claimsSupported"},service_documentation:{toKey:"serviceDocumentation"},claims_locales_supported:{toKey:"claimsLocalesSupported"},ui_locales_supported:{toKey:"uiLocalesSupported"},claims_parameter_supported:{toKey:"claimsParameterSupported"},request_parameter_supported:{toKey:"requestParameterSupported"},request_uri_parameter_supported:{toKey:"requestUriParameterSupported"},require_request_uri_registration:{toKey:"requireRequestUriRegistration"},op_policy_uri:{toKey:"opPolicyUri",convertToUrl:!0},op_tos_uri:{toKey:"opTosUri",convertToUrl:!0}};class s{constructor(e){this.storageUtility=e}static getLocalStorageKey(e){return`issuerConfig:${e}`}async fetchConfig(e){let r;const a=(0,i.appendToUrlPathname)(e,t.WELL_KNOWN_OPENID_CONFIG),u=await window.fetch(a);try{r=function(e){const t={};return Object.keys(e).forEach((r=>{o[r]&&(t[o[r].toKey]=e[r])})),Array.isArray(t.scopesSupported)||(t.scopesSupported=["openid"]),t}(await u.json())}catch(c){throw new n.ConfigurationError(`[${e.toString()}] has an invalid configuration: ${c.message}`)}return await this.storageUtility.set(s.getLocalStorageKey(e),JSON.stringify(r)),r}}t.default=s},2018:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(835);function i(e){return"string"===typeof e.oidcIssuer}function o(e){return"string"===typeof e.redirectUrl}t.default=class{constructor(e,t,r,n){this.storageUtility=e,this.oidcHandler=t,this.issuerConfigFetcher=r,this.clientRegistrar=n}async canHandle(e){return i(e)&&o(e)}async handle(e){if(!i(e))throw new n.ConfigurationError(`OidcLoginHandler requires an OIDC issuer: missing property 'oidcIssuer' in ${JSON.stringify(e)}`);if(!o(e))throw new n.ConfigurationError(`OidcLoginHandler requires a redirect URL: missing property 'redirectUrl' in ${JSON.stringify(e)}`);const t=await this.issuerConfigFetcher.fetchConfig(e.oidcIssuer),r=await(0,n.handleRegistration)(e,t,this.storageUtility,this.clientRegistrar),s={issuer:t.issuer,dpop:"dpop"===e.tokenType.toLowerCase(),...e,issuerConfiguration:t,client:r};return this.oidcHandler.handle(s)}}},2536:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2464);t.default=class{redirect(e,t){t&&t.handleRedirect?t.handleRedirect(e):t&&t.redirectByReplacingState?window.history.replaceState({},"",e):(null===t||void 0===t?void 0:t.redirectInIframe)?(0,n.redirectInIframe)(e):window.location.href=e}}},1590:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(8888);t.default=class{constructor(e,t){this.storageUtility=e,this.redirector=t}async canHandle(e){return!!(e.issuerConfiguration.grantTypesSupported&&e.issuerConfiguration.grantTypesSupported.indexOf("authorization_code")>-1)}async handle(e){var t;const r={authority:e.issuer.toString(),client_id:e.client.clientId,client_secret:e.client.clientSecret,redirect_uri:e.redirectUrl.toString(),post_logout_redirect_uri:e.redirectUrl.toString(),response_type:"code",scope:"openid offline_access webid",filterProtocolClaims:!0,loadUserInfo:!1,code_verifier:!0,prompt:null!==(t=e.prompt)&&void 0!==t?t:"consent"},i=new n.OidcClient(r),{redirector:o}=this,s=this.storageUtility;try{const t=await i.createSigninRequest();await Promise.all([s.setForUser(t.state._id,{sessionId:e.sessionId}),s.setForUser(e.sessionId,{codeVerifier:t.state._code_verifier,issuer:e.issuer.toString(),redirectUrl:e.redirectUrl,dpop:e.dpop?"true":"false"})]),o.redirect(t.url.toString(),{handleRedirect:e.handleRedirect,redirectInIframe:e.inIframe})}catch(a){console.error(a)}}}},5912:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(835);class i extends n.AggregateHandler{constructor(e){super(e)}}t.default=i},4520:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthCodeRedirectHandler=t.DEFAULT_LIFESPAN=void 0;const n=r(835),i=r(8888);t.DEFAULT_LIFESPAN=18e5;t.AuthCodeRedirectHandler=class{constructor(e,t,r,n,i){this.storageUtility=e,this.sessionInfoManager=t,this.issuerConfigFetcher=r,this.clientRegistrar=n,this.tokerRefresher=i}async canHandle(e){try{const t=new URL(e);return null!==t.searchParams.get("code")&&null!==t.searchParams.get("state")}catch(t){throw new Error(`[${e}] is not a valid URL, and cannot be used as a redirect URL: ${t}`)}}async handle(e,r){if(!(await this.canHandle(e)))throw new Error(`AuthCodeRedirectHandler cannot handle [${e}]: it is missing one of [code, state].`);const o=new URL(e),s=o.searchParams.get("state"),a=await this.storageUtility.getForUser(s,"sessionId",{errorIfNull:!0}),{issuerConfig:u,codeVerifier:c,redirectUrl:l,dpop:d}=await(0,n.loadOidcContextFromStorage)(a,this.storageUtility,this.issuerConfigFetcher);if(void 0===c)throw new Error(`The code verifier for session ${a} is missing from storage.`);if(void 0===l)throw new Error(`The redirect URL for session ${a} is missing from storage.`);const h=await this.clientRegistrar.getClient({sessionId:a},u);let p;const f=Date.now();let g;d?(p=await(0,i.getDpopToken)(u,h,{grantType:"authorization_code",code:o.searchParams.get("code"),codeVerifier:c,redirectUrl:l}),window.localStorage.removeItem(`oidc.${s}`)):p=await(0,i.getBearerToken)(o.toString()),void 0!==p.refreshToken&&(g={sessionId:a,refreshToken:p.refreshToken,tokenRefresher:this.tokerRefresher});const y=await(0,n.buildAuthenticatedFetch)(fetch,p.accessToken,{dpopKey:p.dpopKey,refreshOptions:g,eventEmitter:r,expiresIn:p.expiresIn});await this.storageUtility.setForUser(a,{webId:p.webId,isLoggedIn:"true"},{secure:!0}),o.searchParams.delete("code"),await this.storageUtility.setForUser(a,{redirectUrl:o.toString()},{secure:!1});"false"===window.localStorage.getItem("tmp-resource-server-session-enabled")||await async function(e,r,n){const i=new URL(e).origin;await r(e);try{if(200===(await r(`${i}/session`)).status)return void(await n.storeResourceServerSessionInfo(e,i,Date.now()+t.DEFAULT_LIFESPAN));await n.clearResourceServerSessionInfo(i)}catch(o){await n.clearResourceServerSessionInfo(i)}}(p.webId,y,this.storageUtility);const v=await this.sessionInfoManager.get(a);if(!v)throw new Error(`Could not retrieve session: [${a}].`);return Object.assign(v,{fetch:y,expirationDate:"number"===typeof p.expiresIn?f+1e3*p.expiresIn:null})}}},1446:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorOidcHandler=void 0;const n=r(835),i=r(3624);t.ErrorOidcHandler=class{async canHandle(e){try{return new URL(e).searchParams.has("error")}catch(t){throw new Error(`[${e}] is not a valid URL, and cannot be used as a redirect URL: ${t}`)}}async handle(e,t){if(void 0!==t){const r=new URL(e),i=r.searchParams.get("error"),o=r.searchParams.get("error_description");t.emit(n.EVENTS.ERROR,i,o)}return(0,i.getUnauthenticatedSession)()}}},5220:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FallbackRedirectHandler=void 0;const n=r(3624);t.FallbackRedirectHandler=class{async canHandle(e){try{return new URL(e),!0}catch(t){throw new Error(`[${e}] is not a valid URL, and cannot be used as a redirect URL: ${t}`)}}async handle(e){return(0,n.getUnauthenticatedSession)()}}},3144:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(835),i=r(8888);t.default=class{constructor(e,t,r){this.storageUtility=e,this.issuerConfigFetcher=t,this.clientRegistrar=r}async refresh(e,t,r,o){const s=await(0,n.loadOidcContextFromStorage)(e,this.storageUtility,this.issuerConfigFetcher),a=await this.clientRegistrar.getClient({sessionId:e},s.issuerConfig);if(void 0===t)throw new Error(`Session [${e}] has no refresh token to allow it to refresh its access token.`);if(s.dpop&&void 0===r)throw new Error(`For session [${e}], the key bound to the DPoP access token must be provided to refresh said access token.`);const u=await(0,i.refresh)(t,s.issuerConfig,a,r);return void 0!==u.refreshToken&&(null===o||void 0===o||o.emit(n.EVENTS.NEW_REFRESH_TOKEN,u.refreshToken),await this.storageUtility.setForUser(e,{refreshToken:u.refreshToken})),u}}},2186:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.sessionInfoManager=e}async canHandle(){return!0}async handle(e){await this.sessionInfoManager.clear(e)}}},3624:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionInfoManager=t.clear=t.getUnauthenticatedSession=void 0;const n=r(835),i=r(7466),o=r(8888);async function s(e,t){const r=await t.get("tmp-resource-server-session-info"),n=JSON.parse(null!==r&&void 0!==r?r:"{}"),{webId:i}=n;if(void 0!==i){const e=new URL(i).origin;await t.clearResourceServerSessionInfo(e)}await Promise.all([t.deleteAllUserData(e,{secure:!1}),t.deleteAllUserData(e,{secure:!0}),t.delete("clientKey",{secure:!1})]),await(0,o.clearOidcPersistentStorage)()}t.getUnauthenticatedSession=function(){return{isLoggedIn:!1,sessionId:(0,i.v4)(),fetch:fetch}},t.clear=s;t.SessionInfoManager=class{constructor(e){this.storageUtility=e}update(e,t){throw new Error("Not Implemented")}async get(e){var t;const r=await this.storageUtility.getForUser(e,"isLoggedIn",{secure:!0}),i=await this.storageUtility.getForUser(e,"webId",{secure:!0}),o=await this.storageUtility.getForUser(e,"clientId",{secure:!1}),s=await this.storageUtility.getForUser(e,"clientSecret",{secure:!1}),a=await this.storageUtility.getForUser(e,"redirectUrl",{secure:!1}),u=await this.storageUtility.getForUser(e,"refreshToken",{secure:!0}),c=await this.storageUtility.getForUser(e,"issuer",{secure:!1}),l=null!==(t=await this.storageUtility.getForUser(e,"tokenType",{secure:!1}))&&void 0!==t?t:"DPoP";if(!(0,n.isSupportedTokenType)(l))throw new Error(`Tokens of type [${l}] are not supported.`);if(void 0!==o||void 0!==r||void 0!==i||void 0!==u)return{sessionId:e,webId:i,isLoggedIn:"true"===r,redirectUrl:a,refreshToken:u,issuer:c,clientAppId:o,clientAppSecret:s,tokenType:l}}async getAll(){throw new Error("Not implemented")}async clear(e){return s(e,this.storageUtility)}async register(e){throw new Error("Not implemented")}async getRegisteredSessionIdAll(){throw new Error("Not implemented")}async clearAll(){throw new Error("Not implemented")}}},5394:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{get storage(){return window.localStorage}async get(e){return this.storage.getItem(e)||void 0}async set(e,t){this.storage.setItem(e,t)}async delete(e){this.storage.removeItem(e)}}},437:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(835);class i extends n.StorageUtility{constructor(e,t){super(e,t)}}t.default=i},7226:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.appendToUrlPathname=void 0,t.appendToUrlPathname=function(e,t){const r=new URL(e),n=r.pathname;return r.pathname=`${n}${n.endsWith("/")?"":"/"}${t.startsWith("/")?t.substring(1):t}`,r.toString()}},2155:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateDpopKeyPair=t.createDpopHeader=void 0;const n=r(2136),i=r(7466),o=r(4672);function s(e){const t=new URL(e);return new URL(t.pathname,t.origin).toString()}t.createDpopHeader=async function(e,t,r){return new n.SignJWT({htu:s(e),htm:t.toUpperCase(),jti:(0,i.v4)()}).setProtectedHeader({alg:o.PREFERRED_SIGNING_ALG[0],jwk:r.publicKey,typ:"dpop+jwt"}).setIssuedAt().sign(r.privateKey,{})},t.generateDpopKeyPair=async function(){const{privateKey:e,publicKey:t}=await(0,n.generateKeyPair)(o.PREFERRED_SIGNING_ALG[0]),r={privateKey:e,publicKey:await(0,n.exportJWK)(t)};return[r.publicKey.alg]=o.PREFERRED_SIGNING_ALG,r}},8687:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildAuthenticatedFetch=t.DEFAULT_EXPIRATION_TIME_SECONDS=void 0;const n=r(4098),i=r(4672),o=r(2155),s=r(6904),a=r(6583);async function u(e,t,r,i){if(void 0!==r)return async function(e,t,r,i){var s;const a=new n.Headers(null===i||void 0===i?void 0:i.headers);return a.set("Authorization",`DPoP ${t}`),a.set("DPoP",await(0,o.createDpopHeader)(e,null!==(s=null===i||void 0===i?void 0:i.method)&&void 0!==s?s:"get",r)),{...i,headers:a}}(e,t,r,i);const s=new n.Headers(null===i||void 0===i?void 0:i.headers);return s.set("Authorization",`Bearer ${t}`),{...i,headers:s}}async function c(e,t,r,n,i){return e(r,await u(r.toString(),t,i,n))}t.DEFAULT_EXPIRATION_TIME_SECONDS=600;const l=e=>void 0!==e?e-i.REFRESH_BEFORE_EXPIRATION_SECONDS>0?e-i.REFRESH_BEFORE_EXPIRATION_SECONDS:e:t.DEFAULT_EXPIRATION_TIME_SECONDS;t.buildAuthenticatedFetch=async function(e,r,n){var o;let u,d=r;const h=null===n||void 0===n?void 0:n.refreshOptions;if(void 0!==h){const e=async()=>{var r,o,c,p;try{const{accessToken:o,refreshToken:s,expiresIn:a}=await async function(e,r,n){var o;const s=await e.tokenRefresher.refresh(e.sessionId,e.refreshToken,r);return null===n||void 0===n||n.emit(i.EVENTS.SESSION_EXTENDED,null!==(o=s.expiresIn)&&void 0!==o?o:t.DEFAULT_EXPIRATION_TIME_SECONDS),"string"===typeof s.refreshToken&&(null===n||void 0===n||n.emit(i.EVENTS.NEW_REFRESH_TOKEN,s.refreshToken)),{accessToken:s.accessToken,refreshToken:s.refreshToken,expiresIn:s.expiresIn}}(h,n.dpopKey,n.eventEmitter);d=o,void 0!==s&&(h.refreshToken=s),clearTimeout(u),u=setTimeout(e,1e3*l(a)),null===(r=n.eventEmitter)||void 0===r||r.emit(i.EVENTS.TIMEOUT_SET,u)}catch(f){f instanceof s.OidcProviderError&&(null===(o=null===n||void 0===n?void 0:n.eventEmitter)||void 0===o||o.emit(i.EVENTS.ERROR,f.error,f.errorDescription),null===(c=null===n||void 0===n?void 0:n.eventEmitter)||void 0===c||c.emit(i.EVENTS.SESSION_EXPIRED)),f instanceof a.InvalidResponseError&&f.missingFields.includes("access_token")&&(null===(p=null===n||void 0===n?void 0:n.eventEmitter)||void 0===p||p.emit(i.EVENTS.SESSION_EXPIRED))}};u=setTimeout(e,1e3*l(n.expiresIn)),null===(o=n.eventEmitter)||void 0===o||o.emit(i.EVENTS.TIMEOUT_SET,u)}else if(void 0!==n&&void 0!==n.eventEmitter){const e=setTimeout((()=>{n.eventEmitter.emit(i.EVENTS.SESSION_EXPIRED)}),1e3*l(n.expiresIn));n.eventEmitter.emit(i.EVENTS.TIMEOUT_SET,e)}return async(t,r)=>{let i=await c(e,d,t,r,null===n||void 0===n?void 0:n.dpopKey);const o=!i.ok&&(s=i.status,![401,403].includes(s));var s;if(i.ok||o)return i;return i.url!==t&&void 0!==(null===n||void 0===n?void 0:n.dpopKey)&&(i=await c(e,d,i.url,r,n.dpopKey)),i}}},4672:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REFRESH_BEFORE_EXPIRATION_SECONDS=t.EVENTS=t.PREFERRED_SIGNING_ALG=t.SOLID_CLIENT_AUTHN_KEY_PREFIX=void 0,t.SOLID_CLIENT_AUTHN_KEY_PREFIX="solidClientAuthn:",t.PREFERRED_SIGNING_ALG=["ES256","RS256"],t.EVENTS={ERROR:"error",LOGIN:"login",LOGOUT:"logout",NEW_REFRESH_TOKEN:"newRefreshToken",SESSION_EXPIRED:"sessionExpired",SESSION_EXTENDED:"sessionExtended",SESSION_RESTORED:"sessionRestore",TIMEOUT_SET:"timeoutSet"},t.REFRESH_BEFORE_EXPIRATION_SECONDS=5},7117:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super(e)}}t.default=r},2029:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e,t,n=!0){super("string"===typeof e?r.substituteParams(e,t):r.appendErrorIri(r.lookupErrorIri(e,t),e,n))}httpResponse(e,t=!0){return this.message=r.appendHttpResponseDetails(this.message,e,t),this.httpErrorResponse=e,this}hasHttpResponse(){return void 0!==this.httpErrorResponse}getHttpResponse(){return this.httpErrorResponse}getHttpStatusCode(){if(void 0===this.httpErrorResponse)throw new r("This InruptError was not provided with a HTTP response - so we can't get its HTTP Status Code.");return this.httpErrorResponse.status}getHttpStatusText(){if(void 0===this.httpErrorResponse)throw new r("This InruptError was not provided with a HTTP response - so we can't get its HTTP Status Text!");return this.httpErrorResponse.statusText}static determineIfVocabTerm(e){return void 0!==e.strict}static lookupErrorIri(e,t){if(r.determineIfVocabTerm(e)){const r=void 0===t?e.message:e.messageParams(...t);return void 0===r?`Looked up error message IRI [${e.value}], but found no message value.`:r}return`Error message looked up at: [${e.value}]${void 0===t?"":`, with params [${t.toString()}]`}`}static appendHttpResponseDetails(e,t,r){return r&&"undefined"!==typeof t?`${e} HTTP details: status code [${t.status}], status text [${t.statusText}].`:e}static appendErrorIri(e,t,r){return r?`${e} Error IRI: [${t.value}].`:e}static substituteParams(e,t){let r=e;if(void 0!==t){const n=e.split("{{").length-1;if(n!==t.length)throw new Error(`Setting parameters on message [${e}], but it requires [${n}] params and we received [${t.length}].`);for(let e=0;e<t.length;e+=1){const n=`{{${e}}}`;r=r.replace(n,t[e])}}return r}}t.default=r},6583:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidResponseError=void 0;class r extends Error{constructor(e){super(`Invalid response from OIDC provider: missing fields ${e}`),this.missingFields=e}}t.InvalidResponseError=r},7073:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super(`[${e}] is not implemented`)}}t.default=r},6904:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OidcProviderError=void 0;class r extends Error{constructor(e,t,r){super(e),this.error=t,this.errorDescription=r}}t.OidcProviderError=r},835:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StorageUtilityGetResponse=t.StorageUtilityMock=t.mockStorageUtility=t.mockStorage=t.buildAuthenticatedFetch=t.generateDpopKeyPair=t.createDpopHeader=t.OidcProviderError=t.InvalidResponseError=t.NotImplementedError=t.ConfigurationError=t.InMemoryStorage=t.getSessionIdFromOauthState=t.saveSessionInfoToStorage=t.loadOidcContextFromStorage=t.StorageUtility=t.determineSigningAlg=t.handleRegistration=t.USER_SESSION_PREFIX=t.isSupportedTokenType=t.fetchJwks=t.getWebidFromTokenPayload=t.AggregateHandler=void 0,i(r(4672),t);var s=r(5024);Object.defineProperty(t,"AggregateHandler",{enumerable:!0,get:function(){return o(s).default}});var a=r(3528);Object.defineProperty(t,"getWebidFromTokenPayload",{enumerable:!0,get:function(){return a.getWebidFromTokenPayload}}),Object.defineProperty(t,"fetchJwks",{enumerable:!0,get:function(){return a.fetchJwks}});var u=r(1168);Object.defineProperty(t,"isSupportedTokenType",{enumerable:!0,get:function(){return u.isSupportedTokenType}});var c=r(1645);Object.defineProperty(t,"USER_SESSION_PREFIX",{enumerable:!0,get:function(){return c.USER_SESSION_PREFIX}});var l=r(4725);Object.defineProperty(t,"handleRegistration",{enumerable:!0,get:function(){return l.handleRegistration}}),Object.defineProperty(t,"determineSigningAlg",{enumerable:!0,get:function(){return l.determineSigningAlg}});var d=r(4574);Object.defineProperty(t,"StorageUtility",{enumerable:!0,get:function(){return o(d).default}}),Object.defineProperty(t,"loadOidcContextFromStorage",{enumerable:!0,get:function(){return d.loadOidcContextFromStorage}}),Object.defineProperty(t,"saveSessionInfoToStorage",{enumerable:!0,get:function(){return d.saveSessionInfoToStorage}}),Object.defineProperty(t,"getSessionIdFromOauthState",{enumerable:!0,get:function(){return d.getSessionIdFromOauthState}});var h=r(2244);Object.defineProperty(t,"InMemoryStorage",{enumerable:!0,get:function(){return o(h).default}});var p=r(7117);Object.defineProperty(t,"ConfigurationError",{enumerable:!0,get:function(){return o(p).default}});var f=r(7073);Object.defineProperty(t,"NotImplementedError",{enumerable:!0,get:function(){return o(f).default}});var g=r(6583);Object.defineProperty(t,"InvalidResponseError",{enumerable:!0,get:function(){return g.InvalidResponseError}});var y=r(6904);Object.defineProperty(t,"OidcProviderError",{enumerable:!0,get:function(){return y.OidcProviderError}});var v=r(2155);Object.defineProperty(t,"createDpopHeader",{enumerable:!0,get:function(){return v.createDpopHeader}}),Object.defineProperty(t,"generateDpopKeyPair",{enumerable:!0,get:function(){return v.generateDpopKeyPair}});var m=r(8687);Object.defineProperty(t,"buildAuthenticatedFetch",{enumerable:!0,get:function(){return m.buildAuthenticatedFetch}});var w=r(7478);Object.defineProperty(t,"mockStorage",{enumerable:!0,get:function(){return w.mockStorage}}),Object.defineProperty(t,"mockStorageUtility",{enumerable:!0,get:function(){return w.mockStorageUtility}}),Object.defineProperty(t,"StorageUtilityMock",{enumerable:!0,get:function(){return w.StorageUtilityMock}}),Object.defineProperty(t,"StorageUtilityGetResponse",{enumerable:!0,get:function(){return w.StorageUtilityGetResponse}})},4725:function(e,t){"use strict";function r(e){try{return new URL(e),!0}catch(t){return!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.handleRegistration=t.determineSigningAlg=void 0,t.determineSigningAlg=function(e,t){var r;return null!==(r=t.find((t=>e.includes(t))))&&void 0!==r?r:null},t.handleRegistration=async function(e,t,n,i){const o=function(e,t){return void 0===e.clientId||r(e.clientId)?t.scopesSupported.includes("webid")&&void 0!==e.clientId&&r(e.clientId)?"solid-oidc":"dynamic":"static"}(e,t);return"dynamic"===o?i.getClient({sessionId:e.sessionId,clientName:e.clientName,redirectUrl:e.redirectUrl},t):(await n.setForUser(e.sessionId,{clientId:e.clientId}),e.clientSecret&&await n.setForUser(e.sessionId,{clientSecret:e.clientSecret}),e.clientName&&await n.setForUser(e.sessionId,{clientName:e.clientName}),{clientId:e.clientId,clientSecret:e.clientSecret,clientName:e.clientName,clientType:o})}},3528:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWebidFromTokenPayload=t.fetchJwks=void 0;const n=r(4098),i=r(2136);async function o(e,t){const r=await(0,n.fetch)(e);if(200!==r.status)throw new Error(`Could not fetch JWKS for [${t}] at [${e}]: ${r.status} ${r.statusText}`);let i;try{i=(await r.json()).keys[0]}catch(o){throw new Error(`Malformed JWKS for [${t}] at [${e}]: ${o.message}`)}return i}t.fetchJwks=o,t.getWebidFromTokenPayload=async function(e,t,r,n){const s=await o(t,r);let a;try{const{payload:t}=await(0,i.jwtVerify)(e,await(0,i.importJWK)(s),{issuer:r,audience:n});a=t}catch(u){throw new Error(`ID token verification failed: ${u.stack}`)}if("string"===typeof a.webid)return a.webid;if("string"!==typeof a.sub)throw new Error(`The ID token ${JSON.stringify(a)} is invalid: it has no 'webid' claim and no 'sub' claim.`);try{return new URL(a.sub),a.sub}catch(u){throw new Error(`The ID token has no 'webid' claim, and its 'sub' claim of [${a.sub}] is invalid as a URL - error [${u}].`)}}},1168:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSupportedTokenType=void 0,t.isSupportedTokenType=function(e){return"string"===typeof e&&["DPoP","Bearer"].includes(e)}},1645:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.USER_SESSION_PREFIX=void 0,t.USER_SESSION_PREFIX="solidClientAuthenticationUser"},2244:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.map={}}async get(e){return this.map[e]||void 0}async set(e,t){this.map[e]=t}async delete(e){delete this.map[e]}}},4574:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.saveSessionInfoToStorage=t.loadOidcContextFromStorage=t.getSessionIdFromOauthState=void 0;const i=r(2136),o=n(r(2029));t.getSessionIdFromOauthState=async function(e,t){return e.getForUser(t,"sessionId")},t.loadOidcContextFromStorage=async function(e,t,r){try{const[n,i,o,s]=await Promise.all([t.getForUser(e,"issuer",{errorIfNull:!0}),t.getForUser(e,"codeVerifier"),t.getForUser(e,"redirectUrl"),t.getForUser(e,"dpop",{errorIfNull:!0})]);await t.deleteForUser(e,"codeVerifier");return{codeVerifier:i,redirectUrl:o,issuerConfig:await r.fetchConfig(n),dpop:"true"===s}}catch(n){throw new Error(`Failed to retrieve OIDC context from storage associated with session [${e}]: ${n}`)}},t.saveSessionInfoToStorage=async function(e,t,r,n,o,s,a){void 0!==o&&await e.setForUser(t,{refreshToken:o},{secure:s}),void 0!==r&&await e.setForUser(t,{webId:r},{secure:s}),void 0!==n&&await e.setForUser(t,{isLoggedIn:n},{secure:s}),void 0!==a&&await e.setForUser(t,{publicKey:JSON.stringify(a.publicKey),privateKey:JSON.stringify(await(0,i.exportJWK)(a.privateKey))},{secure:s})};t.default=class{constructor(e,t){this.secureStorage=e,this.insecureStorage=t,this.RESOURCE_SERVER_SESSION_INFORMATION_KEY="tmp-resource-server-session-info"}getKey(e){return`solidClientAuthenticationUser:${e}`}async getUserData(e,t){const r=await(t?this.secureStorage:this.insecureStorage).get(this.getKey(e));if(void 0===r)return{};try{return JSON.parse(r)}catch(n){throw new o.default(`Data for user [${e}] in [${t?"secure":"unsecure"}] storage is corrupted - expected valid JSON, but got: ${r}`)}}async setUserData(e,t,r){await(r?this.secureStorage:this.insecureStorage).set(this.getKey(e),JSON.stringify(t))}async get(e,t){const r=await((null===t||void 0===t?void 0:t.secure)?this.secureStorage:this.insecureStorage).get(e);if(void 0===r&&(null===t||void 0===t?void 0:t.errorIfNull))throw new o.default(`[${e}] is not stored`);return r}async set(e,t,r){return((null===r||void 0===r?void 0:r.secure)?this.secureStorage:this.insecureStorage).set(e,t)}async delete(e,t){return((null===t||void 0===t?void 0:t.secure)?this.secureStorage:this.insecureStorage).delete(e)}async getForUser(e,t,r){const n=await this.getUserData(e,null===r||void 0===r?void 0:r.secure);let i;if(n&&n[t]||(i=void 0),i=n[t],void 0===i&&(null===r||void 0===r?void 0:r.errorIfNull))throw new o.default(`Field [${t}] for user [${e}] is not stored`);return i||void 0}async setForUser(e,t,r){let n;try{n=await this.getUserData(e,null===r||void 0===r?void 0:r.secure)}catch(i){n={}}await this.setUserData(e,{...n,...t},null===r||void 0===r?void 0:r.secure)}async deleteForUser(e,t,r){const n=await this.getUserData(e,null===r||void 0===r?void 0:r.secure);delete n[t],await this.setUserData(e,n,null===r||void 0===r?void 0:r.secure)}async deleteAllUserData(e,t){await((null===t||void 0===t?void 0:t.secure)?this.secureStorage:this.insecureStorage).delete(this.getKey(e))}async storeResourceServerSessionInfo(e,t,r){var n;const i=JSON.parse(null!==(n=await this.insecureStorage.get(this.RESOURCE_SERVER_SESSION_INFORMATION_KEY))&&void 0!==n?n:"{}");i.webId!==e&&(i.sessions={}),i.webId=e,i.sessions[t]={expiration:r},await this.insecureStorage.set(this.RESOURCE_SERVER_SESSION_INFORMATION_KEY,JSON.stringify(i))}async clearResourceServerSessionInfo(e){var t;const r=JSON.parse(null!==(t=await this.insecureStorage.get(this.RESOURCE_SERVER_SESSION_INFORMATION_KEY))&&void 0!==t?t:"{}");void 0!==r.sessions&&(delete r.sessions[e],0===Object.keys(r.sessions).length?await this.insecureStorage.set(this.RESOURCE_SERVER_SESSION_INFORMATION_KEY,"{}"):await this.insecureStorage.set(this.RESOURCE_SERVER_SESSION_INFORMATION_KEY,JSON.stringify(r)))}}},7478:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mockStorageUtility=t.mockStorage=t.StorageUtilityMock=t.StorageUtilityGetResponse=void 0;const n=r(835);t.StorageUtilityGetResponse="getResponse",t.StorageUtilityMock={get:async(e,r)=>t.StorageUtilityGetResponse,set:async(e,t)=>{},delete:async e=>{},getForUser:async(e,r,n)=>t.StorageUtilityGetResponse,setForUser:async(e,t,r)=>{},deleteForUser:async(e,t,r)=>{},deleteAllUserData:async(e,t)=>{},storeResourceServerSessionInfo:async(e,t,r)=>{},clearResourceServerSessionInfo:async e=>{}};t.mockStorage=e=>{const t=e;return{get:async e=>{if(void 0!==t[e])return"string"===typeof t[e]?t[e]:JSON.stringify(t[e])},set:async(e,r)=>{t[e]=r},delete:async e=>{delete t[e]}}};t.mockStorageUtility=(e,r=!1)=>r?new n.StorageUtility((0,t.mockStorage)(e),(0,t.mockStorage)({})):new n.StorageUtility((0,t.mockStorage)({}),(0,t.mockStorage)(e))},5024:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(2029));t.default=class{constructor(e){this.handleables=e}async getProperHandler(e){const t=await Promise.all(this.handleables.map((t=>t.canHandle(...e))));for(let r=0;r<t.length;r+=1)if(t[r])return this.handleables[r];return null}async canHandle(...e){return null!==await this.getProperHandler(e)}async handle(...e){const t=await this.getProperHandler(e);if(t)return t.handle(...e);throw new i.default(`[${this.constructor.name}] cannot find a suitable handler for: ${e.map((e=>{try{return JSON.stringify(e)}catch(t){return e.toString()}})).join(", ")}`)}}},8831:function(e,t,r){"use strict";r.d(t,{HK:function(){return s},Av:function(){return a}});var n=r(7294);const i={prefix:Math.round(1e10*Math.random()),current:0},o=n.createContext(i);function s(e){let t=(0,n.useContext)(o),r=(0,n.useMemo)((()=>({prefix:t===i?0:++t.prefix,current:0})),[t]);return n.createElement(o.Provider,{value:r},e.children)}Boolean("undefined"!==typeof window&&window.document&&window.document.createElement);function a(){let e=(0,n.useContext)(o)!==i,[t,r]=(0,n.useState)(e);return"undefined"!==typeof window&&e&&(0,n.useLayoutEffect)((()=>{r(!1)}),[]),t}},6010:function(e,t,r){"use strict";function n(e){var t,r,i="";if("string"===typeof e||"number"===typeof e)i+=e;else if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=n(e[t]))&&(i&&(i+=" "),i+=r);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function i(){for(var e,t,r=0,i="";r<arguments.length;)(e=arguments[r++])&&(t=n(e))&&(i&&(i+=" "),i+=t);return i}r.d(t,{Z:function(){return i}})},4098:function(e,t){var r="undefined"!==typeof self?self:this,n=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();!function(e){!function(t){var r="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,i="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),o="FormData"in e,s="ArrayBuffer"in e;if(s)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function c(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function l(e){return"string"!==typeof e&&(e=String(e)),e}function d(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function h(e){this.map={},e instanceof h?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function p(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function f(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function g(e){var t=new FileReader,r=f(t);return t.readAsArrayBuffer(e),r}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"===typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:o&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s&&i&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,r=f(t);return t.readAsText(e),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(e,t){e=c(e),t=l(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},h.prototype.delete=function(e){delete this.map[c(e)]},h.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},h.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},h.prototype.set=function(e,t){this.map[c(e)]=l(t)},h.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},h.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),d(e)},h.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),d(e)},h.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),d(e)},n&&(h.prototype[Symbol.iterator]=h.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(e,t){var r=(t=t||{}).body;if(e instanceof w){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new h(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new h(t.headers)),this.method=function(e){var t=e.toUpperCase();return m.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function b(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function S(e){var t=new h;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}})),t}function _(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new h(t.headers),this.url=t.url||"",this._initBody(e)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},v.call(w.prototype),v.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},_.error=function(){var e=new _(null,{status:0,statusText:""});return e.type="error",e};var E=[301,302,303,307,308];_.redirect=function(e,t){if(-1===E.indexOf(t))throw new RangeError("Invalid status code");return new _(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(k){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function A(e,r){return new Promise((function(n,o){var s=new w(e,r);if(s.signal&&s.signal.aborted)return o(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function u(){a.abort()}a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:S(a.getAllResponseHeaders()||"")};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL");var t="response"in a?a.response:a.responseText;n(new _(t,e))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.onabort=function(){o(new t.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&i&&(a.responseType="blob"),s.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),s.signal&&(s.signal.addEventListener("abort",u),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",u)}),a.send("undefined"===typeof s._bodyInit?null:s._bodyInit)}))}A.polyfill=!0,e.fetch||(e.fetch=A,e.Headers=h,e.Request=w,e.Response=_),t.Headers=h,t.Request=w,t.Response=_,t.fetch=A,Object.defineProperty(t,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(t=i.fetch).default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t},7187:function(e){"use strict";var t,r="object"===typeof Reflect?Reflect:null,n=r&&"function"===typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"===typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!==e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,o),n(r)}function o(){"function"===typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&function(e,t,r){"function"===typeof e.on&&g(e,"error",t,r)}(e,i,{once:!0})}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function c(e,t,r,n){var i,o,s,c;if(a(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]),void 0===s)s=o[t]=r,++e._eventsCount;else if("function"===typeof s?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=u(e))>0&&s.length>i&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,c=l,console&&console.warn&&console.warn(c)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=l.bind(n);return i.listener=r,n.wrapFn=i,i}function h(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"===typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):f(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"===typeof r)return 1;if(void 0!==r)return r.length}return 0}function f(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function g(e,t,r,n){if("function"===typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){n.once&&e.removeEventListener(t,i),r(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!==typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=o[e];if(void 0===u)return!1;if("function"===typeof u)n(u,this,t);else{var c=u.length,l=f(u,c);for(r=0;r<c;++r)n(l[r],this,t)}return!0},o.prototype.addListener=function(e,t){return c(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return c(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,d(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,d(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,n,i,o,s;if(a(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!==typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return h(this,e,!0)},o.prototype.rawListeners=function(e){return h(this,e,!1)},o.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},8875:function(e,t,r){var n;!function(){"use strict";var i=!("undefined"===typeof window||!window.document||!window.document.createElement),o={canUseDOM:i,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen};void 0===(n=function(){return o}.call(t,r,t,e))||(e.exports=n)}()},6363:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return r(8592)}])},3581:function(e,t,r){"use strict";r.d(t,{B:function(){return n}});var n=(0,r(7294).createContext)(null)},1578:function(e,t,r){"use strict";r.d(t,{r:function(){return n},L:function(){return i}});var n=function(e){return o("localStorage")?window.localStorage.getItem(e):null},i=function(e,t){return o("localStorage")?window.localStorage.setItem(e,t):null};function o(e){var t,r,n;try{t=window[e];var i="__storage_test__";return t.setItem(i,i),t.removeItem(i),!0}catch(o){return r=o,(null!=(n=DOMException)&&"undefined"!==typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](r):r instanceof n)&&(22===o.code||1014===o.code||"QuotaExceededError"===o.name||"NS_ERROR_DOM_QUOTA_REACHED"===o.name)&&t&&0!==t.length}}},8592:function(e,t,r){"use strict";r.r(t),r.d(t,{MyApp:function(){return ve},default:function(){return me}});var n=r(5893),i=r(4305),o=r(1163),s=r(7294),a=r(3253),u=r.n(a),c=r(2132),l=r(5434),d=r(8831),h=r(3581),p=(r(906),r(993),r(1578)),f=r(2010),g=r(8520),y=r.n(g);class v{constructor(e){this.value=e}valueOf(){return this.value}}class m extends v{constructor(e="???"){super(e)}toString(e){return`{${this.value}}`}}class w extends v{constructor(e,t={}){super(e),this.opts=t}toString(e){try{return e.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(t){return e.reportError(t),this.value.toString(10)}}}class b extends v{constructor(e,t={}){super(e),this.opts=t}toString(e){try{return e.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(t){return e.reportError(t),new Date(this.value).toISOString()}}}function S(e,t,r){if(r===t)return!0;if(r instanceof w&&t instanceof w&&r.value===t.value)return!0;if(t instanceof w&&"string"===typeof r){if(r===e.memoizeIntlObject(Intl.PluralRules,t.opts).select(t.value))return!0}return!1}function _(e,t,r){return t[r]?F(e,t[r].value):(e.reportError(new RangeError("No default")),new m)}function E(e,t){const r=[],n=Object.create(null);for(const i of t)"narg"===i.type?n[i.name]=A(e,i.value):r.push(A(e,i));return{positional:r,named:n}}function A(e,t){switch(t.type){case"str":return t.value;case"num":return new w(t.value,{minimumFractionDigits:t.precision});case"var":return function(e,{name:t}){let r;if(e.params){if(!Object.prototype.hasOwnProperty.call(e.params,t))return new m(`$${t}`);r=e.params[t]}else{if(!e.args||!Object.prototype.hasOwnProperty.call(e.args,t))return e.reportError(new ReferenceError(`Unknown variable: $${t}`)),new m(`$${t}`);r=e.args[t]}if(r instanceof v)return r;switch(typeof r){case"string":return r;case"number":return new w(r);case"object":if(r instanceof Date)return new b(r.getTime());default:return e.reportError(new TypeError(`Variable type not supported: $${t}, ${typeof r}`)),new m(`$${t}`)}}(e,t);case"mesg":return function(e,{name:t,attr:r}){const n=e.bundle._messages.get(t);if(!n)return e.reportError(new ReferenceError(`Unknown message: ${t}`)),new m(t);if(r){const i=n.attributes[r];return i?F(e,i):(e.reportError(new ReferenceError(`Unknown attribute: ${r}`)),new m(`${t}.${r}`))}if(n.value)return F(e,n.value);return e.reportError(new ReferenceError(`No value: ${t}`)),new m(t)}(e,t);case"term":return function(e,{name:t,attr:r,args:n}){const i=`-${t}`,o=e.bundle._terms.get(i);if(!o)return e.reportError(new ReferenceError(`Unknown term: ${i}`)),new m(i);if(r){const t=o.attributes[r];if(t){e.params=E(e,n).named;const r=F(e,t);return e.params=null,r}return e.reportError(new ReferenceError(`Unknown attribute: ${r}`)),new m(`${i}.${r}`)}e.params=E(e,n).named;const s=F(e,o.value);return e.params=null,s}(e,t);case"func":return function(e,{name:t,args:r}){let n=e.bundle._functions[t];if(!n)return e.reportError(new ReferenceError(`Unknown function: ${t}()`)),new m(`${t}()`);if("function"!==typeof n)return e.reportError(new TypeError(`Function ${t}() is not callable`)),new m(`${t}()`);try{let t=E(e,r);return n(t.positional,t.named)}catch(i){return e.reportError(i),new m(`${t}()`)}}(e,t);case"select":return function(e,{selector:t,variants:r,star:n}){let i=A(e,t);if(i instanceof m)return _(e,r,n);for(const o of r){if(S(e,i,A(e,o.key)))return F(e,o.value)}return _(e,r,n)}(e,t);default:return new m}}function k(e,t){if(e.dirty.has(t))return e.reportError(new RangeError("Cyclic reference")),new m;e.dirty.add(t);const r=[],n=e.bundle._useIsolating&&t.length>1;for(const i of t)if("string"!==typeof i){if(e.placeables++,e.placeables>100)throw e.dirty.delete(t),new RangeError(`Too many placeables expanded: ${e.placeables}, max allowed is 100`);n&&r.push("\u2068"),r.push(A(e,i).toString(e)),n&&r.push("\u2069")}else r.push(e.bundle._transform(i));return e.dirty.delete(t),r.join("")}function F(e,t){return"string"===typeof t?e.bundle._transform(t):k(e,t)}class C{constructor(e,t,r){this.dirty=new WeakSet,this.params=null,this.placeables=0,this.bundle=e,this.errors=t,this.args=r}reportError(e){if(!this.errors)throw e;this.errors.push(e)}memoizeIntlObject(e,t){let r=this.bundle._intls.get(e);r||(r={},this.bundle._intls.set(e,r));let n=JSON.stringify(t);return r[n]||(r[n]=new e(this.bundle.locales,t)),r[n]}}function P(e,t){const r=Object.create(null);for(const[n,i]of Object.entries(e))t.includes(n)&&(r[n]=i.valueOf());return r}const x=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function R(e,t){let r=e[0];if(r instanceof m)return new m(`NUMBER(${r.valueOf()})`);if(r instanceof w)return new w(r.valueOf(),{...r.opts,...P(t,x)});if(r instanceof b)return new w(r.valueOf(),{...P(t,x)});throw new TypeError("Invalid argument to NUMBER")}const T=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function I(e,t){let r=e[0];if(r instanceof m)return new m(`DATETIME(${r.valueOf()})`);if(r instanceof b)return new b(r.valueOf(),{...r.opts,...P(t,T)});if(r instanceof w)return new b(r.valueOf(),{...P(t,T)});throw new TypeError("Invalid argument to DATETIME")}class O{constructor(e,{functions:t,useIsolating:r=!0,transform:n=(e=>e)}={}){this._terms=new Map,this._messages=new Map,this._intls=new WeakMap,this.locales=Array.isArray(e)?e:[e],this._functions={NUMBER:R,DATETIME:I,...t},this._useIsolating=r,this._transform=n}hasMessage(e){return this._messages.has(e)}getMessage(e){return this._messages.get(e)}addResource(e,{allowOverrides:t=!1}={}){const r=[];for(let n=0;n<e.body.length;n++){let i=e.body[n];if(i.id.startsWith("-")){if(!1===t&&this._terms.has(i.id)){r.push(new Error(`Attempt to override an existing term: "${i.id}"`));continue}this._terms.set(i.id,i)}else{if(!1===t&&this._messages.has(i.id)){r.push(new Error(`Attempt to override an existing message: "${i.id}"`));continue}this._messages.set(i.id,i)}}return r}formatPattern(e,t=null,r=null){if("string"===typeof e)return this._transform(e);let n=new C(this,r,t);try{return k(n,e).toString(n)}catch(i){if(n.errors)return n.errors.push(i),(new m).toString(n);throw i}}}const U=/^(-?[a-zA-Z][\w-]*) *= */gm,D=/\.([a-zA-Z][\w-]*) *= */y,j=/\*?\[/y,L=/(-?[0-9]+(?:\.([0-9]+))?)/y,N=/([a-zA-Z][\w-]*)/y,H=/([$-])?([a-zA-Z][\w-]*)(?:\.([a-zA-Z][\w-]*))?/y,M=/^[A-Z][A-Z0-9_-]*$/,B=/([^{}\n\r]+)/y,K=/([^\\"\n\r]*)/y,V=/\\([\\"])/y,W=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{6})/y,$=/^\n+/,J=/ +$/,q=/ *\r?\n/g,z=/( *)$/,G=/{\s*/y,Y=/\s*}/y,X=/\[\s*/y,Z=/\s*] */y,Q=/\s*\(\s*/y,ee=/\s*->\s*/y,te=/\s*:\s*/y,re=/\s*,?\s*/y,ne=/\s+/y;class ie{constructor(e){this.body=[],U.lastIndex=0;let t=0;for(;;){let r=U.exec(e);if(null===r)break;t=U.lastIndex;try{this.body.push(a(r[1]))}catch(b){if(b instanceof SyntaxError)continue;throw b}}function r(r){return r.lastIndex=t,r.test(e)}function n(r,n){if(e[t]===r)return t++,!0;if(n)throw new n(`Expected ${r}`);return!1}function i(e,n){if(r(e))return t=e.lastIndex,!0;if(n)throw new n(`Expected ${e.toString()}`);return!1}function o(r){r.lastIndex=t;let n=r.exec(e);if(null===n)throw new SyntaxError(`Expected ${r.toString()}`);return t=r.lastIndex,n}function s(e){return o(e)[1]}function a(e){let t=u(),n=function(){let e=Object.create(null);for(;r(D);){let t=s(D),r=u();if(null===r)throw new SyntaxError("Expected attribute value");e[t]=r}return e}();if(null===t&&0===Object.keys(n).length)throw new SyntaxError("Expected message value or attributes");return{id:e,value:t,attributes:n}}function u(){let n;if(r(B)&&(n=s(B)),"{"===e[t]||"}"===e[t])return c(n?[n]:[],1/0);let i=v();return i?n?c([n,i],i.length):(i.value=m(i.value,$),c([i],i.length)):n?m(n,J):null}function c(n=[],i){for(;;){if(r(B)){n.push(s(B));continue}if("{"===e[t]){n.push(l());continue}if("}"===e[t])throw new SyntaxError("Unbalanced closing brace");let o=v();if(!o)break;n.push(o),i=Math.min(i,o.length)}let o=n.length-1,a=n[o];"string"===typeof a&&(n[o]=m(a,J));let u=[];for(let e of n)e instanceof oe&&(e=e.value.slice(0,e.value.length-i)),e&&u.push(e);return u}function l(){i(G,SyntaxError);let e=d();if(i(Y))return e;if(i(ee)){let t=function(){let e,t=[],i=0;for(;r(j);){n("*")&&(e=i);let r=p(),o=u();if(null===o)throw new SyntaxError("Expected variant value");t[i++]={key:r,value:o}}if(0===i)return null;if(void 0===e)throw new SyntaxError("Expected default variant");return{variants:t,star:e}}();return i(Y,SyntaxError),{type:"select",selector:e,...t}}throw new SyntaxError("Unclosed placeable")}function d(){if("{"===e[t])return l();if(r(H)){let[,r,n,s=null]=o(H);if("$"===r)return{type:"var",name:n};if(i(Q)){let o=function(){let r=[];for(;;){switch(e[t]){case")":return t++,r;case void 0:throw new SyntaxError("Unclosed argument list")}r.push(h()),i(re)}}();if("-"===r)return{type:"term",name:n,attr:s,args:o};if(M.test(n))return{type:"func",name:n,args:o};throw new SyntaxError("Function names must be all upper-case")}return"-"===r?{type:"term",name:n,attr:s,args:[]}:{type:"mesg",name:n,attr:s}}return f()}function h(){let e=d();return"mesg"!==e.type?e:i(te)?{type:"narg",name:e.name,value:f()}:e}function p(){let e;return i(X,SyntaxError),e=r(L)?g():{type:"str",value:s(N)},i(Z,SyntaxError),e}function f(){if(r(L))return g();if('"'===e[t])return function(){n('"',SyntaxError);let r="";for(;;){if(r+=s(K),"\\"!==e[t]){if(n('"'))return{type:"str",value:r};throw new SyntaxError("Unclosed string literal")}r+=y()}}();throw new SyntaxError("Invalid expression")}function g(){let[,e,t=""]=o(L),r=t.length;return{type:"num",value:parseFloat(e),precision:r}}function y(){if(r(V))return s(V);if(r(W)){let[,e,t]=o(W),r=parseInt(e||t,16);return r<=55295||57344<=r?String.fromCodePoint(r):"\ufffd"}throw new SyntaxError("Unknown escape sequence")}function v(){let r=t;switch(i(ne),e[t]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return w(e.slice(r,t))}return" "===e[t-1]&&w(e.slice(r,t))}function m(e,t){return e.replace(t,"")}function w(e){let t=e.replace(q,"\n"),r=z.exec(e)[1].length;return new oe(t,r)}}}class oe{constructor(e,t){this.value=e,this.length=t}}const se=new RegExp("^([a-z]{2,3}|\\*)(?:-([a-z]{4}|\\*))?(?:-([a-z]{2}|\\*))?(?:-(([0-9][a-z0-9]{3}|[a-z0-9]{5,8})|\\*))?$","i");class ae{constructor(e){const t=se.exec(e.replace(/_/g,"-"));if(!t)return void(this.isWellFormed=!1);let[,r,n,i,o]=t;r&&(this.language=r.toLowerCase()),n&&(this.script=n[0].toUpperCase()+n.slice(1)),i&&(this.region=i.toUpperCase()),this.variant=o,this.isWellFormed=!0}isEqual(e){return this.language===e.language&&this.script===e.script&&this.region===e.region&&this.variant===e.variant}matches(e,t=!1,r=!1){return(this.language===e.language||t&&void 0===this.language||r&&void 0===e.language)&&(this.script===e.script||t&&void 0===this.script||r&&void 0===e.script)&&(this.region===e.region||t&&void 0===this.region||r&&void 0===e.region)&&(this.variant===e.variant||t&&void 0===this.variant||r&&void 0===e.variant)}toString(){return[this.language,this.script,this.region,this.variant].filter((e=>void 0!==e)).join("-")}clearVariants(){this.variant=void 0}clearRegion(){this.region=void 0}addLikelySubtags(){const e=function(e){if(Object.prototype.hasOwnProperty.call(ue,e))return new ae(ue[e]);const t=new ae(e);if(t.language&&ce.includes(t.language))return t.region=t.language.toUpperCase(),t;return null}(this.toString().toLowerCase());return!!e&&(this.language=e.language,this.script=e.script,this.region=e.region,this.variant=e.variant,!0)}}const ue={ar:"ar-arab-eg","az-arab":"az-arab-ir","az-ir":"az-arab-ir",be:"be-cyrl-by",da:"da-latn-dk",el:"el-grek-gr",en:"en-latn-us",fa:"fa-arab-ir",ja:"ja-jpan-jp",ko:"ko-kore-kr",pt:"pt-latn-br",sr:"sr-cyrl-rs","sr-ru":"sr-latn-ru",sv:"sv-latn-se",ta:"ta-taml-in",uk:"uk-cyrl-ua",zh:"zh-hans-cn","zh-hant":"zh-hant-tw","zh-hk":"zh-hant-hk","zh-gb":"zh-hant-gb","zh-us":"zh-hant-us"},ce=["az","bg","cs","de","es","fi","fr","hu","it","lt","lv","nl","pl","ro","ru"];function le(e,t,{strategy:r="filtering",defaultLocale:n}={}){const i=function(e,t,r){const n=new Set,i=new Map;for(let o of t)new ae(o).isWellFormed&&i.set(o,new ae(o));e:for(const o of e){const e=o.toLowerCase(),t=new ae(e);if(void 0!==t.language){for(const t of i.keys())if(e===t.toLowerCase()){if(n.add(t),i.delete(t),"lookup"===r)return Array.from(n);if("filtering"===r)continue;continue e}for(const[e,o]of i.entries())if(o.matches(t,!0,!1)){if(n.add(e),i.delete(e),"lookup"===r)return Array.from(n);if("filtering"===r)continue;continue e}if(t.addLikelySubtags())for(const[e,o]of i.entries())if(o.matches(t,!0,!1)){if(n.add(e),i.delete(e),"lookup"===r)return Array.from(n);if("filtering"===r)continue;continue e}t.clearVariants();for(const[e,o]of i.entries())if(o.matches(t,!0,!0)){if(n.add(e),i.delete(e),"lookup"===r)return Array.from(n);if("filtering"===r)continue;continue e}if(t.clearRegion(),t.addLikelySubtags())for(const[e,o]of i.entries())if(o.matches(t,!0,!1)){if(n.add(e),i.delete(e),"lookup"===r)return Array.from(n);if("filtering"===r)continue;continue e}t.clearRegion();for(const[e,o]of i.entries())if(o.matches(t,!0,!0)){if(n.add(e),i.delete(e),"lookup"===r)return Array.from(n);if("filtering"===r)continue;continue e}}}return Array.from(n)}(Array.from(Object(e)).map(String),Array.from(Object(t)).map(String),r);if("lookup"===r){if(void 0===n)throw new Error("defaultLocale cannot be undefined for strategy `lookup`");0===i.length&&i.push(n)}else n&&!i.includes(n)&&i.push(n);return i}function de(){var e=y().mark((function e(t){var r,i,o,s,a,u,c,l;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=le(t,Object.keys(n),{defaultLocale:"en-GB"}),i=!0,o=!1,s=void 0,e.prev=2,a=r[Symbol.iterator]();case 4:if(i=(u=a.next()).done){e.next=13;break}return c=u.value,(l=new O(c)).addResource(n[c]),e.next=10,l;case 10:i=!0,e.next=4;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),o=!0,s=e.t0;case 19:e.prev=19,e.prev=20,i||null==a.return||a.return();case 22:if(e.prev=22,!o){e.next=25;break}throw s;case 25:return e.finish(22);case 26:return e.finish(19);case 27:case"end":return e.stop()}}),e,null,[[2,15,19,27],[20,,22,26]])})),t=r(8109),n={},i=!0,o=!1,s=void 0;try{for(var a,u=t.keys()[Symbol.iterator]();!(i=(a=u.next()).done);i=!0){var c=a.value,l=c.substring("./".length,c.length-".ftl".length);l&&(n[l]=new ie(t(c)))}}catch(h){o=!0,s=h}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}var d="undefined"===typeof document?function(e){return[{nodeName:"#text",textContent:e.replace(/\<(.*?)\>/g,"")}]}:void 0;return new f._x(e("undefined"!==typeof navigator?navigator.languages:[]),d)}function he(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){he(e,t,r[t])}))}return e}if("object"===typeof document){var fe=document.querySelector("#appWrapper > *:first-child");u().setAppElement(fe)}l.FU5;var ge=window.matchMedia("(prefers-reduced-motion)"),ye=(null===ge||void 0===ge?void 0:ge.matches)?(0,c.vU)({enter:"none",exit:"none"}):c.Mi,ve=function(e){var t=e.Component,r=e.pageProps,a=(0,s.useState)(null),u=a[0],l=a[1],g=(0,o.useRouter)();return(0,s.useEffect)((function(){l(void 0),(0,i.handleIncomingRedirect)({restorePreviousSession:!1,useEssSession:!1}).then((function(e){if(e&&e.isLoggedIn){var t=p.r("last-attempted-idp");"string"===typeof t&&p.L("last-successful-idp",t),l(e)}else l(null)})),(0,i.onLogout)((function(){return l(null)})),(0,i.onSessionRestore)((function(e){g.replace(e)}))}),[g]),(0,n.jsx)(d.HK,{children:(0,n.jsx)(h.B.Provider,{value:u,children:(0,n.jsx)(f._C,{l10n:de(),children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t,pe({},r)),(0,n.jsx)(c.Ix,{bodyClassName:function(){return"font-white block p-3 flex-grow leading-5"},position:"bottom-left",closeButton:!1,autoClose:5e3,transition:ye,icon:!1,theme:"dark"})]})})})})},me=ve},993:function(){},906:function(){},1163:function(e,t,r){e.exports=r(387)},2703:function(e,t,r){"use strict";var n=r(414);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,r,i,o,s){if(s!==n){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return r.PropTypes=r,r}},5697:function(e,t,r){e.exports=r(2703)()},414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},8357:function(e,t,r){"use strict";r.d(t,{w_:function(){return c}});var n=r(7294),i={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o=n.createContext&&n.createContext(i),s=function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};function u(e){return e&&e.map((function(e,t){return n.createElement(e.tag,s({key:t},e.attr),u(e.child))}))}function c(e){return function(t){return n.createElement(l,s({attr:s({},e.attr)},t),u(e.child))}}function l(e){var t=function(t){var r,i=e.attr,o=e.size,u=e.title,c=a(e,["attr","size","title"]),l=o||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),n.createElement("svg",s({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,c,{className:r,style:s(s({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),u&&n.createElement("title",null,u),e.children)};return void 0!==o?n.createElement(o.Consumer,null,(function(e){return t(e)})):t(i)}},5434:function(e,t,r){"use strict";r.d(t,{mp2:function(){return i},x06:function(){return o},Fqs:function(){return s},$l_:function(){return a},BAW:function(){return u},tEr:function(){return c},s_P:function(){return l},zmo:function(){return d},HhX:function(){return h},FU5:function(){return p},Faw:function(){return f},Yc6:function(){return g}});var n=r(8357);function i(e){return(0,n.w_)({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"}}]})(e)}function o(e){return(0,n.w_)({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}}]})(e)}function s(e){return(0,n.w_)({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"}}]})(e)}function a(e){return(0,n.w_)({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"}}]})(e)}function u(e){return(0,n.w_)({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M2.5 4v3h5v12h3V7h5V4h-13zm19 5h-9v3h3v7h3v-7h3V9z"}}]})(e)}function c(e){return(0,n.w_)({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"}}]})(e)}function l(e){return(0,n.w_)({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"}}]})(e)}function d(e){return(0,n.w_)({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}}]})(e)}function h(e){return(0,n.w_)({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}}]})(e)}function p(e){return(0,n.w_)({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}}]})(e)}function f(e){return(0,n.w_)({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}}]})(e)}function g(e){return(0,n.w_)({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}}]})(e)}},6871:function(e,t,r){"use strict";function n(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function i(e){this.setState(function(t){var r=this.constructor.getDerivedStateFromProps(e,t);return null!==r&&void 0!==r?r:null}.bind(this))}function o(e,t){try{var r=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}function s(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof e.getDerivedStateFromProps&&"function"!==typeof t.getSnapshotBeforeUpdate)return e;var r=null,s=null,a=null;if("function"===typeof t.componentWillMount?r="componentWillMount":"function"===typeof t.UNSAFE_componentWillMount&&(r="UNSAFE_componentWillMount"),"function"===typeof t.componentWillReceiveProps?s="componentWillReceiveProps":"function"===typeof t.UNSAFE_componentWillReceiveProps&&(s="UNSAFE_componentWillReceiveProps"),"function"===typeof t.componentWillUpdate?a="componentWillUpdate":"function"===typeof t.UNSAFE_componentWillUpdate&&(a="UNSAFE_componentWillUpdate"),null!==r||null!==s||null!==a){var u=e.displayName||e.name,c="function"===typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+u+" uses "+c+" but also contains the following legacy lifecycles:"+(null!==r?"\n  "+r:"")+(null!==s?"\n  "+s:"")+(null!==a?"\n  "+a:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof e.getDerivedStateFromProps&&(t.componentWillMount=n,t.componentWillReceiveProps=i),"function"===typeof t.getSnapshotBeforeUpdate){if("function"!==typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=o;var l=t.componentDidUpdate;t.componentDidUpdate=function(e,t,r){var n=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:r;l.call(this,e,t,n)}}return e}r.r(t),r.d(t,{polyfill:function(){return s}}),n.__suppressDeprecationWarning=!0,i.__suppressDeprecationWarning=!0,o.__suppressDeprecationWarning=!0},9983:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bodyOpenClassName=t.portalClassName=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(7294),s=f(o),a=f(r(3935)),u=f(r(5697)),c=f(r(8747)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(7149)),d=r(1112),h=f(d),p=r(6871);function f(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var v=t.portalClassName="ReactModalPortal",m=t.bodyOpenClassName="ReactModal__Body--open",w=d.canUseDOM&&void 0!==a.default.createPortal,b=function(){return w?a.default.createPortal:a.default.unstable_renderSubtreeIntoContainer};function S(e){return e()}var _=function(e){function t(){var e,r,i;g(this,t);for(var o=arguments.length,u=Array(o),l=0;l<o;l++)u[l]=arguments[l];return r=i=y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),i.removePortal=function(){!w&&a.default.unmountComponentAtNode(i.node);var e=S(i.props.parentSelector);e&&e.contains(i.node)?e.removeChild(i.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},i.portalRef=function(e){i.portal=e},i.renderPortal=function(e){var r=b()(i,s.default.createElement(c.default,n({defaultStyles:t.defaultStyles},e)),i.node);i.portalRef(r)},y(i,r)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){d.canUseDOM&&(w||(this.node=document.createElement("div")),this.node.className=this.props.portalClassName,S(this.props.parentSelector).appendChild(this.node),!w&&this.renderPortal(this.props))}},{key:"getSnapshotBeforeUpdate",value:function(e){return{prevParent:S(e.parentSelector),nextParent:S(this.props.parentSelector)}}},{key:"componentDidUpdate",value:function(e,t,r){if(d.canUseDOM){var n=this.props,i=n.isOpen,o=n.portalClassName;e.portalClassName!==o&&(this.node.className=o);var s=r.prevParent,a=r.nextParent;a!==s&&(s.removeChild(this.node),a.appendChild(this.node)),(e.isOpen||i)&&!w&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(d.canUseDOM&&this.node&&this.portal){var e=this.portal.state,t=Date.now(),r=e.isOpen&&this.props.closeTimeoutMS&&(e.closesAt||t+this.props.closeTimeoutMS);r?(e.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,r-t)):this.removePortal()}}},{key:"render",value:function(){return d.canUseDOM&&w?(!this.node&&w&&(this.node=document.createElement("div")),b()(s.default.createElement(c.default,n({ref:this.portalRef,defaultStyles:t.defaultStyles},this.props)),this.node)):null}}],[{key:"setAppElement",value:function(e){l.setElement(e)}}]),t}(o.Component);_.propTypes={isOpen:u.default.bool.isRequired,style:u.default.shape({content:u.default.object,overlay:u.default.object}),portalClassName:u.default.string,bodyOpenClassName:u.default.string,htmlOpenClassName:u.default.string,className:u.default.oneOfType([u.default.string,u.default.shape({base:u.default.string.isRequired,afterOpen:u.default.string.isRequired,beforeClose:u.default.string.isRequired})]),overlayClassName:u.default.oneOfType([u.default.string,u.default.shape({base:u.default.string.isRequired,afterOpen:u.default.string.isRequired,beforeClose:u.default.string.isRequired})]),appElement:u.default.instanceOf(h.default),onAfterOpen:u.default.func,onRequestClose:u.default.func,closeTimeoutMS:u.default.number,ariaHideApp:u.default.bool,shouldFocusAfterRender:u.default.bool,shouldCloseOnOverlayClick:u.default.bool,shouldReturnFocusAfterClose:u.default.bool,preventScroll:u.default.bool,parentSelector:u.default.func,aria:u.default.object,data:u.default.object,role:u.default.string,contentLabel:u.default.string,shouldCloseOnEsc:u.default.bool,overlayRef:u.default.func,contentRef:u.default.func,id:u.default.string,overlayElement:u.default.func,contentElement:u.default.func},_.defaultProps={isOpen:!1,portalClassName:v,bodyOpenClassName:m,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(e,t){return s.default.createElement("div",e,t)},contentElement:function(e,t){return s.default.createElement("div",e,t)}},_.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},(0,p.polyfill)(_),t.default=_},8747:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(7294),a=g(r(5697)),u=f(r(9685)),c=g(r(8338)),l=f(r(7149)),d=f(r(2409)),h=g(r(1112)),p=g(r(9623));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}r(5063);var y={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},v=0,m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.setOverlayRef=function(e){r.overlay=e,r.props.overlayRef&&r.props.overlayRef(e)},r.setContentRef=function(e){r.content=e,r.props.contentRef&&r.props.contentRef(e)},r.afterClose=function(){var e=r.props,t=e.appElement,n=e.ariaHideApp,i=e.htmlOpenClassName,o=e.bodyOpenClassName;o&&d.remove(document.body,o),i&&d.remove(document.getElementsByTagName("html")[0],i),n&&v>0&&0===(v-=1)&&l.show(t),r.props.shouldFocusAfterRender&&(r.props.shouldReturnFocusAfterClose?(u.returnFocus(r.props.preventScroll),u.teardownScopedFocus()):u.popWithoutFocus()),r.props.onAfterClose&&r.props.onAfterClose(),p.default.deregister(r)},r.open=function(){r.beforeOpen(),r.state.afterOpen&&r.state.beforeClose?(clearTimeout(r.closeTimer),r.setState({beforeClose:!1})):(r.props.shouldFocusAfterRender&&(u.setupScopedFocus(r.node),u.markForFocusLater()),r.setState({isOpen:!0},(function(){r.setState({afterOpen:!0}),r.props.isOpen&&r.props.onAfterOpen&&r.props.onAfterOpen({overlayEl:r.overlay,contentEl:r.content})})))},r.close=function(){r.props.closeTimeoutMS>0?r.closeWithTimeout():r.closeWithoutTimeout()},r.focusContent=function(){return r.content&&!r.contentHasFocus()&&r.content.focus({preventScroll:!0})},r.closeWithTimeout=function(){var e=Date.now()+r.props.closeTimeoutMS;r.setState({beforeClose:!0,closesAt:e},(function(){r.closeTimer=setTimeout(r.closeWithoutTimeout,r.state.closesAt-Date.now())}))},r.closeWithoutTimeout=function(){r.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},r.afterClose)},r.handleKeyDown=function(e){9===e.keyCode&&(0,c.default)(r.content,e),r.props.shouldCloseOnEsc&&27===e.keyCode&&(e.stopPropagation(),r.requestClose(e))},r.handleOverlayOnClick=function(e){null===r.shouldClose&&(r.shouldClose=!0),r.shouldClose&&r.props.shouldCloseOnOverlayClick&&(r.ownerHandlesClose()?r.requestClose(e):r.focusContent()),r.shouldClose=null},r.handleContentOnMouseUp=function(){r.shouldClose=!1},r.handleOverlayOnMouseDown=function(e){r.props.shouldCloseOnOverlayClick||e.target!=r.overlay||e.preventDefault()},r.handleContentOnClick=function(){r.shouldClose=!1},r.handleContentOnMouseDown=function(){r.shouldClose=!1},r.requestClose=function(e){return r.ownerHandlesClose()&&r.props.onRequestClose(e)},r.ownerHandlesClose=function(){return r.props.onRequestClose},r.shouldBeClosed=function(){return!r.state.isOpen&&!r.state.beforeClose},r.contentHasFocus=function(){return document.activeElement===r.content||r.content.contains(document.activeElement)},r.buildClassName=function(e,t){var n="object"===("undefined"===typeof t?"undefined":i(t))?t:{base:y[e],afterOpen:y[e]+"--after-open",beforeClose:y[e]+"--before-close"},o=n.base;return r.state.afterOpen&&(o=o+" "+n.afterOpen),r.state.beforeClose&&(o=o+" "+n.beforeClose),"string"===typeof t&&t?o+" "+t:o},r.attributesFromObject=function(e,t){return Object.keys(t).reduce((function(r,n){return r[e+"-"+n]=t[n],r}),{})},r.state={afterOpen:!1,beforeClose:!1},r.shouldClose=null,r.moveFromContentToOverlay=null,r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(e,t){this.props.isOpen&&!e.isOpen?this.open():!this.props.isOpen&&e.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!t.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer)}},{key:"beforeOpen",value:function(){var e=this.props,t=e.appElement,r=e.ariaHideApp,n=e.htmlOpenClassName,i=e.bodyOpenClassName;i&&d.add(document.body,i),n&&d.add(document.getElementsByTagName("html")[0],n),r&&(v+=1,l.hide(t)),p.default.register(this)}},{key:"render",value:function(){var e=this.props,t=e.id,r=e.className,i=e.overlayClassName,o=e.defaultStyles,s=e.children,a=r?{}:o.content,u=i?{}:o.overlay;if(this.shouldBeClosed())return null;var c={ref:this.setOverlayRef,className:this.buildClassName("overlay",i),style:n({},u,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},l=n({id:t,ref:this.setContentRef,style:n({},a,this.props.style.content),className:this.buildClassName("content",r),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",n({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),d=this.props.contentElement(l,s);return this.props.overlayElement(c,d)}}]),t}(s.Component);m.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},m.propTypes={isOpen:a.default.bool.isRequired,defaultStyles:a.default.shape({content:a.default.object,overlay:a.default.object}),style:a.default.shape({content:a.default.object,overlay:a.default.object}),className:a.default.oneOfType([a.default.string,a.default.object]),overlayClassName:a.default.oneOfType([a.default.string,a.default.object]),bodyOpenClassName:a.default.string,htmlOpenClassName:a.default.string,ariaHideApp:a.default.bool,appElement:a.default.instanceOf(h.default),onAfterOpen:a.default.func,onAfterClose:a.default.func,onRequestClose:a.default.func,closeTimeoutMS:a.default.number,shouldFocusAfterRender:a.default.bool,shouldCloseOnOverlayClick:a.default.bool,shouldReturnFocusAfterClose:a.default.bool,preventScroll:a.default.bool,role:a.default.string,contentLabel:a.default.string,aria:a.default.object,data:a.default.object,children:a.default.node,shouldCloseOnEsc:a.default.bool,overlayRef:a.default.func,contentRef:a.default.func,id:a.default.string,overlayElement:a.default.func,contentElement:a.default.func,testId:a.default.string},t.default=m,e.exports=t.default},7149:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertNodeList=u,t.setElement=function(e){var t=e;if("string"===typeof t&&s.canUseDOM){var r=document.querySelectorAll(t);u(r,t),t="length"in r?r[0]:r}return a=t||a},t.validateElement=c,t.hide=function(e){c(e)&&(e||a).setAttribute("aria-hidden","true")},t.show=function(e){c(e)&&(e||a).removeAttribute("aria-hidden")},t.documentNotReadyOrSSRTesting=function(){a=null},t.resetForTesting=function(){a=null};var n,i=r(2473),o=(n=i)&&n.__esModule?n:{default:n},s=r(1112);var a=null;function u(e,t){if(!e||!e.length)throw new Error("react-modal: No elements were found for selector "+t+".")}function c(e){return!(!e&&!a)||((0,o.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),!1)}},5063:function(e,t,r){"use strict";var n,i=r(9623),o=(n=i)&&n.__esModule?n:{default:n};var s=void 0,a=void 0,u=[];function c(){0!==u.length&&u[u.length-1].focusContent()}o.default.subscribe((function(e,t){s&&a||((s=document.createElement("div")).setAttribute("data-react-modal-body-trap",""),s.style.position="absolute",s.style.opacity="0",s.setAttribute("tabindex","0"),s.addEventListener("focus",c),(a=s.cloneNode()).addEventListener("focus",c)),(u=t).length>0?(document.body.firstChild!==s&&document.body.insertBefore(s,document.body.firstChild),document.body.lastChild!==a&&document.body.appendChild(a)):(s.parentElement&&s.parentElement.removeChild(s),a.parentElement&&a.parentElement.removeChild(a))}))},2409:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dumpClassLists=function(){0};var r={},n={};t.add=function(e,t){return i=e.classList,o="html"==e.nodeName.toLowerCase()?r:n,void t.split(" ").forEach((function(e){!function(e,t){e[t]||(e[t]=0),e[t]+=1}(o,e),i.add(e)}));var i,o},t.remove=function(e,t){return i=e.classList,o="html"==e.nodeName.toLowerCase()?r:n,void t.split(" ").forEach((function(e){!function(e,t){e[t]&&(e[t]-=1)}(o,e),0===o[e]&&i.remove(e)}));var i,o}},9685:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleBlur=c,t.handleFocus=l,t.markForFocusLater=function(){s.push(document.activeElement)},t.returnFocus=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=null;try{return void(0!==s.length&&(t=s.pop()).focus({preventScroll:e}))}catch(r){console.warn(["You tried to return focus to",t,"but it is not in the DOM anymore"].join(" "))}},t.popWithoutFocus=function(){s.length>0&&s.pop()},t.setupScopedFocus=function(e){a=e,window.addEventListener?(window.addEventListener("blur",c,!1),document.addEventListener("focus",l,!0)):(window.attachEvent("onBlur",c),document.attachEvent("onFocus",l))},t.teardownScopedFocus=function(){a=null,window.addEventListener?(window.removeEventListener("blur",c),document.removeEventListener("focus",l)):(window.detachEvent("onBlur",c),document.detachEvent("onFocus",l))};var n,i=r(7845),o=(n=i)&&n.__esModule?n:{default:n};var s=[],a=null,u=!1;function c(){u=!0}function l(){if(u){if(u=!1,!a)return;setTimeout((function(){a.contains(document.activeElement)||((0,o.default)(a)[0]||a).focus()}),0)}}},9623:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.register=function(e){-1===t.openInstances.indexOf(e)&&(t.openInstances.push(e),t.emit("register"))},this.deregister=function(e){var r=t.openInstances.indexOf(e);-1!==r&&(t.openInstances.splice(r,1),t.emit("deregister"))},this.subscribe=function(e){t.subscribers.push(e)},this.emit=function(e){t.subscribers.forEach((function(r){return r(e,t.openInstances.slice())}))},this.openInstances=[],this.subscribers=[]};t.default=r,e.exports=t.default},1112:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canUseDOM=void 0;var n,i=r(8875);var o=((n=i)&&n.__esModule?n:{default:n}).default,s=o.canUseDOM?window.HTMLElement:{};t.canUseDOM=o.canUseDOM;t.default=s},8338:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=(0,o.default)(e);if(!r.length)return void t.preventDefault();var n=void 0,i=t.shiftKey,s=r[0],a=r[r.length-1];if(e===document.activeElement){if(!i)return;n=a}a!==document.activeElement||i||(n=s);s===document.activeElement&&i&&(n=a);if(n)return t.preventDefault(),void n.focus();var u=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent);if(null==u||"Chrome"==u[1]||null!=/\biPod\b|\biPad\b/g.exec(navigator.userAgent))return;var c=r.indexOf(document.activeElement);c>-1&&(c+=i?-1:1);if("undefined"===typeof(n=r[c]))return t.preventDefault(),void(n=i?a:s).focus();t.preventDefault(),n.focus()};var n,i=r(7845),o=(n=i)&&n.__esModule?n:{default:n};e.exports=t.default},7845:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return[].slice.call(e.querySelectorAll("*"),0).filter(o)};var r=/input|select|textarea|button|object/;function n(e){var t=e.offsetWidth<=0&&e.offsetHeight<=0;if(t&&!e.innerHTML)return!0;var r=window.getComputedStyle(e);return t?"visible"!==r.getPropertyValue("overflow")||e.scrollWidth<=0&&e.scrollHeight<=0:"none"==r.getPropertyValue("display")}function i(e,t){var i=e.nodeName.toLowerCase();return(r.test(i)&&!e.disabled||"a"===i&&e.href||t)&&function(e){for(var t=e;t&&t!==document.body;){if(n(t))return!1;t=t.parentNode}return!0}(e)}function o(e){var t=e.getAttribute("tabindex");null===t&&(t=void 0);var r=isNaN(t);return(r||t>=0)&&i(e,!r)}e.exports=t.default},3253:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(9983),o=(n=i)&&n.__esModule?n:{default:n};t.default=o.default,e.exports=t.default},2132:function(e,t,r){"use strict";r.d(t,{Mi:function(){return U},Ix:function(){return D},vU:function(){return m},Am:function(){return q}});var n=r(7294),i=r(6010),o=r(3935);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function a(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function u(e){return"number"===typeof e&&!isNaN(e)}function c(e){return"boolean"===typeof e}function l(e){return"string"===typeof e}function d(e){return"function"===typeof e}function h(e){return l(e)||d(e)?e:null}function p(e){return 0===e||e}var f=!("undefined"===typeof window||!window.document||!window.document.createElement);function g(e){return(0,n.isValidElement)(e)||l(e)||d(e)||u(e)}var y={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},v={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"};function m(e){var t=e.enter,r=e.exit,i=e.appendPosition,o=void 0!==i&&i,s=e.collapse,a=void 0===s||s,u=e.collapseDuration,c=void 0===u?300:u;return function(e){var i=e.children,s=e.position,u=e.preventExitTransition,l=e.done,d=e.nodeRef,h=e.isIn,p=o?t+"--"+s:t,f=o?r+"--"+s:r,g=(0,n.useRef)(),y=(0,n.useRef)(0);function v(e){if(e.target===d.current){var t=d.current;t.removeEventListener("animationend",v),0===y.current&&(t.className=g.current)}}function m(){var e=d.current;e.removeEventListener("animationend",m),a?function(e,t,r){void 0===r&&(r=300);var n=e.scrollHeight,i=e.style;requestAnimationFrame((function(){i.minHeight="initial",i.height=n+"px",i.transition="all "+r+"ms",requestAnimationFrame((function(){i.height="0",i.padding="0",i.margin="0",setTimeout(t,r)}))}))}(e,l,c):l()}return(0,n.useLayoutEffect)((function(){!function(){var e=d.current;g.current=e.className,e.className+=" "+p,e.addEventListener("animationend",v)}()}),[]),(0,n.useEffect)((function(){h||(u?m():function(){y.current=1;var e=d.current;e.className+=" "+f,e.addEventListener("animationend",m)}())}),[h]),n.createElement(n.Fragment,null,i)}}var w={list:new Map,emitQueue:new Map,on:function(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off:function(e,t){if(t){var r=this.list.get(e).filter((function(e){return e!==t}));return this.list.set(e,r),this}return this.list.delete(e),this},cancelEmit:function(e){var t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit:function(e){for(var t=this,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];this.list.has(e)&&this.list.get(e).forEach((function(r){var i=setTimeout((function(){r.apply(void 0,n)}),0);t.emitQueue.has(e)||t.emitQueue.set(e,[]),t.emitQueue.get(e).push(i)}))}};function b(e,t){void 0===t&&(t=!1);var r=(0,n.useRef)(e);return(0,n.useEffect)((function(){t&&(r.current=e)})),r.current}function S(e,t){switch(t.type){case 0:return[].concat(e,[t.toastId]).filter((function(e){return e!==t.staleId}));case 1:return p(t.toastId)?e.filter((function(e){return e!==t.toastId})):[]}}var _=["delay","staleId"];function E(e){var t=(0,n.useReducer)((function(e){return e+1}),0)[1],r=(0,n.useReducer)(S,[]),i=r[0],o=r[1],s=(0,n.useRef)(null),f=b(0),y=b([]),v=b({}),m=b({toastKey:1,displayedToast:0,props:e,containerId:null,isToastActive:E,getToast:function(e){return v[e]||null}});function E(e){return-1!==i.indexOf(e)}function A(e){var t=e.containerId;!m.props.limit||t&&m.containerId!==t||(f-=y.length,y=[])}function k(e){o({type:1,toastId:e})}function F(){var e=y.shift();P(e.toastContent,e.toastProps,e.staleId)}function C(e,r){var i=r.delay,o=r.staleId,w=a(r,_);if(g(e)&&!function(e){var t=e.containerId,r=e.toastId,n=e.updateId;return!!(!s.current||m.props.enableMultiContainer&&t!==m.props.containerId||v[r]&&null==n)}(w)){var b=w.toastId,S=w.updateId,E=w.data,A=m.props,C=function(){return k(b)},x=null==w.updateId;x&&f++;var R,T,I={toastId:b,updateId:S,isLoading:w.isLoading,theme:w.theme||A.theme,icon:w.icon||A.icon,isIn:!1,key:w.key||m.toastKey++,type:w.type,closeToast:C,closeButton:w.closeButton,rtl:A.rtl,position:w.position||A.position,transition:w.transition||A.transition,className:h(w.className||A.toastClassName),bodyClassName:h(w.bodyClassName||A.bodyClassName),style:w.style||A.toastStyle,bodyStyle:w.bodyStyle||A.bodyStyle,onClick:w.onClick||A.onClick,pauseOnHover:c(w.pauseOnHover)?w.pauseOnHover:A.pauseOnHover,pauseOnFocusLoss:c(w.pauseOnFocusLoss)?w.pauseOnFocusLoss:A.pauseOnFocusLoss,draggable:c(w.draggable)?w.draggable:A.draggable,draggablePercent:u(w.draggablePercent)?w.draggablePercent:A.draggablePercent,draggableDirection:w.draggableDirection||A.draggableDirection,closeOnClick:c(w.closeOnClick)?w.closeOnClick:A.closeOnClick,progressClassName:h(w.progressClassName||A.progressClassName),progressStyle:w.progressStyle||A.progressStyle,autoClose:!w.isLoading&&(R=w.autoClose,T=A.autoClose,!1===R||u(R)&&R>0?R:T),hideProgressBar:c(w.hideProgressBar)?w.hideProgressBar:A.hideProgressBar,progress:w.progress,role:l(w.role)?w.role:A.role,deleteToast:function(){!function(e){delete v[e];var r=y.length;(f=p(e)?f-1:f-m.displayedToast)<0&&(f=0);if(r>0){var n=p(e)?1:m.props.limit;if(1===r||1===n)m.displayedToast++,F();else{var i=n>r?r:n;m.displayedToast=i;for(var o=0;o<i;o++)F()}}else t()}(b)}};d(w.onOpen)&&(I.onOpen=w.onOpen),d(w.onClose)&&(I.onClose=w.onClose),"y"===I.draggableDirection&&80===I.draggablePercent&&(I.draggablePercent*=1.5);var O=A.closeButton;!1===w.closeButton||g(w.closeButton)?O=w.closeButton:!0===w.closeButton&&(O=!g(A.closeButton)||A.closeButton),I.closeButton=O;var U=e;(0,n.isValidElement)(e)&&!l(e.type)?U=(0,n.cloneElement)(e,{closeToast:C,toastProps:I,data:E}):d(e)&&(U=e({closeToast:C,toastProps:I,data:E})),A.limit&&A.limit>0&&f>A.limit&&x?y.push({toastContent:U,toastProps:I,staleId:o}):u(i)&&i>0?setTimeout((function(){P(U,I,o)}),i):P(U,I,o)}}function P(e,t,r){var n=t.toastId;r&&delete v[r],v[n]={content:e,props:t},o({type:0,toastId:n,staleId:r})}return(0,n.useEffect)((function(){return m.containerId=e.containerId,w.cancelEmit(3).on(0,C).on(1,(function(e){return s.current&&k(e)})).on(5,A).emit(2,m),function(){return w.emit(3,m)}}),[]),(0,n.useEffect)((function(){m.isToastActive=E,m.displayedToast=i.length,w.emit(4,i.length,e.containerId)}),[i]),(0,n.useEffect)((function(){m.props=e})),{getToastToRender:function(t){for(var r={},n=e.newestOnTop?Object.keys(v).reverse():Object.keys(v),i=0;i<n.length;i++){var o=v[n[i]],s=o.props.position;r[s]||(r[s]=[]),r[s].push(o)}return Object.keys(r).map((function(e){return t(e,r[e])}))},collection:v,containerRef:s,isToastActive:E}}function A(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function k(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function F(e){var t=(0,n.useState)(!0),r=t[0],i=t[1],o=(0,n.useState)(!1),s=o[0],a=o[1],u=(0,n.useRef)(null),c=b({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null}),l=b(e,!0),h=e.autoClose,p=e.pauseOnHover,f=e.closeToast,g=e.onClick,y=e.closeOnClick;function v(t){if(e.draggable){var r=u.current;c.canCloseOnClick=!0,c.canDrag=!0,c.boundingRect=r.getBoundingClientRect(),r.style.transition="",c.x=A(t.nativeEvent),c.y=k(t.nativeEvent),"x"===e.draggableDirection?(c.start=c.x,c.removalDistance=r.offsetWidth*(e.draggablePercent/100)):(c.start=c.y,c.removalDistance=r.offsetHeight*(e.draggablePercent/100))}}function m(){if(c.boundingRect){var t=c.boundingRect,r=t.top,n=t.bottom,i=t.left,o=t.right;e.pauseOnHover&&c.x>=i&&c.x<=o&&c.y>=r&&c.y<=n?S():w()}}function w(){i(!0)}function S(){i(!1)}function _(t){if(c.canDrag){t.preventDefault();var n=u.current;r&&S(),c.x=A(t),c.y=k(t),"x"===e.draggableDirection?c.delta=c.x-c.start:c.delta=c.y-c.start,c.start!==c.x&&(c.canCloseOnClick=!1),n.style.transform="translate"+e.draggableDirection+"("+c.delta+"px)",n.style.opacity=""+(1-Math.abs(c.delta/c.removalDistance))}}function E(){var t=u.current;if(c.canDrag){if(c.canDrag=!1,Math.abs(c.delta)>c.removalDistance)return a(!0),void e.closeToast();t.style.transition="transform 0.2s, opacity 0.2s",t.style.transform="translate"+e.draggableDirection+"(0)",t.style.opacity="1"}}(0,n.useEffect)((function(){return d(e.onOpen)&&e.onOpen((0,n.isValidElement)(e.children)&&e.children.props),function(){d(l.onClose)&&l.onClose((0,n.isValidElement)(l.children)&&l.children.props)}}),[]),(0,n.useEffect)((function(){return e.draggable&&(document.addEventListener("mousemove",_),document.addEventListener("mouseup",E),document.addEventListener("touchmove",_),document.addEventListener("touchend",E)),function(){e.draggable&&(document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",E),document.removeEventListener("touchmove",_),document.removeEventListener("touchend",E))}}),[e.draggable]),(0,n.useEffect)((function(){return e.pauseOnFocusLoss&&function(){document.hasFocus()||S();window.addEventListener("focus",w),window.addEventListener("blur",S)}(),function(){e.pauseOnFocusLoss&&(window.removeEventListener("focus",w),window.removeEventListener("blur",S))}}),[e.pauseOnFocusLoss]);var F={onMouseDown:v,onTouchStart:v,onMouseUp:m,onTouchEnd:m};return h&&p&&(F.onMouseEnter=S,F.onMouseLeave=w),y&&(F.onClick=function(e){g&&g(e),c.canCloseOnClick&&f()}),{playToast:w,pauseToast:S,isRunning:r,preventExitTransition:s,toastRef:u,eventHandlers:F}}function C(e){var t=e.closeToast,r=e.theme,i=e.ariaLabel,o=void 0===i?"close":i;return(0,n.createElement)("button",{className:"Toastify__close-button Toastify__close-button--"+r,type:"button",onClick:function(e){e.stopPropagation(),t(e)},"aria-label":o},(0,n.createElement)("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},(0,n.createElement)("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function P(e){var t,r,o=e.delay,a=e.isRunning,u=e.closeToast,c=e.type,l=e.hide,h=e.className,p=e.style,f=e.controlledProgress,g=e.progress,y=e.rtl,v=e.isIn,m=e.theme,w=s({},p,{animationDuration:o+"ms",animationPlayState:a?"running":"paused",opacity:l?0:1});f&&(w.transform="scaleX("+g+")");var b=(0,i.Z)("Toastify__progress-bar",f?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--"+m,"Toastify__progress-bar--"+c,((t={})["Toastify__progress-bar--rtl"]=y,t)),S=d(h)?h({rtl:y,type:c,defaultClassName:b}):(0,i.Z)(b,h),_=((r={})[f&&g>=1?"onTransitionEnd":"onAnimationEnd"]=f&&g<1?null:function(){v&&u()},r);return(0,n.createElement)("div",Object.assign({role:"progressbar","aria-hidden":l?"true":"false","aria-label":"notification timer",className:S,style:w},_))}P.defaultProps={type:v.DEFAULT,hide:!1};var x=["theme","type"],R=function(e){var t=e.theme,r=e.type,i=a(e,x);return n.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"colored"===t?"currentColor":"var(--toastify-icon-color-"+r+")"},i))};var T={info:function(e){return n.createElement(R,Object.assign({},e),n.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return n.createElement(R,Object.assign({},e),n.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return n.createElement(R,Object.assign({},e),n.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return n.createElement(R,Object.assign({},e),n.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return n.createElement("div",{className:"Toastify__spinner"})}},I=function(e){var t,r,o=F(e),s=o.isRunning,a=o.preventExitTransition,u=o.toastRef,c=o.eventHandlers,h=e.closeButton,p=e.children,f=e.autoClose,g=e.onClick,y=e.type,v=e.hideProgressBar,m=e.closeToast,w=e.transition,b=e.position,S=e.className,_=e.style,E=e.bodyClassName,A=e.bodyStyle,k=e.progressClassName,C=e.progressStyle,x=e.updateId,R=e.role,I=e.progress,O=e.rtl,U=e.toastId,D=e.deleteToast,j=e.isIn,L=e.isLoading,N=e.icon,H=e.theme,M=(0,i.Z)("Toastify__toast","Toastify__toast-theme--"+H,"Toastify__toast--"+y,((t={})["Toastify__toast--rtl"]=O,t)),B=d(S)?S({rtl:O,position:b,type:y,defaultClassName:M}):(0,i.Z)(M,S),K=!!I,V=T[y],W={theme:H,type:y},$=V&&V(W);return!1===N?$=void 0:d(N)?$=N(W):(0,n.isValidElement)(N)?$=(0,n.cloneElement)(N,W):l(N)?$=N:L&&($=T.spinner()),(0,n.createElement)(w,{isIn:j,done:D,position:b,preventExitTransition:a,nodeRef:u},(0,n.createElement)("div",Object.assign({id:U,onClick:g,className:B},c,{style:_,ref:u}),(0,n.createElement)("div",Object.assign({},j&&{role:R},{className:d(E)?E({type:y}):(0,i.Z)("Toastify__toast-body",E),style:A}),$&&(0,n.createElement)("div",{className:(0,i.Z)("Toastify__toast-icon",(r={},r["Toastify--animate-icon Toastify__zoom-enter"]=!L,r))},$),(0,n.createElement)("div",null,p)),function(e){if(e){var t={closeToast:m,type:y,theme:H};return d(e)?e(t):(0,n.isValidElement)(e)?(0,n.cloneElement)(e,t):void 0}}(h),(f||K)&&(0,n.createElement)(P,Object.assign({},x&&!K?{key:"pb-"+x}:{},{rtl:O,theme:H,delay:f,isRunning:s,isIn:j,closeToast:m,hide:v,type:y,style:C,className:k,controlledProgress:K,progress:I}))))},O=m({enter:"Toastify--animate Toastify__bounce-enter",exit:"Toastify--animate Toastify__bounce-exit",appendPosition:!0}),U=m({enter:"Toastify--animate Toastify__slide-enter",exit:"Toastify--animate Toastify__slide-exit",appendPosition:!0}),D=function(e){var t=E(e),r=t.getToastToRender,o=t.containerRef,a=t.isToastActive,u=e.className,c=e.style,l=e.rtl,p=e.containerId;function f(e){var t,r=(0,i.Z)("Toastify__toast-container","Toastify__toast-container--"+e,((t={})["Toastify__toast-container--rtl"]=l,t));return d(u)?u({position:e,rtl:l,defaultClassName:r}):(0,i.Z)(r,h(u))}return(0,n.createElement)("div",{ref:o,className:"Toastify",id:p},r((function(e,t){var r=0===t.length?s({},c,{pointerEvents:"none"}):s({},c);return(0,n.createElement)("div",{className:f(e),style:r,key:"container-"+e},t.map((function(e){var t=e.content,r=e.props;return(0,n.createElement)(I,Object.assign({},r,{isIn:a(r.toastId),key:"toast-"+r.key,closeButton:!0===r.closeButton?C:r.closeButton}),t)})))})))};D.defaultProps={position:y.TOP_RIGHT,transition:O,rtl:!1,autoClose:5e3,hideProgressBar:!1,closeButton:C,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,newestOnTop:!1,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};var j,L,N,H=new Map,M=[],B=!1;function K(){return Math.random().toString(36).substr(2,9)}function V(e){return e&&(l(e.toastId)||u(e.toastId))?e.toastId:K()}function W(e,t){return H.size>0?w.emit(0,e,t):(M.push({content:e,options:t}),B&&f&&(B=!1,L=document.createElement("div"),document.body.appendChild(L),(0,o.render)((0,n.createElement)(D,Object.assign({},N)),L))),t.toastId}function $(e,t){return s({},t,{type:t&&t.type||e,toastId:V(t)})}var J=function(e){return function(t,r){return W(t,$(e,r))}},q=function(e,t){return W(e,$(v.DEFAULT,t))};q.loading=function(e,t){return W(e,$(v.DEFAULT,s({isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1},t)))},q.promise=function(e,t,r){var n=t.pending,i=t.error,o=t.success,a=l(n)?q.loading(n,r):q.loading(n.render,s({},r,n)),u={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=function(e,t,n){var i=l(t)?{render:t}:t;return q.update(a,s({type:e},u,r,i,{data:n})),n};return e.then((function(e){return c("success",o,e)})).catch((function(e){return c("error",i,e)})),e},q.success=J(v.SUCCESS),q.info=J(v.INFO),q.error=J(v.ERROR),q.warning=J(v.WARNING),q.warn=q.warning,q.dark=function(e,t){return W(e,$(v.DEFAULT,s({theme:"dark"},t)))},q.dismiss=function(e){return w.emit(1,e)},q.clearWaitingQueue=function(e){return void 0===e&&(e={}),w.emit(5,e)},q.isActive=function(e){var t=!1;return H.forEach((function(r){r.isToastActive&&r.isToastActive(e)&&(t=!0)})),t},q.update=function(e,t){void 0===t&&(t={}),setTimeout((function(){var r=function(e,t){var r=t.containerId,n=H.get(r||j);return n?n.getToast(e):null}(e,t);if(r){var n=r.props,i=r.content,o=s({},n,t,{toastId:t.toastId||e,updateId:K()});o.toastId!==e&&(o.staleId=e);var a=o.render||i;delete o.render,W(a,o)}}),0)},q.done=function(e){q.update(e,{progress:1})},q.onChange=function(e){return d(e)&&w.on(4,e),function(){d(e)&&w.off(4,e)}},q.configure=function(e){void 0===e&&(e={}),B=!0,N=e},q.POSITION=y,q.TYPE=v,w.on(2,(function(e){j=e.containerId||e,H.set(j,e),M.forEach((function(e){w.emit(0,e.content,e.options)})),M=[]})).on(3,(function(e){H.delete(e.containerId||e),0===H.size&&w.off(0).off(1).off(5),f&&L&&document.body.removeChild(L)}))},7466:function(e,t,r){"use strict";var n;r.r(t),r.d(t,{NIL:function(){return R},parse:function(){return y},stringify:function(){return h},v1:function(){return g},v3:function(){return k},v4:function(){return F},v5:function(){return x},validate:function(){return a},version:function(){return T}});var i=new Uint8Array(16);function o(){if(!n&&!(n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)}var s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var a=function(e){return"string"===typeof e&&s.test(e)},u=[],c=0;c<256;++c)u.push((c+256).toString(16).substr(1));var l,d,h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase();if(!a(r))throw TypeError("Stringified UUID is invalid");return r},p=0,f=0;var g=function(e,t,r){var n=t&&r||0,i=t||new Array(16),s=(e=e||{}).node||l,a=void 0!==e.clockseq?e.clockseq:d;if(null==s||null==a){var u=e.random||(e.rng||o)();null==s&&(s=l=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==a&&(a=d=16383&(u[6]<<8|u[7]))}var c=void 0!==e.msecs?e.msecs:Date.now(),g=void 0!==e.nsecs?e.nsecs:f+1,y=c-p+(g-f)/1e4;if(y<0&&void 0===e.clockseq&&(a=a+1&16383),(y<0||c>p)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=c,f=g,d=a;var v=(1e4*(268435455&(c+=122192928e5))+g)%4294967296;i[n++]=v>>>24&255,i[n++]=v>>>16&255,i[n++]=v>>>8&255,i[n++]=255&v;var m=c/4294967296*1e4&268435455;i[n++]=m>>>8&255,i[n++]=255&m,i[n++]=m>>>24&15|16,i[n++]=m>>>16&255,i[n++]=a>>>8|128,i[n++]=255&a;for(var w=0;w<6;++w)i[n+w]=s[w];return t||h(i)};var y=function(e){if(!a(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};function v(e,t,r){function n(e,n,i,o){if("string"===typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"===typeof n&&(n=y(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var s=new Uint8Array(16+e.length);if(s.set(n),s.set(e,n.length),(s=r(s))[6]=15&s[6]|t,s[8]=63&s[8]|128,i){o=o||0;for(var a=0;a<16;++a)i[o+a]=s[a];return i}return h(s)}try{n.name=e}catch(i){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}function m(e){return 14+(e+64>>>9<<4)+1}function w(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function b(e,t,r,n,i,o){return w((s=w(w(t,e),w(n,o)))<<(a=i)|s>>>32-a,r);var s,a}function S(e,t,r,n,i,o,s){return b(t&r|~t&n,e,t,i,o,s)}function _(e,t,r,n,i,o,s){return b(t&n|r&~n,e,t,i,o,s)}function E(e,t,r,n,i,o,s){return b(t^r^n,e,t,i,o,s)}function A(e,t,r,n,i,o,s){return b(r^(t|~n),e,t,i,o,s)}var k=v("v3",48,(function(e){if("string"===typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){for(var t=[],r=32*e.length,n="0123456789abcdef",i=0;i<r;i+=8){var o=e[i>>5]>>>i%32&255,s=parseInt(n.charAt(o>>>4&15)+n.charAt(15&o),16);t.push(s)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[m(t)-1]=t;for(var r=1732584193,n=-271733879,i=-1732584194,o=271733878,s=0;s<e.length;s+=16){var a=r,u=n,c=i,l=o;r=S(r,n,i,o,e[s],7,-680876936),o=S(o,r,n,i,e[s+1],12,-389564586),i=S(i,o,r,n,e[s+2],17,606105819),n=S(n,i,o,r,e[s+3],22,-1044525330),r=S(r,n,i,o,e[s+4],7,-176418897),o=S(o,r,n,i,e[s+5],12,1200080426),i=S(i,o,r,n,e[s+6],17,-1473231341),n=S(n,i,o,r,e[s+7],22,-45705983),r=S(r,n,i,o,e[s+8],7,1770035416),o=S(o,r,n,i,e[s+9],12,-1958414417),i=S(i,o,r,n,e[s+10],17,-42063),n=S(n,i,o,r,e[s+11],22,-1990404162),r=S(r,n,i,o,e[s+12],7,1804603682),o=S(o,r,n,i,e[s+13],12,-40341101),i=S(i,o,r,n,e[s+14],17,-1502002290),r=_(r,n=S(n,i,o,r,e[s+15],22,1236535329),i,o,e[s+1],5,-165796510),o=_(o,r,n,i,e[s+6],9,-1069501632),i=_(i,o,r,n,e[s+11],14,643717713),n=_(n,i,o,r,e[s],20,-373897302),r=_(r,n,i,o,e[s+5],5,-701558691),o=_(o,r,n,i,e[s+10],9,38016083),i=_(i,o,r,n,e[s+15],14,-660478335),n=_(n,i,o,r,e[s+4],20,-405537848),r=_(r,n,i,o,e[s+9],5,568446438),o=_(o,r,n,i,e[s+14],9,-1019803690),i=_(i,o,r,n,e[s+3],14,-187363961),n=_(n,i,o,r,e[s+8],20,1163531501),r=_(r,n,i,o,e[s+13],5,-1444681467),o=_(o,r,n,i,e[s+2],9,-51403784),i=_(i,o,r,n,e[s+7],14,1735328473),r=E(r,n=_(n,i,o,r,e[s+12],20,-1926607734),i,o,e[s+5],4,-378558),o=E(o,r,n,i,e[s+8],11,-2022574463),i=E(i,o,r,n,e[s+11],16,1839030562),n=E(n,i,o,r,e[s+14],23,-35309556),r=E(r,n,i,o,e[s+1],4,-1530992060),o=E(o,r,n,i,e[s+4],11,1272893353),i=E(i,o,r,n,e[s+7],16,-155497632),n=E(n,i,o,r,e[s+10],23,-1094730640),r=E(r,n,i,o,e[s+13],4,681279174),o=E(o,r,n,i,e[s],11,-358537222),i=E(i,o,r,n,e[s+3],16,-722521979),n=E(n,i,o,r,e[s+6],23,76029189),r=E(r,n,i,o,e[s+9],4,-640364487),o=E(o,r,n,i,e[s+12],11,-421815835),i=E(i,o,r,n,e[s+15],16,530742520),r=A(r,n=E(n,i,o,r,e[s+2],23,-995338651),i,o,e[s],6,-198630844),o=A(o,r,n,i,e[s+7],10,1126891415),i=A(i,o,r,n,e[s+14],15,-1416354905),n=A(n,i,o,r,e[s+5],21,-57434055),r=A(r,n,i,o,e[s+12],6,1700485571),o=A(o,r,n,i,e[s+3],10,-1894986606),i=A(i,o,r,n,e[s+10],15,-1051523),n=A(n,i,o,r,e[s+1],21,-2054922799),r=A(r,n,i,o,e[s+8],6,1873313359),o=A(o,r,n,i,e[s+15],10,-30611744),i=A(i,o,r,n,e[s+6],15,-1560198380),n=A(n,i,o,r,e[s+13],21,1309151649),r=A(r,n,i,o,e[s+4],6,-145523070),o=A(o,r,n,i,e[s+11],10,-1120210379),i=A(i,o,r,n,e[s+2],15,718787259),n=A(n,i,o,r,e[s+9],21,-343485551),r=w(r,a),n=w(n,u),i=w(i,c),o=w(o,l)}return[r,n,i,o]}(function(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(m(t)),n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))}));var F=function(e,t,r){var n=(e=e||{}).random||(e.rng||o)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var i=0;i<16;++i)t[r+i]=n[i];return t}return h(n)};function C(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function P(e,t){return e<<t|e>>>32-t}var x=v("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"===typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var i=0;i<n.length;++i)e.push(n.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var o=e.length/4+2,s=Math.ceil(o/16),a=new Array(s),u=0;u<s;++u){for(var c=new Uint32Array(16),l=0;l<16;++l)c[l]=e[64*u+4*l]<<24|e[64*u+4*l+1]<<16|e[64*u+4*l+2]<<8|e[64*u+4*l+3];a[u]=c}a[s-1][14]=8*(e.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(e.length-1)&4294967295;for(var d=0;d<s;++d){for(var h=new Uint32Array(80),p=0;p<16;++p)h[p]=a[d][p];for(var f=16;f<80;++f)h[f]=P(h[f-3]^h[f-8]^h[f-14]^h[f-16],1);for(var g=r[0],y=r[1],v=r[2],m=r[3],w=r[4],b=0;b<80;++b){var S=Math.floor(b/20),_=P(g,5)+C(S,y,v,m)+w+t[S]+h[b]>>>0;w=m,m=v,v=P(y,30)>>>0,y=g,g=_}r[0]=r[0]+g>>>0,r[1]=r[1]+y>>>0,r[2]=r[2]+v>>>0,r[3]=r[3]+m>>>0,r[4]=r[4]+w>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]})),R="00000000-0000-0000-0000-000000000000";var T=function(e){if(!a(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},2473:function(e){"use strict";var t=function(){};e.exports=t},8109:function(e,t,r){var n={"./ca.ftl":2127,"./en-GB.ftl":7778,"./es-ES.ftl":4645,"./id-ID.ftl":3677,"./nl-NL.ftl":3881};function i(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=o,e.exports=i,i.id=8109},2127:function(e){"use strict";e.exports="## Layout - footer\r\nfooter-author = Fet per <author-link>Vincent Tunru</author-link>.\r\n\r\ntwitter-tooltip = Vincent a Twitter\r\ntwitter-label = A Twitter\r\nmastodon-tooltip = Vincent a Mastodon\r\nmastodon-label = A Mastodon\r\ngitlab-tooltip = Codi font a GitLab\r\ngitlab-label = Codi font\r\n\r\n## Layout - header\r\nurlbar-label = URL:\r\nurlbar-button-label =\r\n  .value = Obre\r\n\r\nprofile-button = Perfil\r\n\r\nconnect-button = Connectar Pod\r\nconnect-button-tooltip = Connecta amb el teu Solid Pod\r\ndisconnect-button = Desconnectar\r\ndisconnect-button-tooltip = Desconnecta del teu Solid Pod: {$webId}\r\n\r\n## Connecting to your Pod\r\nconnectmodal-label = Connecta amb el teu Solid Pod\r\nconnectmodal-close-label = Tancar\r\n\r\nconnectform-label = Connecta amb el teu Pod a:\r\nconnectform-button =\r\n  .value = Connectar\r\n\r\nconnecterror-no-pod =\r\n  No s'ha trobat el teu Solid Pod a <pod-url>{$pod-url}</pod-url>. Sisplau, comprova l'URL i torna-ho a provar.\r\nconnecterror-not-inrupt =\r\n  No s'ha trobat un Solid Pod per connectar.\r\n  <inrupt-button>Volies dir <pod-url>{$suggested-pod-url}</pod-url>?</inrupt-button>\r\nconnecterror-not-solidcommunity =\r\n  No s'ha trobat un Solid Pod per connectar.\r\n  <solidcommunity-button>Volies dir <pod-url>{$suggested-pod-url}</pod-url>?</solidcommunity-button>\r\n\r\nfetcherror-no-permission = No tens permisos per veure aquest Recurs.\r\nfetcherror-does-not-exist = Aquest Recurs no existeix.\r\nfetcherror-unknown = S'ha produ\xeft un error desconegut ({$statusCode}).\r\n\r\n## Homepage\r\npod-listing-heading = Pod(s) de: <owner-link>{$owner-name}</owner-link>\r\npod-listing-tooltip = Inspecciona el teu Pod a `{$pod-url}`\r\n\r\nintro-title = Qu\xe8 \xe9s aix\xf2?\r\nintro-text =\r\n  Penny \xe9s una eina per programadors d'aplicacions <solid-link>Solid</solid-link>.\r\n  Permet inspeccionar les dades en el teu Pod i, amb els permisos adients,\r\n  modificar i afegir dades noves.\r\n  Assumeix familiaritat amb els conceptes de Solid.\r\nintro-get-started-logged-out =\r\n  Per comen\xe7ar, connecta amb el teu Pod per inspeccionar les dades,\r\n  o introdueix una URL directament a la part superior de la p\xe0gina.\r\n  Si tens cap suggeriment, no dubtis en <contact-link>contactar amb nosaltres</contact-link>!\r\nintro-get-started-logged-in =\r\n  Per comen\xe7ar, fes servir els links a la part de dalt per inspeccionar el teu Pod,\r\n  o introdueix una URL directament a la part superior de la p\xe0gina.\r\n  Si tens cap suggeriment, no dubtis en <contact-link>contactar amb nosaltres</contact-link>!\r\n\r\n## ContainerViewer\r\ncontainer-children-heading = Recursos del Contenidor\r\ncontainer-empty-warning = Aquest Contenidor est\xe0 buit.\r\n\r\nresource-add-button = Afegir Recurs\r\nresource-add-name-label = Nom del Recurs\r\nresource-add-name-input =\r\n  .placeholder = Per exemple, nom-del-recurs o nom-del-contenidor/\r\n  .title = Nom del Recurs (acaba amb `/` per crear un Contenidor)\r\nresource-add-name-submit = Guardar\r\nresource-add-toast-success = Recurs creat.\r\nresource-add-toast-success-view-button = Veure.\r\n\r\nfile-add-toast-success = {$fileCount ->\r\n  [one] Fitxer pujat.\r\n  *[other] {$fileCount} fitxers pujats.\r\n}\r\nfile-add-toast-error-not-allowed = No tens permisos per pujar fitxers en aquest Contenidor.\r\nfile-add-toast-error-other = {$fileCount ->\r\n  [one] No ha estat possible pujar el fitxer.\r\n  *[other] No ha estat possible pujar els fitxers.\r\n}\r\nfile-add-button = Pujar fitxer(s)\r\nfile-add-drop-target = Arrossega aqu\xed per pujar\r\n\r\n## DatasetViewer\r\ndataset-empty-warning = Aquest Recurs est\xe0 buit.\r\ndataset-update-toast-success = Guardat. <undo-button>Desfer.</undo-button>\r\n\r\ndataset-things-heading = Coses\r\n\r\ndanger-zone-heading = Zona perillosa\r\ndataset-view-turtle = Turtle en cru\r\ndataset-delete = Eliminar Recurs\r\ndataset-delete-confirm-heading = Est\xe0s segur?\r\ndataset-delete-confirm-lead-container = Est\xe0s segur que vols eliminar aquest Contenidor i tots els seus Recursos? Aquesta operaci\xf3 no es podr\xe0 desfer.\r\ndataset-delete-confirm-lead-resource = Est\xe0s segur que vols eliminar aquest Recurs? Aquesta operaci\xf3 no es podr\xe0 desfer.\r\ndataset-delete-toast-prepare = Preparant per eliminar <dataset-url>{$datasetUrl}</dataset-url>\u2026\r\ndataset-delete-toast-process = Eliminant <dataset-url>{$datasetUrl}</dataset-url>\u2026\r\ndataset-delete-toast-success-container = S'ha eliminat <dataset-url>{$datasetUrl}</dataset-url> i tots els seus Recursos.\r\ndataset-delete-toast-success-resource = S'ha eliminat <dataset-url>{$datasetUrl}</dataset-url>.\r\ndataset-delete-toast-error-not-allowed = No tens permisos per eliminar aquest Recurs.\r\ndataset-delete-toast-error-other = No ha estat possible eliminar aquest Recurs.\r\n\r\nthing-add-button = Coses\r\n\r\nthing-add-url-label = URL de la Cosa\r\nthing-add-url-input =\r\n  .placeholder = Exemple: https://\u2026\r\n  .title = URL de la Cosa\r\nthing-add-url-submit = Guardar\r\n\r\nthing-toast-error-not-allowed = No tens permisos per fer aquesta operaci\xf3.\r\nthing-urlcopy-button-tooltip = Copia l'URL\r\nthing-urlcopy-toast-success = L'URL s'ha copiat al porta-retalls.\r\n\r\nthing-delete-tooltip = Eliminar `{$thingUrl}`\r\nthing-delete-label = Eliminar `{$thingUrl}`\r\n\r\nthing-collapse-label = Col\xb7lapsar\r\nthing-collapse-tooltip = Col\xb7lapsa aix\xf2\r\nthing-expand-label = Expandir\r\nthing-expand-tooltip = Expandeix aix\xf2\r\n\r\nwac-control-title = Control d'Acc\xe9s per:\r\nwac-control-initialise = Convertir a Control d'Acc\xe9s.\r\nwac-control-toast-saving = Guardant Control d'Acc\xe9s\u2026\r\nwac-control-toast-saved = Control d'Acc\xe9s guardat.\r\nwac-control-toast-error-no-controller = Canvis no aplicats; almenys un Agent hauria de controlar aquest Recurs.\r\nwac-control-toast-error-no-resource = Canvis no aplicats; Recurs desconegut.\r\nwac-control-target-label = Aplicar a:\r\nwac-control-target-option-self = El Recurs\r\nwac-control-target-option-children = Recursos del Contenidor\r\nwac-control-mode-label = Permisos:\r\nwac-control-mode-option-read = Llegir\r\nwac-control-mode-option-append = Afegir\r\nwac-control-mode-option-write = Escriure\r\nwac-control-mode-option-control = Controlar\r\nwac-control-agentClass-label = Per:\r\nwac-control-agentClass-option-agent = Tothom\r\nwac-control-agent-label = I Agents:\r\nwac-control-agent-add-button =\r\n  .title = Afegir Agent\r\nwac-control-agent-add-icon =\r\n  .aria-label = Afegir Agent\r\nwac-control-agent-remove-icon =\r\n  .aria-label = Eliminar `{$agent}`\r\n\r\nlinked-resources-heading = Recursos enlla\xe7ats\r\nlinked-resources-acl-label = Llista de Control d'Acc\xe9s\r\nlinked-resources-acl-add = Afegir Llista de Control d'Acc\xe9s\r\nlinked-resources-acl-add-toast-success = S'ha creat la Llista de Control d'Acc\xe9s\r\nlinked-resources-acl-add-toast-error-not-allowed = No tens permisos per modificar la Llista de Control d'Acc\xe9s d'aquest Recurs.\r\nlinked-resources-acl-add-toast-error-other = No ha estat possible crear la Llista de Control d'Acc\xe9s.\r\nlinked-resources-acr-label = Recurs de Control d'Acc\xe9s\r\n\r\npredicate-add-button = Nova propietat\r\npredicate-add-url-label = URL de la propietat\r\npredicate-add-url-input =\r\n  .placeholder = Exemple: https://\u2026\r\n  .title = URL de la propietat\r\npredicate-add-url-submit = Guardar\r\npredicate-urlcopy-button-tooltip = Copiar l'URL d'aquest predicat\r\npredicate-urlcopy-toast-success = L'URL del predicat s'ha copiat al porta-retalls.\r\n\r\nobject-unknown-tooltip = Dades de tipus desconegut {$type}\r\nobject-delete-button-unknown =\r\n  .title = Eliminar valor `{$value}` de tipus desconegut `{$type}`\r\n  .aria-label = Eliminar valor `{$value}` de tipus desconegut `{$type}`\r\nobject-copy-toast-success-url = L'URL s'ha copiat al porta-retalls.\r\nobject-copy-button-url =\r\n  .title = Copiar `{$value}`\r\n  .aria-label = Copiar `{$value}`\r\nobject-delete-button-url =\r\n  .title = Eliminar `{$value}`\r\n  .aria-label = Eliminar `{$value}`\r\nobject-delete-button-string =\r\n  .title = Eliminar `{$value}`\r\n  .aria-label = Eliminar `{$value}`\r\nobject-delete-button-string-locale =\r\n  .title = Eliminar `{$value} ({$locale})`\r\n  .aria-label = Eliminar `{$value} ({$locale})`\r\nobject-delete-button-integer =\r\n  .title = Eliminar `{$value}`\r\n  .aria-label = Eliminar `{$value}`\r\nobject-delete-button-decimal =\r\n  .title = Eliminar `{$value}`\r\n  .aria-label = Eliminar `{$value}`\r\nobject-delete-button-datetime =\r\n  .title = Eliminar `{$value}`\r\n  .aria-label = Eliminar `{$value}`\r\nobject-delete-button-boolean =\r\n  .title = Eliminar `{$value}`\r\n  .aria-label = Eliminar `{$value}`\r\n\r\nobject-add-label = Afegir\r\nobject-add-url = URL\r\nobject-add-integer = Enter\r\nobject-add-decimal = Decimal\r\nobject-add-datetime = Data i hora\r\nobject-add-url-label = URL\r\nobject-add-url-input =\r\n  .placeholder = Exemple: https://\u2026\r\n  .title = Valor de l'URL\r\nobject-add-url-submit = Afegir\r\nobject-add-string-label = Cadena de text\r\nobject-add-string-input =\r\n  .title = Valor de la cadena de text\r\nobject-add-string-submit = Afegir\r\nobject-set-locale-label = Configurar idioma\r\nobject-add-locale-label = Idioma\r\nobject-add-locale-input =\r\n  .placeholder = Exemple: nl-NL\r\n  .title = Idioma\r\nobject-add-integer-label = Enter\r\nobject-add-integer-input =\r\n  .placeholder = Exemple: 42\r\n  .title = Valor de l'enter\r\nobject-add-integer-submit = Afegir\r\nobject-add-decimal-label = Decimal\r\nobject-add-decimal-input =\r\n  .placeholder = Exemple: 4.2\r\n  .title = Valor del decimal\r\nobject-add-decimal-submit = Afegir\r\nobject-add-date-label = Data\r\nobject-add-date-input =\r\n  .title = Valor de la data\r\nobject-add-time-label = Hora\r\nobject-add-time-input =\r\n  .title = Valor de la hora\r\nobject-add-datetime-submit = Afegir\r\n\r\n## FileViewer\r\nfile-heading = fitxer\r\nfile-download-preparing = Preparant la desc\xe0rrega\u2026\r\nfile-download-button = Descarregar\r\nfile-download-button-tooltip = Descarregar `{$filename}`\r\nfile-download-toast-error-other = No ha estat possible descarregar aquest fitxer. Potser et manquen permisos.\r\n\r\nfile-delete = Eliminar fitxer\r\nfile-delete-confirm-heading = Est\xe0s segur?\r\nfile-delete-confirm-lead = Est\xe0s segur que vols eliminar aquest fitxer? Aquesta operaci\xf3 no es podr\xe0 desfer.\r\nfile-delete-toast-success = Fitxer eliminat.\r\nfile-delete-toast-error-not-allowed = No tens permisos per eliminar aquest fitxer.\r\nfile-delete-toast-error-other = No ha estat possible eliminar aquest fitxer.\r\n\r\npreview-image-heading = Previsualitzaci\xf3 d'imatge\r\npreview-image-thumbnail-tooltip = Veure o descarregar la imatge completa\r\npreview-image-alt = Previsualitzaci\xf3 de `{$filename}`\r\n\r\npreview-audio-heading = Previsualitzaci\xf3 d'\xe0udio\r\npreview-audio-error-playback =\r\n  Desafortunadament, el teu navegador no permet mostrar una previsualitzaci\xf3 de `{$filename}`.\r\n  Com a alternativa, pots <download-link>descarregar-lo</download-link>.\r\n\r\npreview-video-heading = Previsualitzaci\xf3 de v\xeddeo\r\npreview-video-error-playback =\r\n  Desafortunadament, el teu navegador no permet mostrar una previsualitzaci\xf3 de `{$filename}`.\r\n  Com a alternativa, pots <download-link>descarregar-lo</download-link>.\r\n\r\npreview-text-heading = Contingut del fitxer\r\n\r\n## TurtleViewer\r\nturtle-heading = Turtle en cru\r\nturtle-danger-warning = Atenci\xf3: errors tipogr\xe0fics i sint\xe0ctics poden fer el fitxer illegible.\r\nturtle-dataset-viewer-link = Torna a la zona segura.\r\nturtle-save-button = Guardar\r\nturtle-update-toast-success = Guardat. <undo-button>Desfer.</undo-button>\r\nturtle-update-toast-error = Hi ha hagut un error guardant el fitxer.\r\n"},7778:function(e){"use strict";e.exports="## Layout - footer\r\nfooter-author = By <author-link>Vincent Tunru</author-link>.\r\n\r\ntwitter-tooltip = Vincent on Twitter\r\ntwitter-label = On Twitter\r\nmastodon-tooltip = Vincent on Mastodon\r\nmastodon-label = On Mastodon\r\ngitlab-tooltip = Source code on GitLab\r\ngitlab-label = Source code\r\n\r\n## Layout - header\r\nurlbar-label = URL:\r\nurlbar-button-label =\r\n  .value = Go\r\n\r\nprofile-button = Your Profile\r\n\r\nconnect-button = Connect Pod\r\nconnect-button-tooltip = Connect your Solid Pod\r\ndisconnect-button = Disconnect\r\ndisconnect-button-tooltip = Disconnect from your Solid Pod: {$webId}\r\n\r\n## Connecting to your Pod\r\nconnectmodal-label = Connect your Solid Pod\r\nconnectmodal-close-label = Close\r\n\r\nconnectform-label = Connect your Pod at:\r\nconnectform-button =\r\n  .value = Connect\r\n\r\nconnecterror-no-pod = \r\n  Could not find a Solid Pod at <pod-url>{$pod-url}</pod-url>. Please check the name and try again.\r\nconnecterror-not-inrupt = \r\n  Could not find a Solid Pod to connect to.\r\n  <inrupt-button>Did you mean <pod-url>{$suggested-pod-url}</pod-url>?</inrupt-button>\r\nconnecterror-not-solidcommunity = \r\n  Could not find a Solid Pod to connect to.\r\n  <solidcommunity-button>Did you mean <pod-url>{$suggested-pod-url}</pod-url>?</solidcommunity-button>\r\n\r\nfetcherror-no-permission = You do not have permission to view this Resource.\r\nfetcherror-does-not-exist = This Resource does not exist.\r\nfetcherror-unknown = An unknown error ({$statusCode}) occurred.\r\n\r\n## Homepage\r\npod-listing-heading = Pod(s) of: <owner-link>{$owner-name}</owner-link>\r\npod-listing-tooltip = Browse Pod `{$pod-url}`\r\n\r\nintro-title = What is this?\r\nintro-text =\r\n  Penny is a tool for developers of <solid-link>Solid</solid-link> apps.\r\n  It allows you to inspect the data on your Pod and,\r\n  if you have the appropriate permissions, to modify and add new data.\r\n  It presumes familiarity with the concepts of Solid.\r\nintro-get-started-logged-out =\r\n  To get started, connect to your Pod to inspect its data,\r\n  or manually enter a URL to inspect at the top of the page.\r\n  And if you have feedback, please <contact-link>get in touch</contact-link>!\r\nintro-get-started-logged-in = \r\n  To get started, follow the links above to browse your Pod,\r\n  or manually enter a URL to inspect at the top of the page.\r\n  And if you have feedback, please&nbsp;\r\n  <contact-link>get in touch</contact-link>!\r\n\r\n## ContainerViewer\r\ncontainer-children-heading = Contained resources\r\ncontainer-empty-warning = This Container is empty.\r\n\r\nresource-add-button = Add Resource\r\nresource-add-name-label = Resource name\r\nresource-add-name-input =\r\n  .placeholder = e.g. resource-name or container-name/\r\n  .title = Resource name (append a `/` to create a Container)\r\nresource-add-name-submit = Save\r\nresource-add-toast-success = Resource created.\r\nresource-add-toast-success-view-button = View.\r\n\r\nfile-add-toast-success = {$fileCount ->\r\n  [one] File uploaded.\r\n  *[other] {$fileCount} files uploaded.\r\n}\r\nfile-add-toast-error-not-allowed = You do not have permission to upload files in this Container.\r\nfile-add-toast-error-other = {$fileCount ->\r\n  [one] Could not upload the file.\r\n  *[other] Could not upload the files.\r\n}\r\nfile-add-button = Upload file(s)\r\nfile-add-drop-target = Drop here to upload\r\n\r\n## DatasetViewer\r\ndataset-empty-warning = This resource is empty.\r\ndataset-update-toast-success = Saved. <undo-button>Undo.</undo-button>\r\n\r\ndataset-things-heading = Things\r\n\r\ndanger-zone-heading = Danger Zone\r\ndataset-view-turtle = Raw Turtle\r\ndataset-delete = Delete resource\r\ndataset-delete-confirm-heading = Are you sure?\r\ndataset-delete-confirm-lead-container = Are you sure you want to delete this Container resource and its contained resources? This can not be undone.\r\ndataset-delete-confirm-lead-resource = Are you sure you want to delete this resource? This can not be undone.\r\ndataset-delete-toast-prepare = Preparing deletion of <dataset-url>{$datasetUrl}</dataset-url>\u2026\r\ndataset-delete-toast-process = Deleting <dataset-url>{$datasetUrl}</dataset-url>\u2026\r\ndataset-delete-toast-success-container = Deleted <dataset-url>{$datasetUrl}</dataset-url> and its contained resources.\r\ndataset-delete-toast-success-resource = Deleted <dataset-url>{$datasetUrl}</dataset-url>.\r\ndataset-delete-toast-error-not-allowed = You are not allowed to delete this resource.\r\ndataset-delete-toast-error-other = Could not delete the resource.\r\n\r\nthing-add-button = New Thing\r\n\r\nthing-add-url-label = Thing URL\r\nthing-add-url-input =\r\n  .placeholder = e.g. https://\u2026\r\n  .title = Thing URL\r\nthing-add-url-submit = Save\r\n\r\nthing-toast-error-not-allowed = You do not have permission to do that.\r\nthing-urlcopy-button-tooltip = Copy this Thing's URL\r\nthing-urlcopy-toast-success = Thing URL copied to clipboard.\r\n\r\nthing-delete-tooltip = Delete `{$thingUrl}`\r\nthing-delete-label = Delete `{$thingUrl}`\r\n\r\nthing-collapse-label = Collapse\r\nthing-collapse-tooltip = Collapse this Thing\r\nthing-expand-label = Expand\r\nthing-expand-tooltip = Expand this Thing\r\n\r\nwac-control-title = Access Control for:\r\n# When someone adds a new (but still empty) Thing,\r\n# a notification will be shown on top that will allow\r\n# adding the necessary data to turn it into an Access Control:\r\nwac-control-initialise = Convert to Access Control.\r\nwac-control-toast-saving = Saving Access Control\u2026\r\nwac-control-toast-saved = Access Control saved.\r\nwac-control-toast-error-no-controller = Change not applied; at least one Agent should have Control access to the Resource itself.\r\nwac-control-toast-error-no-resource = Change not applied; unknown target Resource.\r\nwac-control-target-label = Applies to:\r\nwac-control-target-option-self = The Resource\r\nwac-control-target-option-children = Contained Resources\r\nwac-control-mode-label = Grants:\r\nwac-control-mode-option-read = Read\r\nwac-control-mode-option-append = Append\r\nwac-control-mode-option-write = Write\r\nwac-control-mode-option-control = Control\r\nwac-control-agentClass-label = To:\r\nwac-control-agentClass-option-agent = Everyone\r\nwac-control-agent-label = And Agents:\r\nwac-control-agent-add-button =\r\n  .title = Add Agent\r\nwac-control-agent-add-icon =\r\n  .aria-label = Add Agent\r\nwac-control-agent-remove-icon =\r\n  .aria-label = Remove `{$agent}`\r\n\r\nlinked-resources-heading = Linked Resources\r\nlinked-resources-acl-label = Access Control List\r\nlinked-resources-acl-add = Add Access Control List\r\nlinked-resources-acl-add-toast-success = Access Control List created.\r\nlinked-resources-acl-add-toast-error-not-allowed = You do not have permission to modify this Resource's Access Control List.\r\nlinked-resources-acl-add-toast-error-other = Could not create an Access Control List.\r\nlinked-resources-acr-label = Access Control Resource\r\n\r\npredicate-add-button = New property\r\npredicate-add-url-label = Property URL\r\npredicate-add-url-input =\r\n  .placeholder = e.g. https://\u2026\r\n  .title = Property URL\r\npredicate-add-url-submit = Save\r\npredicate-urlcopy-button-tooltip = Copy this Predicate URL\r\npredicate-urlcopy-toast-success = Predicate URL copied to clipboard.\r\n\r\nobject-unknown-tooltip = Data of unknown type {$type}\r\nobject-delete-button-unknown =\r\n  .title = Delete value `{$value}` of unknown type `{$type}`\r\n  .aria-label = Delete value `{$value}` of unknown type `{$type}`\r\nobject-copy-toast-success-url = URL copied to clipboard.\r\nobject-copy-button-url =\r\n  .title = Copy `{$value}`\r\n  .aria-label = Copy `{$value}`\r\nobject-delete-button-url =\r\n  .title = Delete `{$value}`\r\n  .aria-label = Delete `{$value}`\r\nobject-delete-button-string =\r\n  .title = Delete `{$value}`\r\n  .aria-label = Delete `{$value}`\r\nobject-delete-button-string-locale =\r\n  .title = Delete `{$value} ({$locale})`\r\n  .aria-label = Delete `{$value} ({$locale})`\r\nobject-delete-button-integer =\r\n  .title = Delete `{$value}`\r\n  .aria-label = Delete `{$value}`\r\nobject-delete-button-decimal =\r\n  .title = Delete `{$value}`\r\n  .aria-label = Delete `{$value}`\r\nobject-delete-button-datetime =\r\n  .title = Delete `{$value}`\r\n  .aria-label = Delete `{$value}`\r\nobject-delete-button-boolean =\r\n  .title = Delete `{$value}`\r\n  .aria-label = Delete `{$value}`\r\n\r\nobject-add-label = Add\r\nobject-add-url = URL\r\nobject-add-integer = Integer\r\nobject-add-decimal = Decimal\r\nobject-add-datetime = Datetime\r\nobject-add-url-label = URL\r\nobject-add-url-input =\r\n  .placeholder = e.g. https://\u2026\r\n  .title = URL value\r\nobject-add-url-submit = Add\r\nobject-add-string-label = String\r\nobject-add-string-input =\r\n  .title = String value\r\nobject-add-string-submit = Add\r\nobject-set-locale-label = Set locale\r\nobject-add-locale-label = Locale\r\nobject-add-locale-input =\r\n  .placeholder = e.g. nl-NL\r\n  .title = Locale\r\nobject-add-integer-label = Integer\r\nobject-add-integer-input =\r\n  .placeholder = e.g. 42\r\n  .title = Integer value\r\nobject-add-integer-submit = Add\r\nobject-add-decimal-label = Decimal\r\nobject-add-decimal-input =\r\n  .placeholder = e.g. 4.2\r\n  .title = Decimal value\r\nobject-add-decimal-submit = Add\r\nobject-add-date-label = Date\r\nobject-add-date-input =\r\n  .title = Date value\r\nobject-add-time-label = Time\r\nobject-add-time-input =\r\n  .title = Time value\r\nobject-add-datetime-submit = Add\r\n\r\n## FileViewer\r\nfile-heading = File\r\nfile-download-preparing = Preparing download\u2026\r\nfile-download-button = Download\r\nfile-download-button-tooltip = Download `{$filename}`\r\nfile-download-toast-error-other = Could not download this file. You might not have sufficient access.\r\n\r\nfile-delete = Delete file\r\nfile-delete-confirm-heading = Are you sure?\r\nfile-delete-confirm-lead = Are you sure you want to delete this file? This can not be undone.\r\nfile-delete-toast-success = File deleted.\r\nfile-delete-toast-error-not-allowed = You are not allowed to delete this file.\r\nfile-delete-toast-error-other = Could not delete the file.\r\n\r\npreview-image-heading = Image Preview\r\npreview-image-thumbnail-tooltip = View or download full image\r\npreview-image-alt = Preview of `{$filename}`\r\n\r\npreview-audio-heading = Audio Preview\r\npreview-audio-error-playback =\r\n  Unfortunately your browser cannot provide a preview of `{$filename}`.\r\n  You can <download-link>download it</download-link> instead.\r\n\r\npreview-video-heading = Video Preview\r\npreview-video-error-playback =\r\n  Unfortunately your browser cannot provide a preview of `{$filename}`.\r\n  You can <download-link>download it</download-link> instead.\r\n\r\npreview-text-heading = File Contents\r\n\r\n## TurtleViewer\r\nturtle-heading = Raw Turtle\r\nturtle-danger-warning = Warning: typos and other syntactic errors can make your data unreadable.\r\nturtle-dataset-viewer-link = Back to safety.\r\nturtle-save-button = Save\r\nturtle-update-toast-success = Saved. <undo-button>Undo.</undo-button>\r\nturtle-update-toast-error = There was an error saving your Turtle.\r\n"},4645:function(e){"use strict";e.exports="## Layout - footer\r\nfooter-author = Hecho por <author-link>Vincent Tunru</author-link>.\r\n\r\ntwitter-tooltip = Vincent en Twitter\r\ntwitter-label = En Twitter\r\nmastodon-tooltip = Vincent en Mastodon\r\nmastodon-label = En Mastodon\r\ngitlab-tooltip = C\xf3digo fuente en GitLab\r\ngitlab-label = C\xf3digo fuente\r\n\r\n## Layout - header\r\nurlbar-label = URL:\r\nurlbar-button-label =\r\n  .value = Ir\r\n\r\nprofile-button = Tu Perfil\r\n\r\nconnect-button = Conectar Pod\r\nconnect-button-tooltip = Conecta con tu Solid Pod\r\ndisconnect-button = Desconectar\r\ndisconnect-button-tooltip = Desconecta de tu Solid Pod: {$webId}\r\n\r\n## Connecting to your Pod\r\nconnectmodal-label = Conecta con tu Solid Pod\r\nconnectmodal-close-label = Cerrar\r\n\r\nconnectform-label = Conecta con tu Pod en:\r\nconnectform-button =\r\n  .value = Conectar\r\n\r\nconnecterror-no-pod =\r\n  No se ha encontrado tu Solid Pod en <pod-url>{$pod-url}</pod-url>. Por favor, comprueba la URL y vuelve a intentarlo.\r\nconnecterror-not-inrupt =\r\n  No se ha encontrado un Solid Pod para conectar.\r\n  <inrupt-button>\xbfQuer\xedas decir <pod-url>{$suggested-pod-url}</pod-url>?</inrupt-button>\r\nconnecterror-not-solidcommunity =\r\n  No se ha encontrado un Solid Pod para conectar.\r\n  <solidcommunity-button>\xbfQuer\xedas decir <pod-url>{$suggested-pod-url}</pod-url>?</solidcommunity-button>\r\n\r\nfetcherror-no-permission = No tienes permisos para ver este Recurso.\r\nfetcherror-does-not-exist = Este Recurso no existe.\r\nfetcherror-unknown = Se ha producido un error desconocido ({$statusCode}).\r\n\r\n## Homepage\r\npod-listing-heading = Pod(s) de: <owner-link>{$owner-name}</owner-link>\r\npod-listing-tooltip = Inspecciona tu Pod en `{$pod-url}`\r\n\r\nintro-title = \xbfQu\xe9 es esto?\r\nintro-text =\r\n  Penny es una herramienta para desarrolladores de aplicaciones <solid-link>Solid</solid-link>.\r\n  Te permite inspeccionar los datos en tu Pod y, con los permisos adecuados,\r\n  modificar y a\xf1adir nuevos datos.\r\n  Asume familiaridad con conceptos de Solid.\r\nintro-get-started-logged-out =\r\n  Para empezar, conecta con tu Pod para inspeccionar los datos,\r\n  o introduce una URL directamente en la parte superior de la p\xe1gina.\r\n  \xa1Si tienes sugerencias, por favor <contact-link>ponte en contacto</contact-link>!\r\nintro-get-started-logged-in =\r\n  Para empezar, utiliza los links de arriba para inspeccionar tu Pod,\r\n  o introduce una URL directamente en la parte superior de la p\xe1gina.\r\n  \xa1Si tienes sugerencias, por favor <contact-link>ponte en contacto</contact-link>!\r\n\r\n## ContainerViewer\r\ncontainer-children-heading = Recursos del Contenedor\r\ncontainer-empty-warning = Este Contenedor est\xe1 vac\xedo.\r\n\r\nresource-add-button = A\xf1adir Recurso\r\nresource-add-name-label = Nombre del Recurso\r\nresource-add-name-input =\r\n  .placeholder = Ejemplo: nombre-del-recurso o nombre-del-contenedor/\r\n  .title = Nombre del Recurso (acaba con `/` para crear un Contenedor)\r\nresource-add-name-submit = Guardar\r\nresource-add-toast-success = Recurso creado.\r\nresource-add-toast-success-view-button = Ver.\r\n\r\nfile-add-toast-success = {$fileCount ->\r\n  [one] Archivo subido.\r\n  *[other] {$fileCount} archivos subidos.\r\n}\r\nfile-add-toast-error-not-allowed = No tienes permisos para subir archivos en este Contenedor.\r\nfile-add-toast-error-other = {$fileCount ->\r\n  [one] No ha sido posible subir el archivo.\r\n  *[other] No ha sido posible subir los archivos.\r\n}\r\nfile-add-button = Subir archivo(s)\r\nfile-add-drop-target = Arrastra aqu\xed para subir\r\n\r\n## DatasetViewer\r\ndataset-empty-warning = Este Recurso est\xe1 vac\xedo.\r\ndataset-update-toast-success = Guardado. <undo-button>Deshacer.</undo-button>\r\n\r\ndataset-things-heading = Cosas\r\n\r\ndanger-zone-heading = Zona peligrosa\r\ndataset-view-turtle = Turtle en crudo\r\ndataset-delete = Eliminar Recurso\r\ndataset-delete-confirm-heading = \xbfEst\xe1s seguro?\r\ndataset-delete-confirm-lead-container = \xbfEst\xe1s seguro de que quieres eliminar este Contenedor junto con todos sus Recursos? Esta operaci\xf3n no se podr\xe1 deshacer.\r\ndataset-delete-confirm-lead-resource = \xbfEst\xe1s seguro de que quieres eliminar este Recurso? Esta operaci\xf3n no se podr\xe1 deshacer.\r\ndataset-delete-toast-prepare = Preparando para eliminar <dataset-url>{$datasetUrl}</dataset-url>\u2026\r\ndataset-delete-toast-process = Eliminando <dataset-url>{$datasetUrl}</dataset-url>\u2026\r\ndataset-delete-toast-success-container = Se ha eliminado <dataset-url>{$datasetUrl}</dataset-url> y todos sus Recursos.\r\ndataset-delete-toast-success-resource = Se ha eliminado <dataset-url>{$datasetUrl}</dataset-url>.\r\ndataset-delete-toast-error-not-allowed = No tienes permisos para eliminar este Recurso.\r\ndataset-delete-toast-error-other = No ha sido posible eliminar este Recurso.\r\n\r\nthing-add-button = Cosas\r\n\r\nthing-add-url-label = URL de la cosa\r\nthing-add-url-input =\r\n  .placeholder = Ejemplo: https://\u2026\r\n  .title = URL de la cosa\r\nthing-add-url-submit = Guardar\r\n\r\nthing-toast-error-not-allowed = No tienes permisos para realizar esta operaci\xf3n.\r\nthing-urlcopy-button-tooltip = Copia la URL\r\nthing-urlcopy-toast-success = La URL se ha copiado al portapapeles.\r\n\r\nthing-delete-tooltip = Eliminar `{$thingUrl}`\r\nthing-delete-label = Eliminar `{$thingUrl}`\r\n\r\nthing-collapse-label = Colapsar\r\nthing-collapse-tooltip = Colapsa esto\r\nthing-expand-label = Expandir\r\nthing-expand-tooltip = Expande esto\r\n\r\nwac-control-title = Control de Acceso para:\r\nwac-control-initialise = Convertir en Control de Acceso.\r\nwac-control-toast-saving = Guardando Control de Acceso\u2026\r\nwac-control-toast-saved = Control de Acceso guardado.\r\nwac-control-toast-error-no-controller = Cambios no aplicados; por lo menos un Agente deber\xeda tener control del Recurso.\r\nwac-control-toast-error-no-resource = Cambios no aplicados; Recurso desconocido.\r\nwac-control-target-label = Aplicar a:\r\nwac-control-target-option-self = El Recurso\r\nwac-control-target-option-children = Recursos en el Contenedor\r\nwac-control-mode-label = Permisos:\r\nwac-control-mode-option-read = Leer\r\nwac-control-mode-option-append = A\xf1adir\r\nwac-control-mode-option-write = Escribir\r\nwac-control-mode-option-control = Controlar\r\nwac-control-agentClass-label = Para:\r\nwac-control-agentClass-option-agent = Todo el mundo\r\nwac-control-agent-label = Y Agentes:\r\nwac-control-agent-add-button =\r\n  .title = A\xf1adir Agente\r\nwac-control-agent-add-icon =\r\n  .aria-label = A\xf1adir Agente\r\nwac-control-agent-remove-icon =\r\n  .aria-label = Eliminar `{$agent}`\r\n\r\nlinked-resources-heading = Recursos enlazados\r\nlinked-resources-acl-label = Lista de Control de Acceso\r\nlinked-resources-acl-add = A\xf1adir Lista de Control de Acceso\r\nlinked-resources-acl-add-toast-success = Se ha creado la Lista de Control de Acceso\r\nlinked-resources-acl-add-toast-error-not-allowed = No tienes permisos para modificar la Lista de Control de Acceso de este Recurso.\r\nlinked-resources-acl-add-toast-error-other = No se ha podido crear la Lista de Control de Acceso.\r\nlinked-resources-acr-label = Recurso de Control de Acceso\r\n\r\npredicate-add-button = Nueva propiedad\r\npredicate-add-url-label = URL de la propiedad\r\npredicate-add-url-input =\r\n  .placeholder = Ejemplo: https://\u2026\r\n  .title = URL de la propiedad\r\npredicate-add-url-submit = Guardar\r\npredicate-urlcopy-button-tooltip = Copiar la URL de este predicado\r\npredicate-urlcopy-toast-success = La URL del predicado se ha copiado al portapapeles.\r\n\r\nobject-unknown-tooltip = Datos de tipo desconocido {$type}\r\nobject-delete-button-unknown =\r\n  .title = Eliminar valor `{$value}` de tipo desconocido `{$type}`\r\n  .aria-label = Eliminar valor `{$value}` de tipo desconocido `{$type}`\r\nobject-copy-toast-success-url = La URL se ha copiado al portapapeles.\r\nobject-copy-button-url =\r\n  .title = Copiar `{$value}`\r\n  .aria-label = Copiar `{$value}`\r\nobject-delete-button-url =\r\n  .title = Eliminar `{$value}`\r\n  .aria-label = Eliminar `{$value}`\r\nobject-delete-button-string =\r\n  .title = Eliminar `{$value}`\r\n  .aria-label = Eliminar `{$value}`\r\nobject-delete-button-string-locale =\r\n  .title = Eliminar `{$value} ({$locale})`\r\n  .aria-label = Eliminar `{$value} ({$locale})`\r\nobject-delete-button-integer =\r\n  .title = Eliminar `{$value}`\r\n  .aria-label = Eliminar `{$value}`\r\nobject-delete-button-decimal =\r\n  .title = Eliminar `{$value}`\r\n  .aria-label = Eliminar `{$value}`\r\nobject-delete-button-datetime =\r\n  .title = Eliminar `{$value}`\r\n  .aria-label = Eliminar `{$value}`\r\nobject-delete-button-boolean =\r\n  .title = Eliminar `{$value}`\r\n  .aria-label = Eliminar `{$value}`\r\n\r\nobject-add-label = A\xf1adir\r\nobject-add-url = URL\r\nobject-add-integer = Entero\r\nobject-add-decimal = Decimal\r\nobject-add-datetime = Fecha y hora\r\nobject-add-url-label = URL\r\nobject-add-url-input =\r\n  .placeholder = Ejemplo: https://\u2026\r\n  .title = Valor de la URL\r\nobject-add-url-submit = A\xf1adir\r\nobject-add-string-label = Cadena de texto\r\nobject-add-string-input =\r\n  .title = Valor de la cadena de texto\r\nobject-add-string-submit = A\xf1adir\r\nobject-set-locale-label = Configurar idioma\r\nobject-add-locale-label = Idioma\r\nobject-add-locale-input =\r\n  .placeholder = Ejemplo: nl-NL\r\n  .title = Idioma\r\nobject-add-integer-label = Entero\r\nobject-add-integer-input =\r\n  .placeholder = Ejemplo: 42\r\n  .title = Valor del entero\r\nobject-add-integer-submit = A\xf1adir\r\nobject-add-decimal-label = Decimal\r\nobject-add-decimal-input =\r\n  .placeholder = Ejemplo: 4.2\r\n  .title = Valor del decimal\r\nobject-add-decimal-submit = A\xf1adir\r\nobject-add-date-label = Fecha\r\nobject-add-date-input =\r\n  .title = Valor de la fecha\r\nobject-add-time-label = Hora\r\nobject-add-time-input =\r\n  .title = Valor de la hora\r\nobject-add-datetime-submit = A\xf1adir\r\n\r\n## FileViewer\r\nfile-heading = Archivo\r\nfile-download-preparing = Preparando descarga\u2026\r\nfile-download-button = Descargar\r\nfile-download-button-tooltip = Descargar `{$filename}`\r\nfile-download-toast-error-other = No ha sido posible descargar este archivo. Puede ser que no tengas permisos.\r\n\r\nfile-delete = Eliminar archivo\r\nfile-delete-confirm-heading = \xbfEst\xe1s seguro?\r\nfile-delete-confirm-lead = \xbfEst\xe1s seguro de que quieres eliminar este archivo? Esta operaci\xf3n no se podr\xe1 deshacer.\r\nfile-delete-toast-success = Archivo eliminado.\r\nfile-delete-toast-error-not-allowed = No tienes permisos para eliminar este archivo.\r\nfile-delete-toast-error-other = No ha sido posible eliminar este archivo.\r\n\r\npreview-image-heading = Previsualizaci\xf3n de imagen\r\npreview-image-thumbnail-tooltip = Ver o descargar la imagen completa\r\npreview-image-alt = Previsualizaci\xf3n de `{$filename}`\r\n\r\npreview-audio-heading = Previsualizaci\xf3n de audio\r\npreview-audio-error-playback =\r\n  Desafortunadamente, tu navegador no permite mostrar una previsualizaci\xf3n de `{$filename}`.\r\n  Como alternativa, puedes <download-link>descargarlo</download-link>.\r\n\r\npreview-video-heading = Previsualizaci\xf3n de video\r\npreview-video-error-playback =\r\n  Desafortunadamente, tu navegador no permite mostrar una previsualizaci\xf3n de `{$filename}`.\r\n  Como alternativa, puedes <download-link>descargarlo</download-link>.\r\n\r\npreview-text-heading = Contenido del archivo\r\n\r\n## TurtleViewer\r\nturtle-heading = Turtle en crudo\r\nturtle-danger-warning = Atenci\xf3n: errores tipogr\xe1ficos y sint\xe1cticos pueden hacer el archivo ilegible.\r\nturtle-dataset-viewer-link = Vuelve a la zona segura.\r\nturtle-save-button = Guardar\r\nturtle-update-toast-success = Guardado. <undo-button>Deshacer.</undo-button>\r\nturtle-update-toast-error = Ha ocurrido un error guardando el archivo.\r\n"},3677:function(e){"use strict";e.exports="## Layout - footer\r\nfooter-author = Oleh <author-link>Vincent Tunru</author-link>.\r\n\r\ntwitter-tooltip = Vincent di Twitter\r\ntwitter-label = Twitter\r\nmastodon-tooltip = Vincent di Mastodon\r\nmastodon-label = Mastodon\r\ngitlab-tooltip = Source code di GitLab\r\ngitlab-label = Source code\r\n\r\n## Layout - header\r\nurlbar-label = URL:\r\nurlbar-button-label =\r\n  .value = Go\r\n\r\nprofile-button = Profil Anda\r\n\r\nconnect-button = Pasang Pod\r\nconnect-button-tooltip = Pasang Solid Pod Anda\r\ndisconnect-button = Putus talian\r\ndisconnect-button-tooltip = Putus talian Solid Pod: {$webId}\r\n\r\n## Connecting to your Pod\r\nconnectmodal-label = Pasang Solid Pod Anda\r\nconnectmodal-close-label = Balik\r\n\r\nconnectform-label = Pasang Pod Anda ke:\r\nconnectform-button =\r\n  .value = Pasang\r\n\r\nconnecterror-no-pod = \r\n  Tidak dapat cari suatu Solid Pod di <pod-url>{$pod-url}</pod-url>. Mohon periksa semula nama dan cuba lagi.\r\nconnecterror-not-inrupt = \r\n  Tidak dapat cari suatu Solid Pod pun untuk dipasang.\r\n  <inrupt-button>Mungkin anda mahu memasang Pod <pod-url>{$suggested-pod-url}</pod-url> ini?</inrupt-button>\r\nconnecterror-not-solidcommunity = \r\n  Tidak dapat cari suatu Solid Pod pun untuk dipasang.\r\n  <solidcommunity-button>Mungkin anda mahu memasang Pod <pod-url>{$suggested-pod-url}</pod-url> ini?</solidcommunity-button>\r\n\r\n## Homepage\r\npod-listing-heading = Pod(s) saham: <owner-link>{$owner-name}</owner-link>\r\npod-listing-tooltip = Meriksa Pod `{$pod-url}`\r\n\r\nintro-title = Apa ini?\r\nintro-text =\r\n  Penny adalah suatu alat khas untuk developer <solid-link>Solid</solid-link> apps.\r\n  Ia membolehi anda meriksa data di dalam Pod anda,\r\n  hanya jika anda ada keizinan yang tertentu, untuk mengubah dan menambah data terada.\r\n  Developer harus fasih pemahaman ilmu Solid.\r\nintro-get-started-logged-out =\r\n  Untuk mula menggunakan Penny, sila memasang Pod anda sebelum meriksa data,\r\n  ataupun mengisi URL di halaman atas.\r\n  Jika anda ada cadangan, jangan segan <contact-link>membalas di link ini</contact-link>!\r\nintro-get-started-logged-in = \r\n  Untuk mula menggunakan Penny, sila ikut link di halaman atas untuk merikssa Pod anda,\r\n  ataupun mengisi URL di halaman atas.\r\n  Jika anda ada cadangan, jangan segan&nbsp;\r\n  <contact-link>membalas di link ini</contact-link>!\r\n\r\n## ContainerViewer\r\ncontainer-children-heading = Contained resources\r\ncontainer-empty-warning = Container ini kosong.\r\n\r\nresource-add-button = Tambah Resource\r\nresource-add-name-label = Nama Resource\r\nresource-add-name-input =\r\n  .placeholder = e.g. nama-resource atau nama-container/\r\n  .title = Nama Resource (taip `/` untuk membikin suatu Container)\r\nresource-add-name-submit = Save\r\nresource-add-toast-success = Resource dibikin.\r\nresource-add-toast-success-view-button =Meriksa.\r\n\r\nfile-add-toast-success = {$fileCount ->\r\n  [one] Fail beres upload.\r\n  *[other] {$fileCount} Fail2 beres upload.\r\n}\r\nfile-add-toast-error-not-allowed = Anda tiada izin untuk upload Container ini.\r\nfile-add-toast-error-other = {$fileCount ->\r\n  [one] Tidak syabas upload fail.\r\n  *[other] Tidak syabas upload fail2.\r\n}\r\nfile-add-button = Upload fail2\r\nfile-add-drop-target = Drop sini untuk upload\r\n\r\n## DatasetViewer\r\ndataset-empty-warning = Resource ini kosong.\r\ndataset-update-toast-success = Syabas Save. <undo-button>Balik semula.</undo-button>\r\n\r\ndataset-things-heading = Things\r\n\r\ndanger-zone-heading = Zon Bahaya\r\ndataset-delete = Hapuskan resource\r\ndataset-delete-confirm-heading = Anda Pasti?\r\ndataset-delete-confirm-lead-container = Anda pasti mahu hapuskan Container ini? Kamu tidak dapat balik semula Container ni.\r\ndataset-delete-confirm-lead-resource = Anda pasti mahu hapuskan resource ini? Kamu tidak dapat balik semula resource ni.\r\ndataset-delete-toast-prepare = Siap sedia hapusan URL <dataset-url>{$datasetUrl}</dataset-url>\u2026\r\ndataset-delete-toast-process = Sedang hapus <dataset-url>{$datasetUrl}</dataset-url>\u2026\r\ndataset-delete-toast-success-container = Telah hapus <dataset-url>{$datasetUrl}</dataset-url> dan resource2-nya.\r\ndataset-delete-toast-success-resource = Telah hapus <dataset-url>{$datasetUrl}</dataset-url>.\r\ndataset-delete-toast-error-not-allowed = Kamu tidak dizin hapuskan resource ini.\r\ndataset-delete-toast-error-other = Tidak boleh hapuskan resource ni.\r\n\r\nthing-add-button = Thing Bahru\r\n\r\nthing-add-url-label = URL Thing\r\nthing-add-url-input =\r\n  .placeholder = e.g. https://\u2026\r\n  .title = URL Thing\r\nthing-add-url-submit = Save\r\n\r\nthing-toast-error-not-allowed = Kamu tidak dizin berbuat sedemikian.\r\nthing-urlcopy-button-tooltip = Salin semula URL Thing ini.\r\nthing-urlcopy-toast-success = URL Thing disalin ke clipboard.\r\n\r\nthing-delete-tooltip = Hapuskan `{$thingUrl}`\r\nthing-delete-label = Hapuskan `{$thingUrl}`\r\n\r\nthing-collapse-label = Lipat\r\nthing-collapse-tooltip = Lipat Thing ini\r\nthing-expand-label = Lapang\r\nthing-expand-tooltip = Lapang Thing ini\r\n\r\nwac-control-title = Access Control utk:\r\nwac-control-toast-saving = Sdg save Access Control\u2026\r\nwac-control-toast-saved = Syabas save Access Control.\r\nwac-control-toast-error-no-controller = Gagal salin; sekurangnya, satu Agent harus ada Access Control dengan Resource terpilih.\r\nwac-control-toast-error-no-resource = Gagal salin; Sila pilih Resource terdahulu.\r\nwac-control-target-label = Pilihan:\r\nwac-control-target-option-self = Resource terpilih\r\nwac-control-target-option-children = Contained Resources\r\nwac-control-mode-label = Direstu:\r\nwac-control-mode-option-read = Read\r\nwac-control-mode-option-append = Append\r\nwac-control-mode-option-write = Write\r\nwac-control-mode-option-control = Control\r\nwac-control-agentClass-label = Kpd:\r\nwac-control-agentClass-option-agent = Semua\r\nwac-control-agent-label = dan juga Agents:\r\nwac-control-agent-add-button =\r\n  .title = Jemput Agent\r\nwac-control-agent-add-icon =\r\n  .aria-label = Jemput Agent\r\nwac-control-agent-remove-icon =\r\n  .aria-label = Pangkar `{$agent}`\r\n\r\npredicate-add-button = Properti bahru\r\npredicate-add-url-label = Properti URL\r\npredicate-add-url-input =\r\n  .placeholder = e.g. https://\u2026\r\n  .title = Properti URL\r\npredicate-add-url-submit = Save\r\n\r\nobject-unknown-tooltip = Jenis Data tidak dikenali {$type}\r\nobject-delete-button-unknown =\r\n  .title = Hapuskan value `{$value}` tidak dikenali `{$type}`\r\n  .aria-label = Hapuskan value `{$value}` tidak dikenali `{$type}`\r\nobject-delete-button-url =\r\n  .title = Hapuskan `{$value}`\r\n  .aria-label = Hapuskan `{$value}`\r\nobject-delete-button-string =\r\n  .title = Hapuskan `{$value}`\r\n  .aria-label = Hapuskan `{$value}`\r\nobject-delete-button-string-locale =\r\n  .title = Hapuskan `{$value} ({$locale})`\r\n  .aria-label = Hapuskan `{$value} ({$locale})`\r\nobject-delete-button-integer =\r\n  .title = Hapuskan `{$value}`\r\n  .aria-label = Hapuskan `{$value}`\r\nobject-delete-button-decimal =\r\n  .title = Hapuskan `{$value}`\r\n  .aria-label = Hapuskan `{$value}`\r\nobject-delete-button-datetime =\r\n  .title = Hapuskan `{$value}`\r\n  .aria-label = Hapuskan `{$value}`\r\nobject-delete-button-boolean =\r\n  .title = Hapuskan `{$value}`\r\n  .aria-label = Hapuskan `{$value}`\r\n\r\nobject-add-label = Salin\r\nobject-add-url = URL\r\nobject-add-integer = Integer\r\nobject-add-decimal = Decimal\r\nobject-add-datetime = Tarikhmasa\r\nobject-add-url-label = URL\r\nobject-add-url-input =\r\n  .placeholder = e.g. https://\u2026\r\n  .title = value URL\r\nobject-add-url-submit = Salin\r\nobject-add-string-label = String\r\nobject-add-string-input =\r\n  .title = Value String\r\nobject-add-string-submit = Salin\r\nobject-set-locale-label = Tetapkan locale\r\nobject-add-locale-label = Locale\r\nobject-add-locale-input =\r\n  .placeholder = e.g. in-IN\r\n  .title = Locale\r\nobject-add-integer-label = Integer\r\nobject-add-integer-input =\r\n  .placeholder = e.g. 42\r\n  .title = Value Integer\r\nobject-add-integer-submit = Salin\r\nobject-add-decimal-label = Decimal\r\nobject-add-decimal-input =\r\n  .placeholder = e.g. 4.2\r\n  .title = Value Decimal\r\nobject-add-decimal-submit = Salin\r\nobject-add-date-label = Tarikh\r\nobject-add-date-input =\r\n  .title = Value Tarikh\r\nobject-add-time-label = Masa\r\nobject-add-time-input =\r\n  .title = Value Masa\r\nobject-add-datetime-submit = Salin\r\n\r\n## FileViewer\r\nfile-heading = Fail\r\nfile-download-preparing = Siap sedia download\u2026\r\nfile-download-button = Download\r\nfile-download-button-tooltip = Download `{$filename}`\r\nfile-download-toast-error-other = Gagal download fail ni. Ada kemungkinan anda tidak cukup kebenaran.\r\n\r\nfile-delete = Hapuskan fail\r\nfile-delete-confirm-heading = Anda Pasti?\r\nfile-delete-confirm-lead = Anda pasti mahu hapuskan Fail ini? Kamu tidak dapat balik semula Fail ini.\r\nfile-delete-toast-success = Fail dihapuskan.\r\nfile-delete-toast-error-not-allowed = Kamu tidak dizin hapuskan fail ini.\r\nfile-delete-toast-error-other = Tidak boleh hapuskan fail ini.\r\n\r\npreview-image-heading = Preview gambar\r\npreview-image-thumbnail-tooltip = View atau download gambar saiz penuh\r\npreview-image-alt = Preview gambar `{$filename}`\r\n\r\npreview-audio-heading = Preview Audio\r\npreview-audio-error-playback =\r\n  Sungguh kesal skali browser anda tidak boleh preview fail `{$filename}`.\r\n  Anda boleh <download-link>download fail-nya</download-link> di sini.\r\n\r\npreview-video-heading = Preview Video\r\npreview-video-error-playback =\r\n  Sungguh kesal skali browser anda tidak boleh preview video `{$filename}`.\r\n  Anda boleh <download-link>download video tersebut</download-link> di sini.\r\n\r\npreview-text-heading = Isi Kandungan Fail\r\n"},3881:function(e){"use strict";e.exports="## Layout - footer\r\nfooter-author = Door <author-link>Vincent Tunru</author-link>.\r\n\r\ntwitter-tooltip = Vincent op Twitter\r\ntwitter-label = Op Twitter\r\nmastodon-tooltip = Vincent op Mastodon\r\nmastodon-label = Op Mastodon\r\ngitlab-tooltip = Broncode op GitLab\r\ngitlab-label = Broncode\r\n\r\n## Layout - header\r\nurlbar-label = URL:\r\nurlbar-button-label =\r\n  .value = Ga\r\n\r\nprofile-button = Jouw profiel\r\n\r\nconnect-button = Verbind Pod\r\nconnect-button-tooltip = Verbind je Solid Pod\r\ndisconnect-button = Log uit\r\ndisconnect-button-tooltip = Verbreek de verbinding met je Solid Pod: {$webId}\r\n\r\n## Connecting to your Pod\r\nconnectmodal-label = Verbind je Solid Pod\r\nconnectmodal-close-label = Sluiten\r\n\r\nconnectform-label = Verbind je Pod op:\r\nconnectform-button =\r\n  .value = Verbinden\r\n\r\nconnecterror-no-pod = \r\n  Kon geen Solid Pod vinden op <pod-url>{$pod-url}</pod-url>. Controleer de URL en probeer het nog eens.\r\nconnecterror-not-inrupt = \r\n  Kon niet verbinden met een Solid Pod.\r\n  <inrupt-button>Bedoelde je <pod-url>{$suggested-pod-url}</pod-url>?</inrupt-button>\r\nconnecterror-not-solidcommunity = \r\n  Kon niet verbinden met een Solid Pod.\r\n  <solidcommunity-button>Bedoelde je <pod-url>{$suggested-pod-url}</pod-url>?</solidcommunity-button>\r\n\r\nfetcherror-no-permission = Je hebt onvoldoende rechten om deze Resource te bekijken.\r\nfetcherror-does-not-exist = Deze Resource bestaat niet.\r\nfetcherror-unknown = Er is een onbekende fout ({$statusCode}) opgetreden.\r\n\r\n## Homepage\r\npod-listing-heading = Pod(s) van: <owner-link>{$owner-name}</owner-link>\r\npod-listing-tooltip = Pod `{$pod-url}` bekijken\r\n\r\nintro-title = Wat is dit?\r\nintro-text =\r\n  Penny is een tool for ontwikkelaars van <solid-link>Solid</solid-link> apps.\r\n  Je kan er de data op je Pod mee bekijken en,\r\n  als je de benodigde rechten hebt, de data aanpassen en nieuwe data toevoegen.\r\n  Bekendheid met de concepten in Solid is aan te raden.\r\nintro-get-started-logged-out =\r\n  Verbind je Pod om de data te bekijken,\r\n  of vul bovenaan de pagina handmatig een URL in.\r\n  Als je feedback hebt, <contact-link>laat het weten</contact-link>!\r\nintro-get-started-logged-in = \r\n  Volg de bovenstaande links om de data op de Pod te bekijken,\r\n  of vul bovenaan de pagina handmatig een URL in.\r\n  Als je feedback hebt, <contact-link>laat het weten</contact-link>!\r\n\r\n## ContainerViewer\r\ncontainer-children-heading = Resources in deze container\r\ncontainer-empty-warning = Deze container is leeg.\r\n\r\nresource-add-button = Resource toevoegen\r\nresource-add-name-label = Naam voor deze resource.\r\nresource-add-name-input =\r\n  .placeholder = bijv. resource-naam of container-naam/\r\n  .title = Naam voor deze resource (als de naam eindigt met een `/` wordt het een container)\r\nresource-add-name-submit = Opslaan\r\nresource-add-toast-success = Resource aangemaakt.\r\nresource-add-toast-success-view-button = Bekijken.\r\n\r\nfile-add-toast-success = {$fileCount ->\r\n  [one] Bestand ge\xfcpload.\r\n  *[other] {$fileCount} bestanden ge\xfcpload.\r\n}\r\nfile-add-toast-error-not-allowed = Je hebt onvoldoende rechten om bestanden naar deze container te uploaden.\r\nfile-add-toast-error-other = {$fileCount ->\r\n  [one] Kon het bestand niet uploaden.\r\n  *[other] Kon de bestanden niet uploaden.\r\n}\r\nfile-add-button = Bestand(en) uploaden\r\nfile-add-drop-target = Hier loslaten om te uploaden\r\n\r\n## DatasetViewer\r\ndataset-empty-warning = Deze resource is leeg.\r\ndataset-update-toast-success = Opgeslagen. <undo-button>Ongedaan maken.</undo-button>\r\n\r\ndataset-things-heading = Things\r\n\r\ndanger-zone-heading = Gevarenzone\r\ndataset-view-turtle = Rauwe Turtle\r\ndataset-delete = Resource verwijderen\r\ndataset-delete-confirm-heading = Zeker weten?\r\ndataset-delete-confirm-lead-container = Weet je zeker dat je deze container en alle resources erin wil verwijderen? Dit kan niet ongedaan worden gemaakt.\r\ndataset-delete-confirm-lead-resource = Weet je zeker dat je deze resource wil verwijderen? Dit kan niet ongedaan worden gemaakt.\r\ndataset-delete-toast-prepare = Verwijderen van <dataset-url>{$datasetUrl}</dataset-url> aan het voorbereiden\u2026\r\ndataset-delete-toast-process = <dataset-url>{$datasetUrl}</dataset-url> aan het verwijderen\u2026\r\ndataset-delete-toast-success-container = <dataset-url>{$datasetUrl}</dataset-url> en alle resources erin zijn verwijderd.\r\ndataset-delete-toast-success-resource = <dataset-url>{$datasetUrl}</dataset-url> is verwijderd.\r\ndataset-delete-toast-error-not-allowed = Je hebt onvoldoende rechten om deze resource te verwijderen.\r\ndataset-delete-toast-error-other = Kon de resource niet verwijderen.\r\n\r\nthing-add-button = Nieuw thing\r\n\r\nthing-add-url-label = URL voor dit thing\r\nthing-add-url-input =\r\n  .placeholder = bijv. https://\u2026\r\n  .title = URL voor dit thing\r\nthing-add-url-submit = Opslaan\r\n\r\nthing-toast-error-not-allowed = Je hebt hier onvoldoende rechten voor.\r\nthing-urlcopy-button-tooltip = Kopieer de URL van dit thing.\r\nthing-urlcopy-toast-success = URL van dit Thing is gekopieerd naar het klembord.\r\n\r\nthing-delete-tooltip = `{$thingUrl}` verwijderen\r\nthing-delete-label = `{$thingUrl}` verwijderen\r\n\r\nthing-collapse-label = Inklappen\r\nthing-collapse-tooltip = Dit thing inklappen\r\nthing-expand-label = Uitklappen\r\nthing-expand-tooltip = Dit thing uitklappen\r\n\r\nwac-control-title = Access Control voor:\r\n# When someone adds a new (but still empty) Thing,\r\n# a notification will be shown on top that will allow\r\n# adding the necessary data to turn it into an Access Control:\r\nwac-control-initialise = Maak dit een Access Control.\r\nwac-control-toast-saving = Access Control opslaan\u2026\r\nwac-control-toast-saved = Access Control opgeslagen.\r\nwac-control-toast-error-no-controller = Wijziging niet toegepast; zorg dat tenminste \xe9\xe9n Agent Control-rechten heeft op de Resource zelf.\r\nwac-control-toast-error-no-resource = Wijziging niet toegepast; geen betreffende Resource gevonden.\r\nwac-control-target-label = Werkt op:\r\nwac-control-target-option-self = De Resource\r\nwac-control-target-option-children = Onderliggende Resources\r\nwac-control-mode-label = Rechten:\r\nwac-control-mode-option-read = Read\r\nwac-control-mode-option-append = Append\r\nwac-control-mode-option-write = Write\r\nwac-control-mode-option-control = Control\r\nwac-control-agentClass-label = Voor:\r\nwac-control-agentClass-option-agent = Iedereen\r\nwac-control-agent-label = En deze Agents:\r\nwac-control-agent-add-button =\r\n  .title = Agent toevoegen\r\nwac-control-agent-add-icon =\r\n  .aria-label = Agent toevoegen\r\nwac-control-agent-remove-icon =\r\n  .aria-label = `{$agent}` verwijderen\r\n\r\nlinked-resources-heading = Gelinkte Resources\r\nlinked-resources-acl-label = Access Control List\r\nlinked-resources-acl-add = Access Control List toevoegen\r\nlinked-resources-acl-add-toast-success = Access Control List aangemaakt.\r\nlinked-resources-acl-add-toast-error-not-allowed = Je hebt onvoldoende rechten om de Access Control List van deze Resource aan te passen.\r\nlinked-resources-acl-add-toast-error-other = Kon Access Control List niet aanmaken.\r\nlinked-resources-acr-label = Access Control Resource\r\n\r\npredicate-add-button = Nieuwe property\r\npredicate-add-url-label = URL voor deze property\r\npredicate-add-url-input =\r\n  .placeholder = bijv. https://\u2026\r\n  .title = URL voor deze property\r\npredicate-add-url-submit = Opslaan\r\npredicate-urlcopy-button-tooltip = Kopieer de URL van deze property.\r\npredicate-urlcopy-toast-success = URL van deze property is gekopieerd naar het klembord.\r\n\r\nobject-unknown-tooltip = Data van onbekend type {$type}\r\nobject-delete-button-unknown =\r\n  .title = Waarde `{$value}` van onbekend type `{$type}` verwijderen\r\n  .aria-label = Waarde `{$value}` van onbekend type `{$type}` verwijderen\r\nobject-copy-toast-success-url = URL is gekopi\xeberd naar het klembord.\r\nobject-copy-button-url =\r\n  .title = `{$value}` kopi\xebren\r\n  .aria-label = `{$value}` kopi\xebren\r\nobject-delete-button-url =\r\n  .title = `{$value}` verwijderen\r\n  .aria-label = `{$value}` verwijderen\r\nobject-delete-button-string =\r\n  .title = `{$value}` verwijderen\r\n  .aria-label = `{$value}` verwijderen\r\nobject-delete-button-string-locale =\r\n  .title = `{$value} ({$locale})` verwijderen\r\n  .aria-label = `{$value} ({$locale})` verwijderen\r\nobject-delete-button-integer =\r\n  .title = `{$value}` verwijderen\r\n  .aria-label = `{$value}` verwijderen\r\nobject-delete-button-decimal =\r\n  .title = `{$value}` verwijderen\r\n  .aria-label = `{$value}` verwijderen\r\nobject-delete-button-datetime =\r\n  .title = `{$value}` verwijderen\r\n  .aria-label = `{$value}` verwijderen\r\nobject-delete-button-boolean =\r\n  .title = `{$value}` verwijderen\r\n  .aria-label = `{$value}` verwijderen\r\n\r\nobject-add-label = Toevoegen\r\nobject-add-url = URL\r\nobject-add-integer = Geheel getal\r\nobject-add-decimal = Decimaal\r\nobject-add-datetime = Datum+tijd\r\nobject-add-url-label = URL\r\nobject-add-url-input =\r\n  .placeholder = bijv. https://\u2026\r\n  .title = URL\r\nobject-add-url-submit = Toevoegen\r\nobject-add-string-label = String\r\nobject-add-string-input =\r\n  .title = String\r\nobject-add-string-submit = Toevoegen\r\nobject-set-locale-label = Locale instellen\r\nobject-add-locale-label = Locale\r\nobject-add-locale-input =\r\n  .placeholder = bijv. nl-NL\r\n  .title = Locale\r\nobject-add-integer-label = Geheel getal\r\nobject-add-integer-input =\r\n  .placeholder = bijv. 42\r\n  .title = Geheel getal\r\nobject-add-integer-submit = Toevoegen\r\nobject-add-decimal-label = Decimaal\r\nobject-add-decimal-input =\r\n  .placeholder = bijv. 4.2\r\n  .title = Decimaal\r\nobject-add-decimal-submit = Toevoegen\r\nobject-add-date-label = Datum\r\nobject-add-date-input =\r\n  .title = Datum\r\nobject-add-time-label = Tijd\r\nobject-add-time-input =\r\n  .title = Tijd\r\nobject-add-datetime-submit = Toevoegen\r\n\r\n## FileViewer\r\nfile-heading = Bestand\r\nfile-download-preparing = Download voorbereiden\u2026\r\nfile-download-button = Download\r\nfile-download-button-tooltip = Download `{$filename}`\r\nfile-download-toast-error-other = Kon dit bestand niet downloaden. Wellicht heb je onvoldoende rechten.\r\n\r\nfile-delete = Bestand verwijderen\r\nfile-delete-confirm-heading = Zeker weten?\r\nfile-delete-confirm-lead = Weet je zeker dat je dit bestand wil verwijderen? Dit kan niet ongedaan worden gemaakt.\r\nfile-delete-toast-success = Bestand verwijderd.\r\nfile-delete-toast-error-not-allowed = Je hebt onvoldoende rechten om dit bestand te verwijderen.\r\nfile-delete-toast-error-other = Kon het bestand niet verwijderen.\r\n\r\npreview-image-heading = Voorvertoning van afbeelding\r\npreview-image-thumbnail-tooltip = Volledige afbeelding bekijken of downloaden\r\npreview-image-alt = Voorvertoning van `{$filename}`\r\n\r\npreview-audio-heading = Voorvertoning van geluidsfragment\r\npreview-audio-error-playback =\r\n  Je browser kan geen voorvertoning laten zien van `{$filename}`.\r\n  Je kan wel <download-link>het bestand downloaden</download-link>.\r\n\r\npreview-video-heading = Video Preview\r\npreview-video-error-playback =\r\n  Je browser kan geen voorvertoning laten zien van `{$filename}`.\r\n  Je kan wel <download-link>het bestand downloaden</download-link>.\r\n\r\npreview-text-heading = Bestandsinhoud\r\n\r\n## TurtleViewer\r\nturtle-heading = Rauwe Turtle\r\nturtle-danger-warning = Waarschuwing: syntactische fouten kunnen je data onleesbaar maken.\r\nturtle-dataset-viewer-link = Ga terug.\r\nturtle-save-button = Opslaan\r\nturtle-update-toast-success = Opgeslagen. <undo-button>Ongedaan maken.</undo-button>\r\nturtle-update-toast-error = Onbekende fout bij het opslaan van je Turtle.\r\n"},2010:function(e,t,r){"use strict";function n(e,t){for(const r of e)if(r.hasMessage(t))return r;return null}r.d(t,{_C:function(){return d},Vd:function(){return f},_x:function(){return a},ql:function(){return g}});class i extends Array{static from(e){return e instanceof this?e:new this(e)}}class o extends i{constructor(e){if(super(),!(Symbol.iterator in Object(e)))throw new TypeError("Argument must implement the iteration protocol.");this.iterator=e[Symbol.iterator]()}[Symbol.iterator](){const e=this;let t=0;return{next:()=>(e.length<=t&&e.push(e.iterator.next()),e[t++])}}touchNext(e=1){let t=0;for(;t++<e;){const e=this[this.length-1];if(e&&e.done)break;this.push(this.iterator.next())}return this[this.length-1]}}Symbol.asyncIterator;let s;class a{constructor(e,t=function(){if("undefined"===typeof document)throw new Error("`document` is undefined. Without it, translations cannot be safely sanitized. Consult the documentation at https://github.com/projectfluent/fluent.js/wiki/React-Overlays.");if(!s){const e=document.createElement("template");s=function(t){return e.innerHTML=t,Array.from(e.content.childNodes)}}return s}()){this.bundles=o.from(e),this.parseMarkup=t}getBundle(e){return t=this.bundles,r=e,Array.isArray(r)?r.map((e=>n(t,e))):n(t,r);var t,r}areBundlesEmpty(){return Boolean(this.bundles[Symbol.iterator]().next().done)}getString(e,t,r){const n=this.getBundle(e);if(n){const r=n.getMessage(e);if(r&&r.value){let e=[],i=n.formatPattern(r.value,t,e);for(let t of e)this.reportError(t);return i}}else this.areBundlesEmpty()?this.reportError(new Error("Attempting to get a string when no localization bundles are present.")):this.reportError(new Error(`The id "${e}" did not match any messages in the localization bundles.`));return r||e}reportError(e){console.warn(`[@fluent/react] ${e.name}: ${e.message}`)}}var u=r(7294),c=r(5697);let l=(0,u.createContext)(null);function d(e){return(0,u.createElement)(l.Provider,{value:e.l10n},e.children)}d.propTypes={children:c.element.isRequired,l10n:c.instanceOf(a).isRequired};var h={menuitem:!0,...{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}};const p=/<|&#?\w+;/;function f(e){const{id:t,attrs:r,vars:n,elems:i,children:o}=e,s=(0,u.useContext)(l);let a;if(Array.isArray(o)){if(o.length>1)throw new Error("<Localized/> expected to receive a single React node child");a=o[0]}else a=null!==o&&void 0!==o?o:null;if(!s)throw new Error("The <Localized /> component was not properly wrapped in a <LocalizationProvider />.");const c=s.getBundle(t);if(null===c)return void 0===t?s.reportError(new Error("No id was provided for a <Localized /> component.")):s.areBundlesEmpty()?s.reportError(new Error("A <Localized /> component was rendered when no localization bundles are present.")):s.reportError(new Error(`The id "${t}" did not match any messages in the localization bundles.`)),(0,u.createElement)(u.Fragment,null,a);const d=c.getMessage(t);let f,g=[];if(!(0,u.isValidElement)(a)){if(d.value){let e=c.formatPattern(d.value,n,g);for(let t of g)s.reportError(t);return(0,u.createElement)(u.Fragment,null,e)}return(0,u.createElement)(u.Fragment,null,a)}if(r&&d.attributes){f={},g=[];for(const[e,t]of Object.entries(r))t&&e in d.attributes&&(f[e]=c.formatPattern(d.attributes[e],n,g));for(let e of g)s.reportError(e)}if("string"===typeof a.type&&a.type in h)return(0,u.cloneElement)(a,f);if(null===d.value)return(0,u.cloneElement)(a,f);g=[];const y=c.formatPattern(d.value,n,g);for(let u of g)s.reportError(u);if(!p.test(y)||null===s.parseMarkup)return(0,u.cloneElement)(a,f,y);let v;if(i){v={};for(let[e,t]of Object.entries(i))v[e.toLowerCase()]=t}const m=s.parseMarkup(y).map((e=>{if("#text"===e.nodeName)return e.textContent;const t=e.nodeName.toLowerCase();if(!v||!Object.prototype.hasOwnProperty.call(v,t))return e.textContent;const r=v[t];return(0,u.isValidElement)(r)?"string"===typeof r.type&&r.type in h?r:(0,u.cloneElement)(r,void 0,e.textContent):e.textContent}));return(0,u.cloneElement)(a,f,...m)}f.propTypes={children:c.node};const g=()=>{const e=(0,u.useContext)(l);if(!e)throw new Error("useLocalization was used without wrapping it in a <LocalizationProvider />.");return{l10n:e}}},2136:function(e,t,r){"use strict";r.r(t),r.d(t,{CompactEncrypt:function(){return at},CompactSign:function(){return lt},EmbeddedJWK:function(){return mt},EncryptJWT:function(){return gt},FlattenedEncrypt:function(){return We},FlattenedSign:function(){return ct},GeneralEncrypt:function(){return Je},GeneralSign:function(){return ht},SignJWT:function(){return ft},UnsecuredJWT:function(){return Ft},base64url:function(){return i},calculateJwkThumbprint:function(){return vt},compactDecrypt:function(){return je},compactVerify:function(){return Xe},createLocalJWKSet:function(){return _t},createRemoteJWKSet:function(){return kt},decodeJwt:function(){return Rt},decodeProtectedHeader:function(){return xt},errors:function(){return n},exportJWK:function(){return Be},exportPKCS8:function(){return Me},exportSPKI:function(){return He},flattenedDecrypt:function(){return De},flattenedVerify:function(){return Ye},generalDecrypt:function(){return Le},generalVerify:function(){return Ze},generateKeyPair:function(){return It},generateSecret:function(){return Ot},importJWK:function(){return xe},importPKCS8:function(){return Pe},importSPKI:function(){return Fe},importX509:function(){return Ce},jwtDecrypt:function(){return st},jwtVerify:function(){return ot}});var n={};r.r(n),r.d(n,{JOSEAlgNotAllowed:function(){return E},JOSEError:function(){return b},JOSENotSupported:function(){return A},JWEDecryptionFailed:function(){return k},JWEInvalid:function(){return F},JWKInvalid:function(){return x},JWKSInvalid:function(){return R},JWKSMultipleMatchingKeys:function(){return I},JWKSNoMatchingKey:function(){return T},JWKSTimeout:function(){return O},JWSInvalid:function(){return C},JWSSignatureVerificationFailed:function(){return U},JWTClaimValidationFailed:function(){return S},JWTExpired:function(){return _},JWTInvalid:function(){return P}});var i={};r.r(i),r.d(i,{decode:function(){return Pt},encode:function(){return Ct}});var o=crypto;function s(e){try{return null!=e&&"boolean"===typeof e.extractable&&"string"===typeof e.algorithm.name&&"string"===typeof e.type}catch(t){return!1}}var a=async(e,t)=>{const r=`SHA-${e.slice(-3)}`;return new Uint8Array(await o.subtle.digest(r,t))};const u=new TextEncoder,c=new TextDecoder,l=2**32;function d(...e){const t=e.reduce(((e,{length:t})=>e+t),0),r=new Uint8Array(t);let n=0;return e.forEach((e=>{r.set(e,n),n+=e.length})),r}function h(e,t,r){if(t<0||t>=l)throw new RangeError(`value must be >= 0 and <= 4294967295. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,255&t],r)}function p(e){const t=Math.floor(e/l),r=e%l,n=new Uint8Array(8);return h(n,t,0),h(n,r,4),n}function f(e){const t=new Uint8Array(4);return h(t,e),t}function g(e){return d(f(e.length),e)}const y=e=>{let t=e;"string"===typeof t&&(t=u.encode(t));const r=[];for(let n=0;n<t.length;n+=32768)r.push(String.fromCharCode.apply(null,t.subarray(n,n+32768)));return btoa(r.join(""))},v=e=>y(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),m=e=>new Uint8Array(atob(e).split("").map((e=>e.charCodeAt(0)))),w=e=>{let t=e;t instanceof Uint8Array&&(t=c.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return m(t)}catch(r){throw new TypeError("The input to be decoded is not correctly encoded.")}};class b extends Error{constructor(e){var t;super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,null===(t=Error.captureStackTrace)||void 0===t||t.call(Error,this,this.constructor)}static get code(){return"ERR_JOSE_GENERIC"}}class S extends b{constructor(e,t="unspecified",r="unspecified"){super(e),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=t,this.reason=r}static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}}class _ extends b{constructor(e,t="unspecified",r="unspecified"){super(e),this.code="ERR_JWT_EXPIRED",this.claim=t,this.reason=r}static get code(){return"ERR_JWT_EXPIRED"}}class E extends b{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class A extends b{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class k extends b{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}class F extends b{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}class C extends b{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class P extends b{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class x extends b{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}}class R extends b{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}class T extends b{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}class I extends b{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}class O extends b{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}}class U extends b{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}var D=o.getRandomValues.bind(o);function j(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new A(`Unsupported JWE Algorithm: ${e}`)}}var L=e=>D(new Uint8Array(j(e)>>3));var N=(e,t)=>{if(t.length<<3!==j(e))throw new F("Invalid Initialization Vector length")};var H=(e,t)=>{if(e.length<<3!==t)throw new F("Invalid Content Encryption Key length")};var M=(e,t)=>{if(!(e instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(t instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");if(e.length!==t.length)throw new TypeError("Input buffers must have the same length");const r=e.length;let n=0,i=-1;for(;++i<r;)n|=e[i]^t[i];return 0===n},B=r(4155);function K(){return"function"===typeof WebSocketPair}function V(){try{return void 0!==B.versions.node}catch(e){return!1}}function W(e,t="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function $(e,t){return e.name===t}function J(e){return parseInt(e.name.slice(4),10)}function q(e,t){if(t.length&&!t.some((t=>e.usages.includes(t)))){let e="CryptoKey does not support this operation, its usages must include ";if(t.length>2){const r=t.pop();e+=`one of ${t.join(", ")}, or ${r}.`}else 2===t.length?e+=`one of ${t[0]} or ${t[1]}.`:e+=`${t[0]}.`;throw new TypeError(e)}}function z(e,t,...r){switch(t){case"HS256":case"HS384":case"HS512":{if(!$(e.algorithm,"HMAC"))throw W("HMAC");const r=parseInt(t.slice(2),10);if(J(e.algorithm.hash)!==r)throw W(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!$(e.algorithm,"RSASSA-PKCS1-v1_5"))throw W("RSASSA-PKCS1-v1_5");const r=parseInt(t.slice(2),10);if(J(e.algorithm.hash)!==r)throw W(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!$(e.algorithm,"RSA-PSS"))throw W("RSA-PSS");const r=parseInt(t.slice(2),10);if(J(e.algorithm.hash)!==r)throw W(`SHA-${r}`,"algorithm.hash");break}case V()&&"EdDSA":if("NODE-ED25519"!==e.algorithm.name&&"NODE-ED448"!==e.algorithm.name)throw W("NODE-ED25519 or NODE-ED448");break;case K()&&"EdDSA":if(!$(e.algorithm,"NODE-ED25519"))throw W("NODE-ED25519");break;case"ES256":case"ES384":case"ES512":{if(!$(e.algorithm,"ECDSA"))throw W("ECDSA");const r=function(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}(t);if(e.algorithm.namedCurve!==r)throw W(r,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}q(e,r)}function G(e,t,...r){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!$(e.algorithm,"AES-GCM"))throw W("AES-GCM");const r=parseInt(t.slice(1,4),10);if(e.algorithm.length!==r)throw W(r,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!$(e.algorithm,"AES-KW"))throw W("AES-KW");const r=parseInt(t.slice(1,4),10);if(e.algorithm.length!==r)throw W(r,"algorithm.length");break}case"ECDH":if(!$(e.algorithm,"ECDH"))throw W("ECDH");break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!$(e.algorithm,"PBKDF2"))throw W("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!$(e.algorithm,"RSA-OAEP"))throw W("RSA-OAEP");const r=parseInt(t.slice(9),10)||1;if(J(e.algorithm.hash)!==r)throw W(`SHA-${r}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}q(e,r)}var Y=(e,...t)=>{let r="Key must be ";if(t.length>2){const e=t.pop();r+=`one of type ${t.join(", ")}, or ${e}.`}else 2===t.length?r+=`one of type ${t[0]} or ${t[1]}.`:r+=`of type ${t[0]}.`;return null==e?r+=` Received ${e}`:"function"===typeof e&&e.name?r+=` Received function ${e.name}`:"object"===typeof e&&null!=e&&e.constructor&&e.constructor.name&&(r+=` Received an instance of ${e.constructor.name}`),r},X=e=>s(e);const Z=["CryptoKey"];var Q=async(e,t,r,n,i,a)=>{if(!s(t)&&!(t instanceof Uint8Array))throw new TypeError(Y(t,...Z,"Uint8Array"));switch(N(e,n),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return t instanceof Uint8Array&&H(t,parseInt(e.slice(-3),10)),async function(e,t,r,n,i,s){if(!(t instanceof Uint8Array))throw new TypeError(Y(t,"Uint8Array"));const a=parseInt(e.slice(1,4),10),u=await o.subtle.importKey("raw",t.subarray(a>>3),"AES-CBC",!1,["decrypt"]),c=await o.subtle.importKey("raw",t.subarray(0,a>>3),{hash:"SHA-"+(a<<1),name:"HMAC"},!1,["sign"]),l=d(s,n,r,p(s.length<<3)),h=new Uint8Array((await o.subtle.sign("HMAC",c,l)).slice(0,a>>3));let f,g;try{f=M(i,h)}catch(y){}if(!f)throw new k;try{g=new Uint8Array(await o.subtle.decrypt({iv:n,name:"AES-CBC"},u,r))}catch(v){}if(!g)throw new k;return g}(e,t,r,n,i,a);case"A128GCM":case"A192GCM":case"A256GCM":return t instanceof Uint8Array&&H(t,parseInt(e.slice(1,4),10)),async function(e,t,r,n,i,s){let a;t instanceof Uint8Array?a=await o.subtle.importKey("raw",t,"AES-GCM",!1,["decrypt"]):(G(t,e,"decrypt"),a=t);try{return new Uint8Array(await o.subtle.decrypt({additionalData:s,iv:n,name:"AES-GCM",tagLength:128},a,d(r,i)))}catch(u){throw new k}}(e,t,r,n,i,a);default:throw new A("Unsupported JWE Content Encryption Algorithm")}};const ee=async()=>{throw new A('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `inflateRaw` decrypt option to provide Inflate Raw implementation.')},te=async()=>{throw new A('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `deflateRaw` encrypt option to provide Deflate Raw implementation.')};var re=(...e)=>{const t=e.filter(Boolean);if(0===t.length||1===t.length)return!0;let r;for(const n of t){const e=Object.keys(n);if(r&&0!==r.size)for(const t of e){if(r.has(t))return!1;r.add(t)}else r=new Set(e)}return!0};function ne(e){if("object"!==typeof(t=e)||null===t||"[object Object]"!==Object.prototype.toString.call(e))return!1;var t;if(null===Object.getPrototypeOf(e))return!0;let r=e;for(;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r}var ie=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];function oe(e,t){if(e.algorithm.length!==parseInt(t.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${t}`)}function se(e,t,r){if(s(e))return G(e,t,r),e;if(e instanceof Uint8Array)return o.subtle.importKey("raw",e,"AES-KW",!0,[r]);throw new TypeError(Y(e,...Z,"Uint8Array"))}const ae=async(e,t,r)=>{const n=await se(t,e,"wrapKey");oe(n,e);const i=await o.subtle.importKey("raw",r,...ie);return new Uint8Array(await o.subtle.wrapKey("raw",i,n,"AES-KW"))},ue=async(e,t,r)=>{const n=await se(t,e,"unwrapKey");oe(n,e);const i=await o.subtle.unwrapKey("raw",r,n,"AES-KW",...ie);return new Uint8Array(await o.subtle.exportKey("raw",i))};async function ce(e,t,r,n,i=new Uint8Array(0),c=new Uint8Array(0)){if(!s(e))throw new TypeError(Y(e,...Z));if(G(e,"ECDH"),!s(t))throw new TypeError(Y(t,...Z));G(t,"ECDH","deriveBits");const l=d(g(u.encode(r)),g(i),g(c),f(n));return async function(e,t,r){const n=Math.ceil((t>>3)/32);let i;for(let o=1;o<=n;o++){const t=new Uint8Array(4+e.length+r.length);t.set(f(o)),t.set(e,4),t.set(r,4+e.length),i=i?d(i,await a("sha256",t)):await a("sha256",t)}return i=i.slice(0,t>>3),i}(new Uint8Array(await o.subtle.deriveBits({name:"ECDH",public:e},t,Math.ceil(parseInt(t.algorithm.namedCurve.slice(-3),10)/8)<<3)),n,l)}function le(e){if(!s(e))throw new TypeError(Y(e,...Z));return["P-256","P-384","P-521"].includes(e.algorithm.namedCurve)}async function de(e,t,r,n){!function(e){if(!(e instanceof Uint8Array)||e.length<8)throw new F("PBES2 Salt Input must be 8 or more octets")}(e);const i=function(e,t){return d(u.encode(e),new Uint8Array([0]),t)}(t,e),a=parseInt(t.slice(13,16),10),c={hash:`SHA-${t.slice(8,11)}`,iterations:r,name:"PBKDF2",salt:i},l={length:a,name:"AES-KW"},h=await function(e,t){if(e instanceof Uint8Array)return o.subtle.importKey("raw",e,"PBKDF2",!1,["deriveBits"]);if(s(e))return G(e,t,"deriveBits","deriveKey"),e;throw new TypeError(Y(e,...Z,"Uint8Array"))}(n,t);if(h.usages.includes("deriveBits"))return new Uint8Array(await o.subtle.deriveBits(c,h,a));if(h.usages.includes("deriveKey"))return o.subtle.deriveKey(c,h,l,!1,["wrapKey","unwrapKey"]);throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}function he(e){switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new A(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}var pe=(e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){const{modulusLength:r}=t.algorithm;if("number"!==typeof r||r<2048)throw new TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}};function fe(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new A(`Unsupported JWE Algorithm: ${e}`)}}var ge=e=>D(new Uint8Array(fe(e)>>3)),ye=(e,t)=>`-----BEGIN ${t}-----\n${(e.match(/.{1,64}/g)||[]).join("\n")}\n-----END ${t}-----`;const ve=async(e,t,r)=>{if(!s(r))throw new TypeError(Y(r,...Z));if(!r.extractable)throw new TypeError("CryptoKey is not extractable");if(r.type!==e)throw new TypeError(`key is not a ${e} key`);return ye(y(new Uint8Array(await o.subtle.exportKey(t,r))),`${e.toUpperCase()} KEY`)},me=(e,t,r=0)=>{0===r&&(t.unshift(t.length),t.unshift(6));let n=e.indexOf(t[0],r);if(-1===n)return!1;const i=e.subarray(n,n+t.length);return i.length===t.length&&(i.every(((e,r)=>e===t[r]))||me(e,t,n+1))},we=e=>{switch(!0){case me(e,[42,134,72,206,61,3,1,7]):return"P-256";case me(e,[43,129,4,0,34]):return"P-384";case me(e,[43,129,4,0,35]):return"P-521";case(K()||V())&&me(e,[43,101,112]):return"Ed25519";case V()&&me(e,[43,101,113]):return"Ed448";default:throw new A("Invalid or unsupported EC Key Curve or OKP Key Sub Type")}},be=async(e,t,r,n,i)=>{var s;let a,u;const c=new Uint8Array(atob(r.replace(e,"")).split("").map((e=>e.charCodeAt(0)))),l="spki"===t;switch(n){case"PS256":case"PS384":case"PS512":a={name:"RSA-PSS",hash:`SHA-${n.slice(-3)}`},u=l?["verify"]:["sign"];break;case"RS256":case"RS384":case"RS512":a={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${n.slice(-3)}`},u=l?["verify"]:["sign"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":a={name:"RSA-OAEP",hash:`SHA-${parseInt(n.slice(-3),10)||1}`},u=l?["encrypt","wrapKey"]:["decrypt","unwrapKey"];break;case"ES256":a={name:"ECDSA",namedCurve:"P-256"},u=l?["verify"]:["sign"];break;case"ES384":a={name:"ECDSA",namedCurve:"P-384"},u=l?["verify"]:["sign"];break;case"ES512":a={name:"ECDSA",namedCurve:"P-521"},u=l?["verify"]:["sign"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":a={name:"ECDH",namedCurve:we(c)},u=l?[]:["deriveBits"];break;case(K()||V())&&"EdDSA":const e=we(c).toUpperCase();a={name:`NODE-${e}`,namedCurve:`NODE-${e}`},u=l?["verify"]:["sign"];break;default:throw new A('Invalid or unsupported "alg" (Algorithm) value')}return o.subtle.importKey(t,c,a,null!==(s=null===i||void 0===i?void 0:i.extractable)&&void 0!==s&&s,u)},Se=(e,t,r)=>be(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,"spki",e,t,r);var _e=async e=>{var t,r;const{algorithm:n,keyUsages:i}=function(e){let t,r;switch(e.kty){case"oct":switch(e.alg){case"HS256":case"HS384":case"HS512":t={name:"HMAC",hash:`SHA-${e.alg.slice(-3)}`},r=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new A(`${e.alg} keys cannot be imported as CryptoKey instances`);case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":t={name:"AES-GCM"},r=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":t={name:"AES-KW"},r=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":t={name:"PBKDF2"},r=["deriveBits"];break;default:throw new A('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},r=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new A('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},r=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},r=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new A('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case(K()||V())&&"OKP":if("EdDSA"!==e.alg)throw new A('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');switch(e.crv){case"Ed25519":t={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},r=e.d?["sign"]:["verify"];break;case V()&&"Ed448":t={name:"NODE-ED448",namedCurve:"NODE-ED448"},r=e.d?["sign"]:["verify"];break;default:throw new A('Invalid or unsupported JWK "crv" (Subtype of Key Pair) Parameter value')}break;default:throw new A('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:r}}(e),s=[n,null!==(t=e.ext)&&void 0!==t&&t,null!==(r=e.key_ops)&&void 0!==r?r:i];if("PBKDF2"===n.name)return o.subtle.importKey("raw",w(e.k),...s);const a={...e};return delete a.alg,o.subtle.importKey("jwk",a,...s)};function Ee(e){let t=[],r=0;for(;r<e.length;){let n=Ae(e.subarray(r));t.push(n),r+=n.byteLength}return t}function Ae(e){let t=0,r=31&e[0];if(t++,31===r){for(r=0;e[t]>=128;)r=128*r+e[t]-128,t++;r=128*r+e[t]-128,t++}let n=0;if(e[t]<128)n=e[t],t++;else{let r=127&e[t];t++,n=0;for(let i=0;i<r;i++)n=256*n+e[t],t++}if(128===n){for(n=0;0!==e[t+n]||0!==e[t+n+1];)n++;const r=t+n+2;return{byteLength:r,contents:e.subarray(t,t+n),raw:e.subarray(0,r)}}const i=t+n;return{byteLength:i,contents:e.subarray(t,i),raw:e.subarray(0,i)}}function ke(e){const t=e.replace(/(?:-----(?:BEGIN|END) CERTIFICATE-----|\s)/g,""),r=m(t);return ye(function(e){const t=Ee(Ee(Ae(e).contents)[0].contents);return y(t[160===t[0].raw[0]?6:5].raw)}(r),"PUBLIC KEY")}async function Fe(e,t,r){if("string"!==typeof e||0!==e.indexOf("-----BEGIN PUBLIC KEY-----"))throw new TypeError('"spki" must be SPKI formatted string');return Se(e,t,r)}async function Ce(e,t,r){if("string"!==typeof e||0!==e.indexOf("-----BEGIN CERTIFICATE-----"))throw new TypeError('"x509" must be X.509 formatted string');const n=ke(e);return Se(n,t,r)}async function Pe(e,t,r){if("string"!==typeof e||0!==e.indexOf("-----BEGIN PRIVATE KEY-----"))throw new TypeError('"pkcs8" must be PCKS8 formatted string');return((e,t,r)=>be(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,"pkcs8",e,t,r))(e,t,r)}async function xe(e,t,r){if(!ne(e))throw new TypeError("JWK must be an object");if(t||(t=e.alg),"string"!==typeof t||!t)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');switch(e.kty){case"oct":if("string"!==typeof e.k||!e.k)throw new TypeError('missing "k" (Key Value) Parameter value');return null!==r&&void 0!==r||(r=!0!==e.ext),r?_e({...e,alg:t,ext:!1}):w(e.k);case"RSA":if(void 0!==e.oth)throw new A('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return _e({...e,alg:t});default:throw new A('Unsupported "kty" (Key Type) Parameter value')}}var Re=(e,t,r)=>{e.startsWith("HS")||"dir"===e||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?(e=>{if(!(e instanceof Uint8Array)){if(!X(e))throw new TypeError(Y(e,...Z,"Uint8Array"));if("secret"!==e.type)throw new TypeError(`${Z.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}})(t):((e,t)=>{if(!X(e))throw new TypeError(Y(e,...Z));if("secret"===e.type)throw new TypeError(`${Z.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===t&&"public"===e.type)throw new TypeError(`${Z.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===t&&"public"===e.type)throw new TypeError(`${Z.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(e.algorithm&&"verify"===t&&"private"===e.type)throw new TypeError(`${Z.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(e.algorithm&&"encrypt"===t&&"private"===e.type)throw new TypeError(`${Z.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)})(t,r)};var Te=async(e,t,r,n,i)=>{if(!s(r)&&!(r instanceof Uint8Array))throw new TypeError(Y(r,...Z,"Uint8Array"));switch(N(e,n),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r instanceof Uint8Array&&H(r,parseInt(e.slice(-3),10)),async function(e,t,r,n,i){if(!(r instanceof Uint8Array))throw new TypeError(Y(r,"Uint8Array"));const s=parseInt(e.slice(1,4),10),a=await o.subtle.importKey("raw",r.subarray(s>>3),"AES-CBC",!1,["encrypt"]),u=await o.subtle.importKey("raw",r.subarray(0,s>>3),{hash:"SHA-"+(s<<1),name:"HMAC"},!1,["sign"]),c=new Uint8Array(await o.subtle.encrypt({iv:n,name:"AES-CBC"},a,t)),l=d(i,n,c,p(i.length<<3));return{ciphertext:c,tag:new Uint8Array((await o.subtle.sign("HMAC",u,l)).slice(0,s>>3))}}(e,t,r,n,i);case"A128GCM":case"A192GCM":case"A256GCM":return r instanceof Uint8Array&&H(r,parseInt(e.slice(1,4),10)),async function(e,t,r,n,i){let s;r instanceof Uint8Array?s=await o.subtle.importKey("raw",r,"AES-GCM",!1,["encrypt"]):(G(r,e,"encrypt"),s=r);const a=new Uint8Array(await o.subtle.encrypt({additionalData:i,iv:n,name:"AES-GCM",tagLength:128},s,t)),u=a.slice(-16);return{ciphertext:a.slice(0,-16),tag:u}}(e,t,r,n,i);default:throw new A("Unsupported JWE Content Encryption Algorithm")}};var Ie=async function(e,t,r,n){switch(Re(e,t,"decrypt"),e){case"dir":if(void 0!==r)throw new F("Encountered unexpected JWE Encrypted Key");return t;case"ECDH-ES":if(void 0!==r)throw new F("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!ne(n.epk))throw new F('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!le(t))throw new A("ECDH with the provided key is not allowed or not supported by your javascript runtime");const i=await xe(n.epk,e);let o,s;if(void 0!==n.apu){if("string"!==typeof n.apu)throw new F('JOSE Header "apu" (Agreement PartyUInfo) invalid');o=w(n.apu)}if(void 0!==n.apv){if("string"!==typeof n.apv)throw new F('JOSE Header "apv" (Agreement PartyVInfo) invalid');s=w(n.apv)}const a=await ce(i,t,"ECDH-ES"===e?n.enc:e,"ECDH-ES"===e?fe(n.enc):parseInt(e.slice(-5,-2),10),o,s);if("ECDH-ES"===e)return a;if(void 0===r)throw new F("JWE Encrypted Key missing");return ue(e.slice(-6),a,r)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===r)throw new F("JWE Encrypted Key missing");return(async(e,t,r)=>{if(!s(t))throw new TypeError(Y(t,...Z));if(G(t,e,"decrypt","unwrapKey"),pe(e,t),t.usages.includes("decrypt"))return new Uint8Array(await o.subtle.decrypt(he(e),t,r));if(t.usages.includes("unwrapKey")){const n=await o.subtle.unwrapKey("raw",r,t,he(e),...ie);return new Uint8Array(await o.subtle.exportKey("raw",n))}throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')})(e,t,r);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(void 0===r)throw new F("JWE Encrypted Key missing");if("number"!==typeof n.p2c)throw new F('JOSE Header "p2c" (PBES2 Count) missing or invalid');if("string"!==typeof n.p2s)throw new F('JOSE Header "p2s" (PBES2 Salt) missing or invalid');return(async(e,t,r,n,i)=>{const o=await de(i,e,n,t);return ue(e.slice(-6),o,r)})(e,t,r,n.p2c,w(n.p2s));case"A128KW":case"A192KW":case"A256KW":if(void 0===r)throw new F("JWE Encrypted Key missing");return ue(e,t,r);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":if(void 0===r)throw new F("JWE Encrypted Key missing");if("string"!==typeof n.iv)throw new F('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!==typeof n.tag)throw new F('JOSE Header "tag" (Authentication Tag) missing or invalid');return async function(e,t,r,n,i){const o=e.slice(0,7);return Q(o,t,r,n,i,new Uint8Array(0))}(e,t,r,w(n.iv),w(n.tag));default:throw new A('Invalid or unsupported "alg" (JWE Algorithm) header value')}};var Oe=function(e,t,r,n,i){if(void 0!==i.crit&&void 0===n.crit)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||void 0===n.crit)return new Set;if(!Array.isArray(n.crit)||0===n.crit.length||n.crit.some((e=>"string"!==typeof e||0===e.length)))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let o;o=void 0!==r?new Map([...Object.entries(r),...t.entries()]):t;for(const s of n.crit){if(!o.has(s))throw new A(`Extension Header Parameter "${s}" is not recognized`);if(void 0===i[s])throw new e(`Extension Header Parameter "${s}" is missing`);if(o.get(s)&&void 0===n[s])throw new e(`Extension Header Parameter "${s}" MUST be integrity protected`)}return new Set(n.crit)};var Ue=(e,t)=>{if(void 0!==t&&(!Array.isArray(t)||t.some((e=>"string"!==typeof e))))throw new TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};async function De(e,t,r){var n;if(!ne(e))throw new F("Flattened JWE must be an object");if(void 0===e.protected&&void 0===e.header&&void 0===e.unprotected)throw new F("JOSE Header missing");if("string"!==typeof e.iv)throw new F("JWE Initialization Vector missing or incorrect type");if("string"!==typeof e.ciphertext)throw new F("JWE Ciphertext missing or incorrect type");if("string"!==typeof e.tag)throw new F("JWE Authentication Tag missing or incorrect type");if(void 0!==e.protected&&"string"!==typeof e.protected)throw new F("JWE Protected Header incorrect type");if(void 0!==e.encrypted_key&&"string"!==typeof e.encrypted_key)throw new F("JWE Encrypted Key incorrect type");if(void 0!==e.aad&&"string"!==typeof e.aad)throw new F("JWE AAD incorrect type");if(void 0!==e.header&&!ne(e.header))throw new F("JWE Shared Unprotected Header incorrect type");if(void 0!==e.unprotected&&!ne(e.unprotected))throw new F("JWE Per-Recipient Unprotected Header incorrect type");let i;if(e.protected){const t=w(e.protected);try{i=JSON.parse(c.decode(t))}catch(k){throw new F("JWE Protected Header is invalid")}}if(!re(i,e.header,e.unprotected))throw new F("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const o={...i,...e.header,...e.unprotected};if(Oe(F,new Map,null===r||void 0===r?void 0:r.crit,i,o),void 0!==o.zip){if(!i||!i.zip)throw new F('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==o.zip)throw new A('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:s,enc:a}=o;if("string"!==typeof s||!s)throw new F("missing JWE Algorithm (alg) in JWE Header");if("string"!==typeof a||!a)throw new F("missing JWE Encryption Algorithm (enc) in JWE Header");const l=r&&Ue("keyManagementAlgorithms",r.keyManagementAlgorithms),h=r&&Ue("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(l&&!l.has(s))throw new E('"alg" (Algorithm) Header Parameter not allowed');if(h&&!h.has(a))throw new E('"enc" (Encryption Algorithm) Header Parameter not allowed');let p;void 0!==e.encrypted_key&&(p=w(e.encrypted_key));let f,g=!1;"function"===typeof t&&(t=await t(i,e),g=!0);try{f=await Ie(s,t,p,o)}catch(C){if(C instanceof TypeError)throw C;f=ge(a)}const y=w(e.iv),v=w(e.tag),m=u.encode(null!==(n=e.protected)&&void 0!==n?n:"");let b;b=void 0!==e.aad?d(m,u.encode("."),u.encode(e.aad)):m;let S=await Q(a,f,w(e.ciphertext),y,v,b);"DEF"===o.zip&&(S=await((null===r||void 0===r?void 0:r.inflateRaw)||ee)(S));const _={plaintext:S};return void 0!==e.protected&&(_.protectedHeader=i),void 0!==e.aad&&(_.additionalAuthenticatedData=w(e.aad)),void 0!==e.unprotected&&(_.sharedUnprotectedHeader=e.unprotected),void 0!==e.header&&(_.unprotectedHeader=e.header),g?{..._,key:t}:_}async function je(e,t,r){if(e instanceof Uint8Array&&(e=c.decode(e)),"string"!==typeof e)throw new F("Compact JWE must be a string or Uint8Array");const{0:n,1:i,2:o,3:s,4:a,length:u}=e.split(".");if(5!==u)throw new F("Invalid Compact JWE");const l=await De({ciphertext:s,iv:o||void 0,protected:n||void 0,tag:a||void 0,encrypted_key:i||void 0},t,r),d={plaintext:l.plaintext,protectedHeader:l.protectedHeader};return"function"===typeof t?{...d,key:l.key}:d}async function Le(e,t,r){if(!ne(e))throw new F("General JWE must be an object");if(!Array.isArray(e.recipients)||!e.recipients.every(ne))throw new F("JWE Recipients missing or incorrect type");if(!e.recipients.length)throw new F("JWE Recipients has no members");for(const i of e.recipients)try{return await De({aad:e.aad,ciphertext:e.ciphertext,encrypted_key:i.encrypted_key,header:i.header,iv:e.iv,protected:e.protected,tag:e.tag,unprotected:e.unprotected},t,r)}catch(n){}throw new k}var Ne=async e=>{if(e instanceof Uint8Array)return{kty:"oct",k:v(e)};if(!s(e))throw new TypeError(Y(e,...Z,"Uint8Array"));if(!e.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:t,key_ops:r,alg:n,use:i,...a}=await o.subtle.exportKey("jwk",e);return a};async function He(e){return(e=>ve("public","spki",e))(e)}async function Me(e){return(e=>ve("private","pkcs8",e))(e)}async function Be(e){return Ne(e)}var Ke=async function(e,t,r,n,i={}){let a,u,c;switch(Re(e,r,"encrypt"),e){case"dir":c=r;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!le(r))throw new A("ECDH with the provided key is not allowed or not supported by your javascript runtime");const{apu:l,apv:d}=i;let{epk:h}=i;h||(h=(await async function(e){if(!s(e))throw new TypeError(Y(e,...Z));return o.subtle.generateKey(e.algorithm,!0,["deriveBits"])}(r)).privateKey);const{x:p,y:f,crv:g,kty:y}=await Be(h),m=await ce(r,h,"ECDH-ES"===e?t:e,"ECDH-ES"===e?fe(t):parseInt(e.slice(-5,-2),10),l,d);if(u={epk:{x:p,crv:g,kty:y}},"EC"===y&&(u.epk.y=f),l&&(u.apu=v(l)),d&&(u.apv=v(d)),"ECDH-ES"===e){c=m;break}c=n||ge(t);const w=e.slice(-6);a=await ae(w,m,c);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":c=n||ge(t),a=await(async(e,t,r)=>{if(!s(t))throw new TypeError(Y(t,...Z));if(G(t,e,"encrypt","wrapKey"),pe(e,t),t.usages.includes("encrypt"))return new Uint8Array(await o.subtle.encrypt(he(e),t,r));if(t.usages.includes("wrapKey")){const n=await o.subtle.importKey("raw",r,...ie);return new Uint8Array(await o.subtle.wrapKey("raw",n,t,he(e)))}throw new TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')})(e,r,c);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{c=n||ge(t);const{p2c:o,p2s:s}=i;({encryptedKey:a,...u}=await(async(e,t,r,n=2048,i=D(new Uint8Array(16)))=>{const o=await de(i,e,n,t);return{encryptedKey:await ae(e.slice(-6),o,r),p2c:n,p2s:v(i)}})(e,r,c,o,s));break}case"A128KW":case"A192KW":case"A256KW":c=n||ge(t),a=await ae(e,r,c);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{c=n||ge(t);const{iv:o}=i;({encryptedKey:a,...u}=await async function(e,t,r,n){const i=e.slice(0,7);n||(n=L(i));const{ciphertext:o,tag:s}=await Te(i,r,t,n,new Uint8Array(0));return{encryptedKey:o,iv:v(n),tag:v(s)}}(e,r,c,o));break}default:throw new A('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:c,encryptedKey:a,parameters:u}};const Ve=Symbol();class We{constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=e}setKeyManagementParameters(e){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}setContentEncryptionKey(e){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=e,this}async encrypt(e,t){if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new F("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!re(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new F("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const r={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(Oe(F,new Map,null===t||void 0===t?void 0:t.crit,this._protectedHeader,r),void 0!==r.zip){if(!this._protectedHeader||!this._protectedHeader.zip)throw new F('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==r.zip)throw new A('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:n,enc:i}=r;if("string"!==typeof n||!n)throw new F('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!==typeof i||!i)throw new F('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let o,s,a,l,h,p,f;if("dir"===n){if(this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if("ECDH-ES"===n&&this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");{let r;({cek:s,encryptedKey:o,parameters:r}=await Ke(n,i,e,this._cek,this._keyManagementParameters)),r&&(t&&Ve in t?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...r}:this.setUnprotectedHeader(r):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...r}:this.setProtectedHeader(r))}if(this._iv||(this._iv=L(i)),l=this._protectedHeader?u.encode(v(JSON.stringify(this._protectedHeader))):u.encode(""),this._aad?(h=v(this._aad),a=d(l,u.encode("."),u.encode(h))):a=l,"DEF"===r.zip){const e=await((null===t||void 0===t?void 0:t.deflateRaw)||te)(this._plaintext);({ciphertext:p,tag:f}=await Te(i,e,s,this._iv,a))}else({ciphertext:p,tag:f}=await Te(i,this._plaintext,s,this._iv,a));const g={ciphertext:v(p),iv:v(this._iv),tag:v(f)};return o&&(g.encrypted_key=v(o)),h&&(g.aad=h),this._protectedHeader&&(g.protected=c.decode(l)),this._sharedUnprotectedHeader&&(g.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(g.header=this._unprotectedHeader),g}}class $e{constructor(e,t,r){this.parent=e,this.key=t,this.options=r}setUnprotectedHeader(e){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addRecipient(...e){return this.parent.addRecipient(...e)}encrypt(...e){return this.parent.encrypt(...e)}done(){return this.parent}}class Je{constructor(e){this._recipients=[],this._plaintext=e}addRecipient(e,t){const r=new $e(this,e,{crit:null===t||void 0===t?void 0:t.crit});return this._recipients.push(r),r}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}async encrypt(e){var t,r,n;if(!this._recipients.length)throw new F("at least one recipient must be added");if(e={deflateRaw:null===e||void 0===e?void 0:e.deflateRaw},1===this._recipients.length){const[t]=this._recipients,r=await new We(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(t.unprotectedHeader).encrypt(t.key,{...t.options,...e});let n={ciphertext:r.ciphertext,iv:r.iv,recipients:[{}],tag:r.tag};return r.aad&&(n.aad=r.aad),r.protected&&(n.protected=r.protected),r.unprotected&&(n.unprotected=r.unprotected),r.encrypted_key&&(n.recipients[0].encrypted_key=r.encrypted_key),r.header&&(n.recipients[0].header=r.header),n}let i;for(let a=0;a<this._recipients.length;a++){const e=this._recipients[a];if(!re(this._protectedHeader,this._unprotectedHeader,e.unprotectedHeader))throw new F("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const t={...this._protectedHeader,...this._unprotectedHeader,...e.unprotectedHeader},{alg:r}=t;if("string"!==typeof r||!r)throw new F('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("dir"===r||"ECDH-ES"===r)throw new F('"dir" and "ECDH-ES" alg may only be used with a single recipient');if("string"!==typeof t.enc||!t.enc)throw new F('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(i){if(i!==t.enc)throw new F('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients')}else i=t.enc;if(Oe(F,new Map,e.options.crit,this._protectedHeader,t),void 0!==t.zip&&(!this._protectedHeader||!this._protectedHeader.zip))throw new F('JWE "zip" (Compression Algorithm) Header MUST be integrity protected')}const o=ge(i);let s={ciphertext:"",iv:"",recipients:[],tag:""};for(let a=0;a<this._recipients.length;a++){const u=this._recipients[a],c={};s.recipients.push(c);const l={...this._protectedHeader,...this._unprotectedHeader,...u.unprotectedHeader}.alg.startsWith("PBES2")?2048+a:void 0;if(0===a){const t=await new We(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(o).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(u.unprotectedHeader).setKeyManagementParameters({p2c:l}).encrypt(u.key,{...u.options,...e,[Ve]:!0});s.ciphertext=t.ciphertext,s.iv=t.iv,s.tag=t.tag,t.aad&&(s.aad=t.aad),t.protected&&(s.protected=t.protected),t.unprotected&&(s.unprotected=t.unprotected),c.encrypted_key=t.encrypted_key,t.header&&(c.header=t.header);continue}const{encryptedKey:d,parameters:h}=await Ke((null===(t=u.unprotectedHeader)||void 0===t?void 0:t.alg)||(null===(r=this._protectedHeader)||void 0===r?void 0:r.alg)||(null===(n=this._unprotectedHeader)||void 0===n?void 0:n.alg),i,u.key,o,{p2c:l});c.encrypted_key=v(d),(u.unprotectedHeader||h)&&(c.header={...u.unprotectedHeader,...h})}return s}}function qe(e,t){const r=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:r,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:r,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:r,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:r,name:"ECDSA",namedCurve:t.namedCurve};case(K()||V())&&"EdDSA":const{namedCurve:n}=t;return{name:n,namedCurve:n};default:throw new A(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}function ze(e,t,r){if(s(t))return z(t,e,r),t;if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(Y(t,...Z));return o.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[r])}throw new TypeError(Y(t,...Z,"Uint8Array"))}var Ge=async(e,t,r,n)=>{const i=await ze(e,t,"verify");pe(e,i);const s=qe(e,i.algorithm);try{return await o.subtle.verify(s,i,r,n)}catch(a){return!1}};async function Ye(e,t,r){var n;if(!ne(e))throw new C("Flattened JWS must be an object");if(void 0===e.protected&&void 0===e.header)throw new C('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==e.protected&&"string"!==typeof e.protected)throw new C("JWS Protected Header incorrect type");if(void 0===e.payload)throw new C("JWS Payload missing");if("string"!==typeof e.signature)throw new C("JWS Signature missing or incorrect type");if(void 0!==e.header&&!ne(e.header))throw new C("JWS Unprotected Header incorrect type");let i={};if(e.protected){const t=w(e.protected);try{i=JSON.parse(c.decode(t))}catch(v){throw new C("JWS Protected Header is invalid")}}if(!re(i,e.header))throw new C("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const o={...i,...e.header};let s=!0;if(Oe(C,new Map([["b64",!0]]),null===r||void 0===r?void 0:r.crit,i,o).has("b64")&&(s=i.b64,"boolean"!==typeof s))throw new C('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:a}=o;if("string"!==typeof a||!a)throw new C('JWS "alg" (Algorithm) Header Parameter missing or invalid');const l=r&&Ue("algorithms",r.algorithms);if(l&&!l.has(a))throw new E('"alg" (Algorithm) Header Parameter not allowed');if(s){if("string"!==typeof e.payload)throw new C("JWS Payload must be a string")}else if("string"!==typeof e.payload&&!(e.payload instanceof Uint8Array))throw new C("JWS Payload must be a string or an Uint8Array instance");let h=!1;"function"===typeof t&&(t=await t(i,e),h=!0),Re(a,t,"verify");const p=d(u.encode(null!==(n=e.protected)&&void 0!==n?n:""),u.encode("."),"string"===typeof e.payload?u.encode(e.payload):e.payload),f=w(e.signature);if(!(await Ge(a,t,f,p)))throw new U;let g;g=s?w(e.payload):"string"===typeof e.payload?u.encode(e.payload):e.payload;const y={payload:g};return void 0!==e.protected&&(y.protectedHeader=i),void 0!==e.header&&(y.unprotectedHeader=e.header),h?{...y,key:t}:y}async function Xe(e,t,r){if(e instanceof Uint8Array&&(e=c.decode(e)),"string"!==typeof e)throw new C("Compact JWS must be a string or Uint8Array");const{0:n,1:i,2:o,length:s}=e.split(".");if(3!==s)throw new C("Invalid Compact JWS");const a=await Ye({payload:i,protected:n,signature:o},t,r),u={payload:a.payload,protectedHeader:a.protectedHeader};return"function"===typeof t?{...u,key:a.key}:u}async function Ze(e,t,r){if(!ne(e))throw new C("General JWS must be an object");if(!Array.isArray(e.signatures)||!e.signatures.every(ne))throw new C("JWS Signatures missing or incorrect type");for(const i of e.signatures)try{return await Ye({header:i.header,payload:e.payload,protected:i.protected,signature:i.signature},t,r)}catch(n){}throw new U}var Qe=e=>Math.floor(e.getTime()/1e3);const et=86400,tt=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i;var rt=e=>{const t=tt.exec(e);if(!t)throw new TypeError("Invalid time period format");const r=parseFloat(t[1]);switch(t[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(r);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(60*r);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(3600*r);case"day":case"days":case"d":return Math.round(r*et);case"week":case"weeks":case"w":return Math.round(604800*r);default:return Math.round(31557600*r)}};const nt=e=>e.toLowerCase().replace(/^application\//,"");var it=(e,t,r={})=>{const{typ:n}=r;if(n&&("string"!==typeof e.typ||nt(e.typ)!==nt(n)))throw new S('unexpected "typ" JWT header value',"typ","check_failed");let i;try{i=JSON.parse(c.decode(t))}catch(f){}if(!ne(i))throw new P("JWT Claims Set must be a top-level JSON object");const{issuer:o}=r;if(o&&!(Array.isArray(o)?o:[o]).includes(i.iss))throw new S('unexpected "iss" claim value',"iss","check_failed");const{subject:s}=r;if(s&&i.sub!==s)throw new S('unexpected "sub" claim value',"sub","check_failed");const{audience:a}=r;if(a&&(u=i.aud,l="string"===typeof a?[a]:a,!("string"===typeof u?l.includes(u):Array.isArray(u)&&l.some(Set.prototype.has.bind(new Set(u))))))throw new S('unexpected "aud" claim value',"aud","check_failed");var u,l;let d;switch(typeof r.clockTolerance){case"string":d=rt(r.clockTolerance);break;case"number":d=r.clockTolerance;break;case"undefined":d=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:h}=r,p=Qe(h||new Date);if(void 0!==i.iat||r.maxTokenAge){if("number"!==typeof i.iat)throw new S('"iat" claim must be a number',"iat","invalid");if(void 0===i.exp&&i.iat>p+d)throw new S('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}if(void 0!==i.nbf){if("number"!==typeof i.nbf)throw new S('"nbf" claim must be a number',"nbf","invalid");if(i.nbf>p+d)throw new S('"nbf" claim timestamp check failed',"nbf","check_failed")}if(void 0!==i.exp){if("number"!==typeof i.exp)throw new S('"exp" claim must be a number',"exp","invalid");if(i.exp<=p-d)throw new _('"exp" claim timestamp check failed',"exp","check_failed")}if(r.maxTokenAge){const e=p-i.iat;if(e-d>("number"===typeof r.maxTokenAge?r.maxTokenAge:rt(r.maxTokenAge)))throw new _('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(e<0-d)throw new S('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return i};async function ot(e,t,r){var n;const i=await Xe(e,t,r);if((null===(n=i.protectedHeader.crit)||void 0===n?void 0:n.includes("b64"))&&!1===i.protectedHeader.b64)throw new P("JWTs MUST NOT use unencoded payload");const o={payload:it(i.protectedHeader,i.payload,r),protectedHeader:i.protectedHeader};return"function"===typeof t?{...o,key:i.key}:o}async function st(e,t,r){const n=await je(e,t,r),i=it(n.protectedHeader,n.plaintext,r),{protectedHeader:o}=n;if(void 0!==o.iss&&o.iss!==i.iss)throw new S('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(void 0!==o.sub&&o.sub!==i.sub)throw new S('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(void 0!==o.aud&&JSON.stringify(o.aud)!==JSON.stringify(i.aud))throw new S('replicated "aud" claim header parameter mismatch',"aud","mismatch");const s={payload:i,protectedHeader:o};return"function"===typeof t?{...s,key:n.key}:s}class at{constructor(e){this._flattened=new We(e)}setContentEncryptionKey(e){return this._flattened.setContentEncryptionKey(e),this}setInitializationVector(e){return this._flattened.setInitializationVector(e),this}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}setKeyManagementParameters(e){return this._flattened.setKeyManagementParameters(e),this}async encrypt(e,t){const r=await this._flattened.encrypt(e,t);return[r.protected,r.encrypted_key,r.iv,r.ciphertext,r.tag].join(".")}}var ut=async(e,t,r)=>{const n=await ze(e,t,"sign");pe(e,n);const i=await o.subtle.sign(qe(e,n.algorithm),n,r);return new Uint8Array(i)};class ct{constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=e}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}async sign(e,t){if(!this._protectedHeader&&!this._unprotectedHeader)throw new C("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!re(this._protectedHeader,this._unprotectedHeader))throw new C("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const r={...this._protectedHeader,...this._unprotectedHeader};let n=!0;if(Oe(C,new Map([["b64",!0]]),null===t||void 0===t?void 0:t.crit,this._protectedHeader,r).has("b64")&&(n=this._protectedHeader.b64,"boolean"!==typeof n))throw new C('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:i}=r;if("string"!==typeof i||!i)throw new C('JWS "alg" (Algorithm) Header Parameter missing or invalid');Re(i,e,"sign");let o,s=this._payload;n&&(s=u.encode(v(s))),o=this._protectedHeader?u.encode(v(JSON.stringify(this._protectedHeader))):u.encode("");const a=d(o,u.encode("."),s),l=await ut(i,e,a),h={signature:v(l),payload:""};return n&&(h.payload=c.decode(s)),this._unprotectedHeader&&(h.header=this._unprotectedHeader),this._protectedHeader&&(h.protected=c.decode(o)),h}}class lt{constructor(e){this._flattened=new ct(e)}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}async sign(e,t){const r=await this._flattened.sign(e,t);if(void 0===r.payload)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${r.protected}.${r.payload}.${r.signature}`}}class dt{constructor(e,t,r){this.parent=e,this.key=t,this.options=r}setProtectedHeader(e){if(this.protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this.protectedHeader=e,this}setUnprotectedHeader(e){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addSignature(...e){return this.parent.addSignature(...e)}sign(...e){return this.parent.sign(...e)}done(){return this.parent}}class ht{constructor(e){this._signatures=[],this._payload=e}addSignature(e,t){const r=new dt(this,e,t);return this._signatures.push(r),r}async sign(){if(!this._signatures.length)throw new C("at least one signature must be added");const e={signatures:[],payload:""};for(let t=0;t<this._signatures.length;t++){const r=this._signatures[t],n=new ct(this._payload);n.setProtectedHeader(r.protectedHeader),n.setUnprotectedHeader(r.unprotectedHeader);const{payload:i,...o}=await n.sign(r.key,r.options);if(0===t)e.payload=i;else if(e.payload!==i)throw new C("inconsistent use of JWS Unencoded Payload Option (RFC7797)");e.signatures.push(o)}return e}}class pt{constructor(e){if(!ne(e))throw new TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return this._payload="number"===typeof e?{...this._payload,nbf:e}:{...this._payload,nbf:Qe(new Date)+rt(e)},this}setExpirationTime(e){return this._payload="number"===typeof e?{...this._payload,exp:e}:{...this._payload,exp:Qe(new Date)+rt(e)},this}setIssuedAt(e){return this._payload="undefined"===typeof e?{...this._payload,iat:Qe(new Date)}:{...this._payload,iat:e},this}}class ft extends pt{setProtectedHeader(e){return this._protectedHeader=e,this}async sign(e,t){var r;const n=new lt(u.encode(JSON.stringify(this._payload)));if(n.setProtectedHeader(this._protectedHeader),Array.isArray(null===(r=this._protectedHeader)||void 0===r?void 0:r.crit)&&this._protectedHeader.crit.includes("b64")&&!1===this._protectedHeader.b64)throw new P("JWTs MUST NOT use unencoded payload");return n.sign(e,t)}}class gt extends pt{setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setKeyManagementParameters(e){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setContentEncryptionKey(e){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=e,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(e,t){const r=new at(u.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),r.setProtectedHeader(this._protectedHeader),this._iv&&r.setInitializationVector(this._iv),this._cek&&r.setContentEncryptionKey(this._cek),this._keyManagementParameters&&r.setKeyManagementParameters(this._keyManagementParameters),r.encrypt(e,t)}}const yt=(e,t)=>{if("string"!==typeof e||!e)throw new x(`${t} missing or invalid`)};async function vt(e,t="sha256"){if(!ne(e))throw new TypeError("JWK must be an object");if("sha256"!==t&&"sha384"!==t&&"sha512"!==t)throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let r;switch(e.kty){case"EC":yt(e.crv,'"crv" (Curve) Parameter'),yt(e.x,'"x" (X Coordinate) Parameter'),yt(e.y,'"y" (Y Coordinate) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x,y:e.y};break;case"OKP":yt(e.crv,'"crv" (Subtype of Key Pair) Parameter'),yt(e.x,'"x" (Public Key) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x};break;case"RSA":yt(e.e,'"e" (Exponent) Parameter'),yt(e.n,'"n" (Modulus) Parameter'),r={e:e.e,kty:e.kty,n:e.n};break;case"oct":yt(e.k,'"k" (Key Value) Parameter'),r={k:e.k,kty:e.kty};break;default:throw new A('"kty" (Key Type) Parameter missing or unsupported')}const n=u.encode(JSON.stringify(r));return v(await a(t,n))}async function mt(e,t){const r={...e,...t.header};if(!ne(r.jwk))throw new C('"jwk" (JSON Web Key) Header Parameter must be a JSON object');const n=await xe({...r.jwk,ext:!0},r.alg,!0);if(n instanceof Uint8Array||"public"!==n.type)throw new C('"jwk" (JSON Web Key) Header Parameter must be a public key');return n}function wt(e){return e&&"object"===typeof e&&Array.isArray(e.keys)&&e.keys.every(bt)}function bt(e){return ne(e)}class St{constructor(e){if(this._cached=new WeakMap,!wt(e))throw new R("JSON Web Key Set malformed");var t;this._jwks=(t=e,"function"===typeof structuredClone?structuredClone(t):JSON.parse(JSON.stringify(t)))}async getKey(e,t){const{alg:r,kid:n}={...e,...t.header},i=this._jwks.keys.filter((e=>{let t=e.kty===function(e){switch("string"===typeof e&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new A('Unsupported "alg" value for a JSON Web Key Set')}}(r);if(t&&"string"===typeof n&&(t=n===e.kid),t&&"string"===typeof e.alg&&(t=r===e.alg),t&&"string"===typeof e.use&&(t="sig"===e.use),t&&Array.isArray(e.key_ops)&&(t=e.key_ops.includes("verify")),t&&"EdDSA"===r&&(t="Ed25519"===e.crv||"Ed448"===e.crv),t)switch(r){case"ES256":t="P-256"===e.crv;break;case"ES256K":t="secp256k1"===e.crv;break;case"ES384":t="P-384"===e.crv;break;case"ES512":t="P-521"===e.crv}return t})),{0:o,length:s}=i;if(0===s)throw new T;if(1!==s)throw new I;const a=this._cached.get(o)||this._cached.set(o,{}).get(o);if(void 0===a[r]){const e=await xe({...o,ext:!0},r);if(e instanceof Uint8Array||"public"!==e.type)throw new R("JSON Web Key Set members must be public keys");a[r]=e}return a[r]}}function _t(e){return St.prototype.getKey.bind(new St(e))}var Et=async(e,t)=>{let r,n,i=!1;"function"===typeof AbortController&&(r=new AbortController,n=setTimeout((()=>{i=!0,r.abort()}),t));const o=await fetch(e.href,{signal:r?r.signal:void 0,redirect:"manual"}).catch((e=>{if(i)throw new O;throw e}));if(void 0!==n&&clearTimeout(n),200!==o.status)throw new b("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await o.json()}catch(s){throw new b("Failed to parse the JSON Web Key Set HTTP response as JSON")}};class At extends St{constructor(e,t){if(super({keys:[]}),this._jwks=void 0,!(e instanceof URL))throw new TypeError("url must be an instance of URL");this._url=new URL(e.href),this._options={agent:null===t||void 0===t?void 0:t.agent},this._timeoutDuration="number"===typeof(null===t||void 0===t?void 0:t.timeoutDuration)?null===t||void 0===t?void 0:t.timeoutDuration:5e3,this._cooldownDuration="number"===typeof(null===t||void 0===t?void 0:t.cooldownDuration)?null===t||void 0===t?void 0:t.cooldownDuration:3e4}coolingDown(){return!!this._cooldownStarted&&Date.now()<this._cooldownStarted+this._cooldownDuration}async getKey(e,t){this._jwks||await this.reload();try{return await super.getKey(e,t)}catch(r){if(r instanceof T&&!1===this.coolingDown())return await this.reload(),super.getKey(e,t);throw r}}async reload(){if(this._pendingFetch&&K())return new Promise((e=>{const t=()=>{void 0===this._pendingFetch?e():setTimeout(t,5)};t()}));this._pendingFetch||(this._pendingFetch=Et(this._url,this._timeoutDuration,this._options).then((e=>{if(!wt(e))throw new R("JSON Web Key Set malformed");this._jwks={keys:e.keys},this._cooldownStarted=Date.now(),this._pendingFetch=void 0})).catch((e=>{throw this._pendingFetch=void 0,e}))),await this._pendingFetch}}function kt(e,t){return At.prototype.getKey.bind(new At(e,t))}class Ft extends pt{encode(){return`${v(JSON.stringify({alg:"none"}))}.${v(JSON.stringify(this._payload))}.`}static decode(e,t){if("string"!==typeof e)throw new P("Unsecured JWT must be a string");const{0:r,1:n,2:i,length:o}=e.split(".");if(3!==o||""!==i)throw new P("Invalid Unsecured JWT");let s;try{if(s=JSON.parse(c.decode(w(r))),"none"!==s.alg)throw new Error}catch(a){throw new P("Invalid Unsecured JWT")}return{payload:it(s,w(n),t),header:s}}}const Ct=v,Pt=w;function xt(e){let t;if("string"===typeof e){const r=e.split(".");3!==r.length&&5!==r.length||([t]=r)}else if("object"===typeof e&&e){if(!("protected"in e))throw new TypeError("Token does not contain a Protected Header");t=e.protected}try{if("string"!==typeof t||!t)throw new Error;const e=JSON.parse(c.decode(Pt(t)));if(!ne(e))throw new Error;return e}catch(r){throw new TypeError("Invalid Token or Protected Header formatting")}}function Rt(e){if("string"!==typeof e)throw new P("JWTs must use Compact JWS serialization, JWT must be a string");const{1:t,length:r}=e.split(".");if(5===r)throw new P("Only JWTs using Compact JWS serialization can be decoded");if(3!==r)throw new P("Invalid JWT");if(!t)throw new P("JWTs must contain a payload");let n,i;try{n=Pt(t)}catch(o){throw new P("Failed to parse the base64url encoded payload")}try{i=JSON.parse(c.decode(n))}catch(s){throw new P("Failed to parse the decoded payload as JSON")}if(!ne(i))throw new P("Invalid JWT Claims Set");return i}function Tt(e){var t;const r=null!==(t=null===e||void 0===e?void 0:e.modulusLength)&&void 0!==t?t:2048;if("number"!==typeof r||r<2048)throw new A("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return r}async function It(e,t){return async function(e,t){var r,n;let i,s;switch(e){case"PS256":case"PS384":case"PS512":i={name:"RSA-PSS",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:Tt(t)},s=["sign","verify"];break;case"RS256":case"RS384":case"RS512":i={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:Tt(t)},s=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":i={name:"RSA-OAEP",hash:`SHA-${parseInt(e.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:Tt(t)},s=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":i={name:"ECDSA",namedCurve:"P-256"},s=["sign","verify"];break;case"ES384":i={name:"ECDSA",namedCurve:"P-384"},s=["sign","verify"];break;case"ES512":i={name:"ECDSA",namedCurve:"P-521"},s=["sign","verify"];break;case(K()||V())&&"EdDSA":switch(null===t||void 0===t?void 0:t.crv){case void 0:case"Ed25519":i={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},s=["sign","verify"];break;case V()&&"Ed448":i={name:"NODE-ED448",namedCurve:"NODE-ED448"},s=["sign","verify"];break;default:throw new A("Invalid or unsupported crv option provided, supported values are Ed25519 and Ed448")}break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":i={name:"ECDH",namedCurve:null!==(r=null===t||void 0===t?void 0:t.crv)&&void 0!==r?r:"P-256"},s=["deriveKey","deriveBits"];break;default:throw new A('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return o.subtle.generateKey(i,null!==(n=null===t||void 0===t?void 0:t.extractable)&&void 0!==n&&n,s)}(e,t)}async function Ot(e,t){return async function(e,t){var r;let n,i,s;switch(e){case"HS256":case"HS384":case"HS512":n=parseInt(e.slice(-3),10),i={name:"HMAC",hash:`SHA-${n}`,length:n},s=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return n=parseInt(e.slice(-3),10),D(new Uint8Array(n>>3));case"A128KW":case"A192KW":case"A256KW":n=parseInt(e.slice(1,4),10),i={name:"AES-KW",length:n},s=["wrapKey","unwrapKey"];break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":n=parseInt(e.slice(1,4),10),i={name:"AES-GCM",length:n},s=["encrypt","decrypt"];break;default:throw new A('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return o.subtle.generateKey(i,null!==(r=null===t||void 0===t?void 0:t.extractable)&&void 0!==r&&r,s)}(e,t)}}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[774,179],(function(){return t(6363),t(387)}));var r=e.O();_N_E=r}]);