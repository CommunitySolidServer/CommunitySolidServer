"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[464],{6464:function(e,t,n){n.d(t,{b:function(){return tt}});var r=n(5893),a=n(7294),o=n(9008),l=n(8504),i=n(1754),c=n(130),s=n(8520),d=n.n(s),u=n(5287),f=n(4192),h=n(4305),p=n(1664),x=n(2132),g=n(4578),m=n(2010),b=n(5434);function v(e){var t=(0,m.ql)().l10n;return function(e){var t=(0,a.useRef)(null);(0,a.useEffect)((function(){t.current=function(n){if("function"===typeof e){var r=e(n);return"string"===typeof r?(n.returnValue=r,r):n.defaultPrevented?n.returnValue="":void 0}t.current=null}}),[e]),(0,a.useEffect)((function(){if("function"===typeof t.current){var e=t.current;return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}}),[t.current])}(!1!==e?function(n){if(n.preventDefault(),"string"===typeof e)return t.getString(e)}:void 0)}var j=n(3191),y=n(5863),w=n(9918),N=n(1915),S=n(2689),G=n(1070),k=function(e){var t=(0,S.U)(),n=t?(0,y.MQ)(t.data,N.space.storage):[];e.sourceUrl&&n.push(new URL(e.sourceUrl).origin+"/");var a=n.find((function(t){return e.url.substring(0,t.length)===t})),o=a?e.url.substring(a.length-1):e.url;return a||e.openInline?(0,r.jsx)(p.default,{href:(0,G.rg)(e.url,encodeURIComponent(e.url)),children:(0,r.jsx)("a",{className:"focus:underline focus:text-coolGray-700 focus:outline-none break-words",children:o})}):(0,r.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"focus:underline focus:text-coolGray-700 focus:outline-none break-words",children:e.url})},A=n(6163);function C(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(s){return void n(s)}i.done?t(c):Promise.resolve(c).then(r,a)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function l(e){C(o,r,a,l,i,"next",e)}function i(e){C(o,r,a,l,i,"throw",e)}l(void 0)}))}}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(c){a=!0,o=c}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var U=function(e){var t=(0,a.useState)(),n=t[0],o=t[1],l=(0,a.useState)(""),i=l[0],c=l[1],s=(0,a.useState)(""),f=s[0],h=s[1],p=(0,a.useState)("en-US"),x=p[0],y=p[1],w=(0,a.useState)("0"),N=w[0],S=w[1],G=(0,a.useState)("0.0"),k=G[0],C=G[1],U=(0,a.useState)(""),F=U[0],P=U[1],I=(0,a.useState)(""),R=I[0],q=I[1],T=(0,m.ql)().l10n;v("undefined"!==typeof n);var H=null;if("url"===n){var _=O(d().mark((function t(n){var r,a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r=(0,A.qg)(e.thing,e.predicate,i),a=(0,u.lY)(e.dataset.data,r),c(""),t.next=6,e.dataset.save(a);case 6:e.onUpdate(e.thing);case 7:case"end":return t.stop()}}),t)})));H=(0,r.jsxs)("form",{onSubmit:_,className:"p-2 flex space-x-2 pb-5 items-center",children:[(0,r.jsx)("label",{className:"text-coolGray-500 p-2 w-10",htmlFor:"newUrl",children:(0,r.jsx)(g.lVZ,{"aria-label":T.getString("object-add-url-label")})}),(0,r.jsx)(j.A,{id:"object-add-url-input",attrs:{placeholder:!0,title:!0},children:(0,r.jsx)("input",{type:"url",className:"flex-grow p-2 rounded focus:outline-none focus:ring-2 focus:ring-coolGray-700",placeholder:"https://\u2026",name:"newUrl",id:"newUrl",required:!0,value:i,onChange:function(e){e.preventDefault(),c(e.target.value)},autoFocus:!0})}),(0,r.jsx)("button",{type:"submit","aria-label":T.getString("object-add-url-submit"),className:"p-3 hover:text-white hover:bg-coolGray-700 focus:outline-none focus:ring-2 focus:ring-coolGray-700 rounded",children:(0,r.jsx)(b.HhX,{})})]})}if("stringNoLocale"===n){var W=O(d().mark((function t(n){var r,a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r=(0,A.go)(e.thing,e.predicate,f),a=(0,u.lY)(e.dataset.data,r),h(""),t.next=6,e.dataset.save(a);case 6:e.onUpdate(e.thing);case 7:case"end":return t.stop()}}),t)})));H=(0,r.jsxs)("form",{onSubmit:W,className:"p-2 flex space-x-2 pb-5 items-center",children:[(0,r.jsx)("label",{className:"text-coolGray-500 p-2 w-10",htmlFor:"newStringNoLocale",children:(0,r.jsx)(b.BAW,{"aria-label":T.getString("object-add-string-label")})}),(0,r.jsx)(j.A,{id:"object-add-string-input",attrs:{placeholder:!0,title:!0},children:(0,r.jsx)("input",{type:"text",className:"flex-grow p-2 rounded focus:outline-none focus:ring-2 focus:ring-coolGray-700",name:"newStringNoLocale",id:"newStringNoLocale",required:!0,value:f,onChange:function(e){e.preventDefault(),h(e.target.value)},autoFocus:!0})}),(0,r.jsxs)("button",{onClick:function(){return o("stringWithLocale")},className:"flex space-x-2 items-center p-2 border-coolGray-200 text-coolGray-500 hover:text-coolGray-900 focus:text-coolGray-900 hover:border-coolGray-900 focus:border-coolGray-900 focus:outline-none hover:bg-coolGray-100 border-dashed hover:border-solid focus:border-solid border-2 rounded",type:"button",children:[(0,r.jsx)(b.mp2,{"aria-hidden":"true"}),(0,r.jsx)(j.A,{id:"object-set-locale-label",children:(0,r.jsx)("span",{children:"Set locale"})})]}),(0,r.jsx)("button",{type:"submit","aria-label":T.getString("object-add-string-submit"),className:"p-3 hover:text-white hover:bg-coolGray-700 focus:outline-none focus:ring-2 focus:ring-coolGray-700 rounded",children:(0,r.jsx)(b.HhX,{})})]})}if("stringWithLocale"===n){var M=O(d().mark((function t(n){var r,a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r=(0,A.Ob)(e.thing,e.predicate,f,x),a=(0,u.lY)(e.dataset.data,r),h(""),t.next=6,e.dataset.save(a);case 6:e.onUpdate(e.thing);case 7:case"end":return t.stop()}}),t)})));H=(0,r.jsxs)("form",{onSubmit:M,className:"p-2 flex space-x-2 pb-5 items-center",children:[(0,r.jsx)("label",{className:"text-coolGray-500 p-2 w-10",htmlFor:"newStringWithLocale",children:(0,r.jsx)(b.BAW,{"aria-label":T.getString("object-add-string-label")})}),(0,r.jsx)(j.A,{id:"object-add-string-input",attrs:{placeholder:!0,title:!0},children:(0,r.jsx)("input",{type:"text",className:"flex-grow p-2 rounded focus:outline-none focus:ring-2 focus:ring-coolGray-700",name:"newStringWithLocale",id:"newStringWithLocale",required:!0,value:f,onChange:function(e){e.preventDefault(),h(e.target.value)}})}),(0,r.jsx)("label",{className:"text-coolGray-500 p-2 w-10",htmlFor:"newLocale",children:(0,r.jsx)(b.mp2,{"aria-label":T.getString("object-add-locale-label")})}),(0,r.jsx)(j.A,{id:"object-add-locale-input",attrs:{placeholder:!0,title:!0},children:(0,r.jsx)("input",{type:"text",className:"p-2 rounded focus:outline-none focus:ring-2 focus:ring-coolGray-700",name:"newLocale",id:"newLocale",required:!0,value:x,onChange:function(e){e.preventDefault(),y(e.target.value)},autoFocus:!0})}),(0,r.jsx)("button",{type:"submit","aria-label":T.getString("object-add-string-submit"),className:"p-3 hover:text-white hover:bg-coolGray-700 focus:outline-none focus:ring-2 focus:ring-coolGray-700 rounded",children:(0,r.jsx)(b.HhX,{})})]})}if("integer"===n){var Q=O(d().mark((function t(n){var r,a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r=(0,A.Cu)(e.thing,e.predicate,Number.parseInt(N,10)),a=(0,u.lY)(e.dataset.data,r),S("0"),t.next=6,e.dataset.save(a);case 6:e.onUpdate(e.thing);case 7:case"end":return t.stop()}}),t)})));H=(0,r.jsxs)("form",{onSubmit:Q,className:"p-2 flex space-x-2 pb-5 items-center",children:[(0,r.jsx)("label",{className:"text-coolGray-500 p-2 w-10",htmlFor:"newInteger",children:(0,r.jsx)("span",{"aria-label":T.getString("object-add-integer-label"),children:"1"})}),(0,r.jsx)(j.A,{id:"object-add-integer-input",attrs:{placeholder:!0,title:!0},children:(0,r.jsx)("input",{type:"number",className:"flex-grow p-2 rounded focus:outline-none focus:ring-2 focus:ring-coolGray-700",name:"newInteger",id:"newInteger",required:!0,value:N,onChange:function(e){e.preventDefault(),S(e.target.value)},autoFocus:!0})}),(0,r.jsx)("button",{type:"submit","aria-label":T.getString("object-add-integer-submit"),className:"p-3 hover:text-white hover:bg-coolGray-700 focus:outline-none focus:ring-2 focus:ring-coolGray-700 rounded",children:(0,r.jsx)(b.HhX,{})})]})}if("decimal"===n){var E=O(d().mark((function t(n){var r,a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r=(0,A.x$)(e.thing,e.predicate,Number.parseFloat(k)),a=(0,u.lY)(e.dataset.data,r),C("0.0"),t.next=6,e.dataset.save(a);case 6:e.onUpdate(e.thing);case 7:case"end":return t.stop()}}),t)})));H=(0,r.jsxs)("form",{onSubmit:E,className:"p-2 flex space-x-2 pb-5 items-center",children:[(0,r.jsx)("label",{className:"text-coolGray-500 p-2 w-10",htmlFor:"newDecimal",children:(0,r.jsx)("span",{"aria-label":T.getString("object-add-decimal-label"),children:"1.0"})}),(0,r.jsx)(j.A,{id:"object-add-decimal-input",attrs:{placeholder:!0,title:!0},children:(0,r.jsx)("input",{type:"number",step:.1,className:"flex-grow p-2 rounded focus:outline-none focus:ring-2 focus:ring-coolGray-700",name:"newDecimal",id:"newDecimal",required:!0,value:k,onChange:function(e){e.preventDefault(),C(e.target.value)},autoFocus:!0})}),(0,r.jsx)("button",{type:"submit","aria-label":T.getString("object-add-decimal-submit"),className:"p-3 hover:text-white hover:bg-coolGray-700 focus:outline-none focus:ring-2 focus:ring-coolGray-700 rounded",children:(0,r.jsx)(b.HhX,{})})]})}if("datetime"===n){var Y=O(d().mark((function t(n){var r,a,o,l,i,c,s,f,h,p;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r=D(F.split("-").map((function(e){return Number.parseInt(e,10)})),3),a=r[0],o=r[1],l=r[2],i=D(R.split(":").map((function(e){return Number.parseInt(e,10)})),2),c=i[0],s=i[1],f=new Date(a,o-1,l,c,s),h=(0,A.rm)(e.thing,e.predicate,f),p=(0,u.lY)(e.dataset.data,h),P(""),q(""),t.next=10,e.dataset.save(p);case 10:e.onUpdate(e.thing);case 11:case"end":return t.stop()}}),t)})));H=(0,r.jsxs)("form",{onSubmit:Y,className:"p-2 flex space-x-2 pb-5 items-center",children:[(0,r.jsx)("label",{className:"text-coolGray-500 p-2 w-10",htmlFor:"newDate",children:(0,r.jsx)(g.cdy,{"aria-label":T.getString("object-add-date-label")})}),(0,r.jsx)(j.A,{id:"object-add-date-input",attrs:{placeholder:!0,title:!0},children:(0,r.jsx)("input",{type:"date",className:"flex-grow p-2 rounded focus:outline-none focus:ring-2 focus:ring-coolGray-700",name:"newDate",id:"newDate",required:!0,value:F,onChange:function(e){e.preventDefault(),P(e.target.value)},autoFocus:!0})}),(0,r.jsx)("label",{className:"sr-only",htmlFor:"newTime",children:(0,r.jsx)(g.cdy,{"aria-label":T.getString("object-add-time-label")})}),(0,r.jsx)(j.A,{id:"object-add-time-input",attrs:{placeholder:!0,title:!0},children:(0,r.jsx)("input",{type:"time",className:"flex-grow p-2 rounded focus:outline-none focus:ring-2 focus:ring-coolGray-700",name:"newTime",id:"newTime",required:!0,value:R,onChange:function(e){e.preventDefault(),q(e.target.value)}})}),(0,r.jsx)("button",{type:"submit","aria-label":T.getString("object-add-datetime-submit"),className:"p-3 hover:text-white hover:bg-coolGray-700 focus:outline-none focus:ring-2 focus:ring-coolGray-700 rounded",children:(0,r.jsx)(b.HhX,{})})]})}return(0,r.jsxs)(r.Fragment,{children:[H,(0,r.jsxs)("div",{className:"flex flex-wrap p-2 space-y-2 space-x-2 items-center pb-5",children:[(0,r.jsx)("span",{className:"text-coolGray-500 p-2 w-10",children:(0,r.jsx)(b.x06,{"aria-label":T.getString("object-add-label")})}),(0,r.jsx)(j.A,{id:"object-add-url",children:(0,r.jsx)(L,{icon:(0,r.jsx)(b.$l_,{}),onClick:function(){return o("url")},children:"URL"})}),(0,r.jsx)(j.A,{id:"object-add-string-label",children:(0,r.jsx)(L,{icon:(0,r.jsx)(b.BAW,{}),onClick:function(){return o("stringNoLocale")},children:"String"})}),(0,r.jsx)(j.A,{id:"object-add-integer",children:(0,r.jsx)(L,{icon:(0,r.jsx)("span",{"aria-hidden":"true",children:"1"}),onClick:function(){return o("integer")},children:"Integer"})}),(0,r.jsx)(j.A,{id:"object-add-decimal",children:(0,r.jsx)(L,{icon:(0,r.jsx)("span",{"aria-hidden":"true",children:"1.0"}),onClick:function(){return o("decimal")},children:"Decimal"})}),(0,r.jsx)(j.A,{id:"object-add-datetime",children:(0,r.jsx)(L,{icon:(0,r.jsx)(g.cdy,{}),onClick:function(){return o("datetime")},children:"Datetime"})})]})]})},L=function(e){return(0,r.jsxs)("button",{className:"flex items-center p-1 border-coolGray-200 text-coolGray-500 hover:text-coolGray-900 focus:text-coolGray-900 hover:border-coolGray-900 focus:border-coolGray-900 focus:outline-none hover:bg-coolGray-100 border-dashed hover:border-solid focus:border-solid border-2 rounded",onClick:function(t){t.preventDefault(),e.onClick()},children:[(0,r.jsx)("span",{className:"px-1",children:e.icon}),(0,r.jsx)("span",{className:"px-1",children:e.children})]})},F=function(e){var t=e.type?(0,r.jsx)("div",{className:"flex-shrink flex flex-col justify-center",children:(0,r.jsx)("div",{className:"p-2 mr-1 text-coolGray-500 w-10",children:e.type})}):null,n=e.options?(0,r.jsx)("ul",{className:"flex-shrink flex",children:e.options.filter((function(e){return"undefined"===typeof e.when||e.when})).map((function(e,t){return(0,r.jsx)("li",{children:(0,r.jsx)("button",{onClick:function(t){t.preventDefault(),e.callback()},className:"ml-1 border-2 border-coolGray-50 hover:bg-coolGray-700 hover:text-white p-3 rounded-lg block focus:border-coolGray-700 focus:outline-none",children:e.element})},"objectOption".concat(t))}))}):null;return(0,r.jsxs)("div",{className:"flex p-2",children:[t,(0,r.jsx)("div",{className:"flex-grow bg-white p-2 rounded-lg",children:e.children}),n]})};function P(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(s){return void n(s)}i.done?t(c):Promise.resolve(c).then(r,a)}var I=function(e){var t,n=Math.max(e.url.lastIndexOf("/"),e.url.lastIndexOf("#")),a=e.url.substring(0,n+1),o=e.url.substring(n+1),l=(0,m.ql)().l10n,i=(t=d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,navigator.clipboard.writeText(a+o);case 3:(0,x.Am)(l.getString("predicate-urlcopy-toast-success"),{type:"info"});case 4:case"end":return e.stop()}}),e)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function l(e){P(o,r,a,l,i,"next",e)}function i(e){P(o,r,a,l,i,"throw",e)}l(void 0)}))}),c=(0,r.jsx)("a",{href:a+o,title:l.getString("predicate-urlcopy-button-tooltip"),"aria-hidden":"true",onClick:i,className:"text-coolGray-400 p-2 rounded hover:text-coolGray-700 focus:text-coolGray-700 focus:ring-2 focus:ring-coolGray-700 focus:outline-none",children:(0,r.jsx)(b.Fqs,{className:"inline-block"})});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("abbr",{title:a+o,children:o}),c]})},R=n(5138),q=n(548);function T(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(s){return void n(s)}i.done?t(c):Promise.resolve(c).then(r,a)}function H(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function l(e){T(o,r,a,l,i,"next",e)}function i(e){T(o,r,a,l,i,"throw",e)}l(void 0)}))}}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_(e,t,n[t])}))}return e}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(c){a=!0,o=c}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Q=function(e){var t=(0,m.ql)().l10n,n=(0,y.MQ)(e.thing,e.predicate),a=(0,y.sG)(e.thing,e.predicate),o=(0,y.AF)(e.thing,e.predicate),i=(0,y.Lg)(e.thing,e.predicate),c=(0,y.mp)(e.thing,e.predicate),s=(0,y.A1)(e.thing,e.predicate),f=(0,y.Py)(e.thing,e.predicate),h=(0,y.i9)(e.thing,e.predicate),p=Array.from(h.entries()).map((function(e){var t=M(e,2),n=t[0];return t[1].map((function(e){return[n,e]}))})).flat(),v=f.find((function(e){return"Literal"!==e.termType&&"NamedNode"!==e.termType}))?(0,r.jsx)("li",{className:"pl-0",children:(0,r.jsx)(F,{type:(0,r.jsx)(g.gL9,{}),children:"Data of unknown type."})}):null,N=f.filter((function(e){return"Literal"===e.termType&&!["http://www.w3.org/2001/XMLSchema#boolean","http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"].includes(e.datatype.value)})).map((function(n){return(0,r.jsx)("li",{className:"pl-0",children:(0,r.jsx)(F,{type:(0,r.jsx)(g.oIp,{}),options:[{element:(0,r.jsx)(j.A,{id:"object-delete-button-unknown",vars:{value:n.value,type:n.datatype.value},children:(0,r.jsx)(g.R6G,{title:'Delete value "'.concat(n.value,'" of unknown type "').concat(n.datatype.value,'"'),"aria-label":'Delete value "'.concat(n.value,'" of unknown type "').concat(n.datatype.value,'"')})}),callback:function(){return A(n)},when:(0,q.F)(e.dataset.data,["write"])}],children:(0,r.jsx)("samp",{title:t.getString("object-unknown-tooltip",{type:n.datatype.value}),children:n.value})})},n.value)})),S=H(d().mark((function n(r){var a;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=(0,u.lY)(e.dataset.data,r),n.prev=1,n.next=4,e.dataset.save(a);case 4:e.onUpdate(e.thing),n.next=14;break;case 7:if(n.prev=7,n.t0=n.catch(1),o=n.t0,!(null!=(i=l.kp)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](o):o instanceof i)||403!==n.t0.statusCode){n.next=13;break}(0,x.Am)(t.getString("thing-toast-error-not-allowed"),{type:"error"}),n.next=14;break;case 13:throw n.t0;case 14:case"end":return n.stop()}var o,i}),n,null,[[1,7]])}))),G=H(d().mark((function e(n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(n);case 2:(0,x.Am)(t.getString("object-copy-toast-success-url"),{type:"info"});case 3:case"end":return e.stop()}}),e)}))),A=function(t){return S((0,w.nH)(e.thing,e.predicate,t))};return(0,r.jsxs)("dl",{children:[(0,r.jsx)("dt",{children:(0,r.jsx)(I,{url:e.predicate})}),(0,r.jsx)("dd",{children:(0,r.jsxs)("ul",{children:[n.sort().map((function(t){return(0,r.jsx)("li",{className:"pl-0",children:(0,r.jsx)(F,{type:(0,r.jsx)(b.$l_,{}),options:[{element:(0,r.jsx)(j.A,{id:"object-copy-button-url",attrs:{title:!0,"aria-label":!0},vars:{value:t},children:(0,r.jsx)(b.Fqs,{title:'Copy "'.concat(t,'"'),"aria-label":'Copy "'.concat(t,'"')})}),callback:function(){return G(t)}},{element:(0,r.jsx)(j.A,{id:"object-delete-button-url",attrs:{title:!0,"aria-label":!0},vars:{value:t},children:(0,r.jsx)(g.R6G,{title:'Delete "'.concat(t,'"'),"aria-label":'Delete "'.concat(t,'"')})}),callback:function(){return n=t,S((0,w.Rw)(e.thing,e.predicate,n));var n},when:(0,q.F)(e.dataset.data,["write"])}],children:(0,r.jsx)(k,{url:t,sourceUrl:(0,l.LH)(e.dataset.data)})})},t+"_urlObject")})),a.sort().map((function(t){return(0,r.jsx)("li",{className:"pl-0",children:(0,r.jsx)(F,{type:(0,r.jsx)(b.BAW,{}),options:[{element:(0,r.jsx)(j.A,{id:"object-delete-button-string",attrs:{title:!0,"aria-label":!0},vars:{value:t},children:(0,r.jsx)(g.R6G,{title:'Delete "'.concat(t,'"'),"aria-label":'Delete "'.concat(t,'"')})}),callback:function(){return n=t,S((0,w.e3)(e.thing,e.predicate,n));var n},when:(0,q.F)(e.dataset.data,["write"])}],children:t})},t+"_stringNoLocaleObject")})),p.sort().map((function(t){var n=M(t,2),a=n[0],o=n[1];return(0,r.jsx)("li",{className:"pl-0",children:(0,r.jsxs)(F,{type:(0,r.jsx)(b.BAW,{}),options:[{element:(0,r.jsx)(j.A,{id:"object-delete-button-string-locale",attrs:{title:!0,"aria-label":!0},vars:{value:o,locale:a},children:(0,r.jsx)(g.R6G,{title:'Delete "'.concat(o," (").concat(a,')"'),"aria-label":'Delete "'.concat(o," (").concat(a,')"')})}),callback:function(){return function(t,n){return S((0,w.gB)(e.thing,e.predicate,t,n))}(o,a)},when:(0,q.F)(e.dataset.data,["write"])}],children:[o," ",(0,r.jsxs)("span",{className:"text-coolGray-500",children:["(",a,")"]})]})},o+"_stringNoLocaleObject")})),o.sort().map((function(t){return(0,r.jsx)("li",{className:"pl-0",children:(0,r.jsx)(F,{type:(0,r.jsx)(r.Fragment,{children:"1"}),options:[{element:(0,r.jsx)(j.A,{id:"object-delete-button-integer",attrs:{title:!0,"aria-label":!0},vars:{value:t},children:(0,r.jsx)(g.R6G,{title:'Delete "'.concat(t,'"'),"aria-label":'Delete "'.concat(t,'"')})}),callback:function(){return n=t,S((0,w.Tj)(e.thing,e.predicate,n));var n},when:(0,q.F)(e.dataset.data,["write"])}],children:t})},t+"_integerObject")})),i.sort().map((function(t){return(0,r.jsx)("li",{className:"pl-0",children:(0,r.jsx)(F,{type:(0,r.jsx)(r.Fragment,{children:"1.0"}),options:[{element:(0,r.jsx)(j.A,{id:"object-delete-button-decimal",attrs:{title:!0,"aria-label":!0},vars:{value:t},children:(0,r.jsx)(g.R6G,{title:'Delete "'.concat(t,'"'),"aria-label":'Delete "'.concat(t,'"')})}),callback:function(){return n=t,S((0,w.HM)(e.thing,e.predicate,n));var n},when:(0,q.F)(e.dataset.data,["write"])}],children:Number.isInteger(t)?t.toFixed(1):t.toString()})},t+"_decimalObject")})),c.sort((function(e,t){return e.getTime()-t.getTime()})).map((function(t){return(0,r.jsx)("li",{className:"pl-0",children:(0,r.jsx)(F,{type:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(g.cdy,{})}),options:[{element:(0,r.jsx)(j.A,{id:"object-delete-button-datetime",attrs:{title:!0,"aria-label":!0},vars:{value:t.toLocaleString()},children:(0,r.jsx)(g.R6G,{title:'Delete "'.concat(t.toLocaleString(),'"'),"aria-label":'Delete "'.concat(t.toLocaleString(),'"')})}),callback:function(){return n=t,S((0,w.qz)(e.thing,e.predicate,n));var n},when:(0,q.F)(e.dataset.data,["write"])}],children:(0,r.jsx)("time",{title:t.toISOString(),dateTime:t.toISOString(),children:t.toLocaleString()})})},t.toISOString()+"_datetimeObject")})),s.map((function(t){return(0,r.jsx)("li",{className:"pl-0",children:(0,r.jsx)(F,{type:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(g.bS7,{})}),options:[{element:(0,r.jsx)(j.A,{id:"object-delete-button-boolean",attrs:{title:!0,"aria-label":!0},vars:{value:t.toString()},children:(0,r.jsx)(g.R6G,{title:'Delete "'.concat(t,'"'),"aria-label":'Delete "'.concat(t,'"')})}),callback:function(){return n=t,S((0,w.ID)(e.thing,e.predicate,n));var n},when:(0,q.F)(e.dataset.data,["write"])}],children:t})},t.toString()+"_booleanObject")})),N,v,(0,r.jsx)(R.o,{access:["append"],resource:e.dataset.data,children:(0,r.jsx)(U,W({},e))})]})})]})},E=(0,a.lazy)((function(){return n.e(440).then(n.bind(n,8440)).then((function(e){return{default:e.NamespaceDatalist}}))})),Y=function(e){var t=(0,a.useState)(""),n=t[0],o=t[1],l=(0,m.ql)().l10n;return(0,r.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.onSubmit(n),o("")},className:"flex space-x-2 items-center",children:[(0,r.jsx)(a.Suspense,{fallback:null,children:(0,r.jsx)(E,{id:"knownPredicates"})}),(0,r.jsx)("label",{className:"text-coolGray-500 p-2 w-10",htmlFor:"newPredicate",children:(0,r.jsx)(g.lVZ,{"aria-label":l.getString("predicate-add-url-label")})}),(0,r.jsx)(j.A,{id:"predicate-add-url-input",attrs:{placeholder:!0,title:!0},children:(0,r.jsx)("input",{type:"url",className:"flex-grow p-2 rounded focus:outline-none focus:ring-2 focus:ring-coolGray-700",placeholder:"https://\u2026",name:"newPredicate",id:"newPredicate",required:!0,list:"knownPredicates",value:n,onChange:function(e){e.preventDefault(),o(e.target.value)},autoFocus:!0})}),(0,r.jsx)("button",{type:"submit","aria-label":l.getString("predicate-add-url-submit"),className:"p-3 focus:outline-none focus:ring-2 focus:ring-coolGray-700 rounded",children:(0,r.jsx)(b.HhX,{})})]})},X=function(e){var t=(0,a.useState)(""),n=t[0],o=t[1],l=(0,a.useState)("initial"),i=l[0],c=l[1];if(v("initial"!==i||""!==n),"setObject"===i){return(0,r.jsxs)("div",{className:"p-5",children:[(0,r.jsx)(I,{url:n}),(0,r.jsx)(U,{dataset:e.dataset,thing:e.thing,predicate:n,onUpdate:function(t){c("initial"),e.onUpdate(t)}})]})}return"setPredicate"===i?(0,r.jsx)("div",{className:"p-5",children:(0,r.jsx)(Y,{onSubmit:function(e){o(e),c("setObject")}})}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"p-5",children:(0,r.jsxs)("button",{className:"border-2 border-coolGray-200 border-dashed text-coolGray-500 hover:text-coolGray-900 focus:text-coolGray-900 hover:border-coolGray-900 focus:border-coolGray-900 focus:outline-none hover:border-solid focus:border-solid hover:bg-coolGray-100 rounded p-2 flex items-center space-x-2 w-full",onClick:function(e){e.preventDefault(),c("setPredicate")},children:[(0,r.jsx)(b.x06,{"aria-hidden":!0})," ",(0,r.jsx)(j.A,{id:"predicate-add-button",children:(0,r.jsx)("span",{children:"New property"})})]})})})},z=n(2061),B=n(4441),V=n(2958),Z=n(5033),$=n(4140),J=n(5006),K=n(9641),ee=n(5283);function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){te(e,t,n[t])}))}return e}var re=function(e){var t=(0,J.l)({isSelected:e.toggled}),n=(0,a.useRef)(null),o=(0,ee.h)(e,t,n).inputProps,l=(0,K.Fx)(),i=l.isFocusVisible,c=l.focusProps;t.setSelected(e.toggled);return(0,r.jsxs)("label",{className:"cursor-pointer flex items-center group",children:[(0,r.jsx)($.T,{children:(0,r.jsx)("input",ne({},o,c,{ref:n,onChange:function(t){t.preventDefault(),e.onChange(t.target.checked)}}))}),(0,r.jsx)("div",{className:"".concat(t.isSelected?"bg-coolGray-700 ring-lightBlue-50 group-hover:bg-coolGray-500":"bg-gray-200 ring-coolGray-700 group-hover:bg-coolGray-300"," ").concat(i?"ring-4":"ring-0"," cursor-pointer relative inline-flex items-center h-6 rounded-xl w-11"),children:(0,r.jsx)("span",{className:"".concat(t.isSelected?"translate-x-6 rtl:-translate-x-6":"translate-x-1 rtl:-translate-x-1"," inline-block w-4 h-4 transform motion-safe:transition-transform duration-100 bg-white rounded-xl")})}),(0,r.jsx)("span",{className:"pl-2",children:e.children})]})};function ae(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(s){return void n(s)}i.done?t(c):Promise.resolve(c).then(r,a)}function oe(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function l(e){ae(o,r,a,l,i,"next",e)}function i(e){ae(o,r,a,l,i,"throw",e)}l(void 0)}))}}var le=function(e){var t,n=(0,y.MQ)(e.thing,N.rdf.type),a=null!==(t=(0,y.Gr)(e.thing,N.acl.accessTo))&&void 0!==t?t:(0,y.Gr)(e.thing,N.acl.default__workaround),o=(0,m.ql)().l10n,i=function(t){return"self"===t?null!==(0,y.Gr)(e.thing,N.acl.accessTo):"children"===t&&null!==(0,y.Gr)(e.thing,N.acl.default__workaround)},c=function(t){var n=(0,y.MQ)(e.thing,N.acl.mode);return"read"===t?n.includes(N.acl.Read):"append"===t?n.includes(N.acl.Append)||n.includes(N.acl.Write):"write"===t?n.includes(N.acl.Write):"control"===t&&n.includes(N.acl.Control)},s=[];["read","append","write","control"].forEach((function(e){c(e)&&s.push(e)}));function f(e){return h.apply(this,arguments)}function h(){return(h=oe(d().mark((function t(n){var r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(ce(r=(0,u.lY)(e.dataset.data,n))){t.next=4;break}return(0,x.Am)(o.getString("wac-control-toast-error-no-controller"),{type:"error"}),t.abrupt("return");case 4:return t.next=6,e.dataset.save(r);case 6:e.onUpdate(e.thing);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}if(!n.includes(N.acl.Authorization)||null===a){var b,v=(0,u.oY)(e.dataset.data).map((function(e){return null!==(b=(0,y.Gr)(e,N.acl.accessTo))&&void 0!==b?b:(0,y.Gr)(e,N.acl.default__workaround)})).find((function(e){return null!==e}));if(ce(e.dataset.data)&&0===(0,y.k4)(e.thing).length&&"string"===typeof v){return(0,r.jsx)(j.A,{id:"wac-control-initialise",children:(0,r.jsx)("button",{onClick:function(t){t.preventDefault(),function(){var t=(0,A.qg)(e.thing,N.rdf.type,N.acl.Authorization);f(t=(0,A.qg)(t,N.acl.accessTo,v))}()},className:"p-5 bg-blue-200 border-b-4 border-blue-200 w-full text-left hover:bg-blue-300 hover:border-blue-300 focus:underline focus:border-blue-400 focus:outline-none rounded-b-sm",children:"Convert to Access Control."})})}return null}var S,C=function(t,n){var r,a=null!==(r=(0,y.Gr)(e.thing,N.acl.accessTo))&&void 0!==r?r:(0,y.Gr)(e.thing,N.acl.default__workaround),l="self"===t?N.acl.accessTo:N.acl.default__workaround;"string"===typeof a?f(n?(0,Z.x)(e.thing,l,a):(0,w.xY)(e.thing,l)):(0,x.Am)(o.getString("wac-control-toast-error-no-resource"),{type:"error"})},O=function(t,n){var r=N.acl.Read;"append"===t&&(r=N.acl.Append),"write"===t&&(r=N.acl.Write),"control"===t&&(r=N.acl.Control);var a=n?(0,A.qg)(e.thing,N.acl.mode,r):(0,w.Rw)(e.thing,N.acl.mode,r);"append"===t&&!1===n&&(a=(0,w.Rw)(a,N.acl.mode,N.acl.Write)),"write"!==t||!1!==n||(0,y.MQ)(a,N.acl.mode).includes(N.acl.Append)||(a=(0,A.qg)(a,N.acl.mode,N.acl.Append)),f(a)};return(0,r.jsxs)("section",{className:"p-5 bg-blue-200 rounded-b-sm",children:[(0,r.jsxs)("header",{className:"text-xl flex w-100 font-bold",children:[(0,r.jsx)(j.A,{id:"wac-control-title",children:(0,r.jsx)("div",{className:"",children:"Access Control for:"})}),"\xa0",(0,r.jsx)(p.default,{href:(0,G.rg)(a),children:(0,r.jsx)("a",{className:"focus:underline hover:text-coolGray-700",children:a})})]}),(0,r.jsxs)("div",{className:"flex flex-row py-5",children:[(0,r.jsx)(j.A,{id:"wac-control-target-label",children:(0,r.jsx)("div",{className:"w-36 pr-5 py-2",children:"Applies to:"})}),(0,r.jsxs)("div",{className:"flex flex-col items-start justify-center",children:[(0,r.jsx)("div",{className:"flex space-x-1 py-2",children:(0,r.jsx)(re,{onChange:function(e){return C("self",e)},toggled:i("self"),children:(0,r.jsx)(j.A,{id:"wac-control-target-option-self",children:(0,r.jsx)("span",{children:"The Resource"})})})}),(0,r.jsx)("div",{className:"flex space-x-1 py-2",children:(0,r.jsx)(re,{onChange:function(e){return C("children",e)},toggled:i("children"),children:(0,r.jsx)(j.A,{id:"wac-control-target-option-children",children:(0,r.jsx)("span",{children:"Contained Resources"})})})})]})]}),(0,r.jsxs)("div",{className:"flex flex-row py-5",children:[(0,r.jsx)(j.A,{id:"wac-control-mode-label",children:(0,r.jsx)("div",{className:"w-36 pr-5 py-2",children:"Grants:"})}),(0,r.jsxs)("div",{className:"flex flex-col items-start justify-center lg:flex-wrap",children:[(0,r.jsx)("div",{className:"flex space-x-1 py-2",children:(0,r.jsx)(re,{onChange:function(e){return O("read",e)},toggled:c("read"),children:(0,r.jsx)(j.A,{id:"wac-control-mode-option-read",children:(0,r.jsx)("span",{children:"Read"})})})}),(0,r.jsx)("div",{className:"flex space-x-1 py-2",children:(0,r.jsx)(re,{onChange:function(e){return O("append",e)},toggled:c("append"),children:(0,r.jsx)(j.A,{id:"wac-control-mode-option-append",children:(0,r.jsx)("span",{children:"Append"})})})}),(0,r.jsx)("div",{className:"flex space-x-1 py-2",children:(0,r.jsx)(re,{onChange:function(e){return O("write",e)},toggled:c("write"),children:(0,r.jsx)(j.A,{id:"wac-control-mode-option-write",children:(0,r.jsx)("span",{children:"Write"})})})}),(0,r.jsx)("div",{className:"flex space-x-1 py-2",children:(0,r.jsx)(re,{onChange:function(e){return O("control",e)},toggled:c("control"),children:(0,r.jsx)(j.A,{id:"wac-control-mode-option-control",children:(0,r.jsx)("span",{children:"Control"})})})})]})]}),(0,r.jsxs)("div",{className:"flex flex-row py-5",children:[(0,r.jsx)(j.A,{id:"wac-control-agentClass-label",children:(0,r.jsx)("div",{className:"w-36 pr-5 py-2",children:"To:"})}),(0,r.jsx)("div",{className:"flex flex-col items-start justify-center",children:(0,r.jsx)("div",{className:"flex space-x-1 py-2",children:(0,r.jsx)(re,{onChange:function(t){return function(t,n){var r=N.foaf.Agent;f(n?(0,A.qg)(e.thing,N.acl.agentClass,r):(0,w.Rw)(e.thing,N.acl.agentClass,r))}(0,t)},toggled:(S="Agent","Agent"===S&&(0,y.MQ)(e.thing,N.acl.agentClass).includes(N.foaf.Agent)),children:(0,r.jsx)(j.A,{id:"wac-control-agentClass-option-agent",children:(0,r.jsx)("span",{children:"Everyone"})})})})})]}),(0,r.jsxs)("div",{className:"flex flex-row py-5",children:[(0,r.jsx)(j.A,{id:"wac-control-agent-label",children:(0,r.jsx)("div",{className:"w-36 pr-5 py-2",children:"And Agents:"})}),(0,r.jsxs)("div",{className:"flex-grow space-y-2 items-start justify-center",children:[(0,y.MQ)(e.thing,N.acl.agent).map((function(t){return(0,r.jsxs)("div",{className:"flex items-center space-x-2 pl-2",children:[(0,r.jsx)("code",{className:"font-mono p-2 truncate w-0 flex-grow",title:t,children:(0,r.jsx)(k,{url:t,sourceUrl:(0,l.LH)(e.dataset.data),openInline:!0})}),(0,r.jsx)("button",{className:"p-3 hover:text-white hover:bg-coolGray-700 focus:outline-none focus:ring-2 focus:ring-coolGray-700 rounded",onClick:function(n){n.preventDefault(),function(t){f((0,w.Rw)(e.thing,N.acl.agent,t))}(t)},children:(0,r.jsx)(j.A,{id:"wac-control-agent-remove-icon",attrs:{"aria-label":!0},vars:{agent:t},children:(0,r.jsx)(g.R6G,{"aria-label":"Remove `".concat(t,"`")})})})]},t)})),(0,r.jsx)(ie,{onSubmit:function(t){f((0,A.qg)(e.thing,N.acl.agent,t))}})]})]})]})},ie=function(e){var t=(0,a.useState)(""),n=t[0],o=t[1];return(0,r.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.onSubmit(n),o("")},className:"flex items-center space-x-2",children:[(0,r.jsx)("label",{htmlFor:"webId",className:"sr-only",children:"WebID:"}),(0,r.jsx)("input",{type:"url",name:"webId",id:"webId",className:"bg-white rounded flex-grow p-2 focus:outline-none focus:ring-2 focus:ring-coolGray-700",placeholder:"e.g. https://example.com/profile/card#me",value:n,onChange:function(e){return o(e.target.value)}}),(0,r.jsx)(j.A,{id:"wac-control-agent-add-button",attrs:{title:!0},children:(0,r.jsx)("button",{type:"submit",className:"p-3 hover:text-white hover:bg-coolGray-700 focus:outline-none focus:ring-2 focus:ring-coolGray-700 rounded",title:"Add Agent",children:(0,r.jsx)(j.A,{id:"wac-control-agent-add-icon",attrs:{"aria-label":!0},children:(0,r.jsx)(b.HhX,{"aria-label":"Add"})})})})]})};function ce(e){return(0,u.oY)(e).some((function(e){var t=(0,y.MQ)(e,N.rdf.type).includes(N.acl.Authorization),n=(0,y.MQ)(e,N.acl.mode).includes(N.acl.Control),r=null!==(0,y.Gr)(e,N.acl.accessTo),a=null!==(0,y.Gr)(e,N.acl.agent)||null!==(0,y.Gr)(e,N.acl.agentGroup)||(0,y.MQ)(e,N.acl.agentClass).includes(N.foaf.Agent)||(0,y.MQ)(e,N.acl.agentClass).includes(N.acl.AuthenticatedAgent);return t&&n&&r&&a}))}function se(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(s){return void n(s)}i.done?t(c):Promise.resolve(c).then(r,a)}function de(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function l(e){se(o,r,a,l,i,"next",e)}function i(e){se(o,r,a,l,i,"throw",e)}l(void 0)}))}}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ue(e,t,n[t])}))}return e}var he=function(e){var t=(0,y.k4)(e.thing).sort().map((function(t){return(0,r.jsx)(Q,fe({},e,{predicate:t,onUpdate:e.onUpdate}),t+"_predicate")})),n=(0,z.J)(),a=(0,m.ql)().l10n,o=de(d().mark((function t(){var n;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(0,u.Xz)(e.dataset.data,e.thing),t.prev=1,t.next=4,e.dataset.save(n);case 4:e.onUpdate(e.thing),t.next=14;break;case 7:if(t.prev=7,t.t0=t.catch(1),r=t.t0,!(null!=(o=l.kp)&&"undefined"!==typeof Symbol&&o[Symbol.hasInstance]?o[Symbol.hasInstance](r):r instanceof o)||403!==t.t0.statusCode){t.next=13;break}(0,x.Am)(a.getString("thing-toast-error-not-allowed"),{type:"error"}),t.next=14;break;case 13:throw t.t0;case 14:case"end":return t.stop()}var r,o}),t,null,[[1,7]])}))),i=(0,l.LH)(e.dataset.data),c=(0,u.j5)(e.thing),s=(0,l.Nm)(e.dataset.data)?i.substring(0,i.lastIndexOf("/")).lastIndexOf("/"):i.lastIndexOf("/"),f="",h=c;c.substring(0,i.length)===i&&(c.indexOf("#")===i.length?(f=i.substring(s+1),h=c.substring(c.indexOf("#"))):(h=c.substring(s+1),"/"===new URL(i).pathname&&(h=c.substring(new URL(i).origin.length))));var p=de(d().mark((function t(n){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,navigator.clipboard.writeText((0,u.j5)(e.thing));case 3:(0,x.Am)(a.getString("thing-urlcopy-toast-success"),{type:"info"});case 4:case"end":return t.stop()}}),t)}))),v=(0,r.jsx)("a",{href:(0,u.j5)(e.thing),title:a.getString("thing-urlcopy-button-tooltip"),"aria-hidden":"true",onClick:p,className:"text-coolGray-400 p-2 rounded hover:text-white focus:text-white focus:ring-2 focus:ring-white focus:outline-none",children:(0,r.jsx)(b.Fqs,{className:"inline-block"})}),j=(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{className:"text-coolGray-400 font-normal",children:decodeURIComponent(f)}),decodeURIComponent(h)," ",v]})}),w=!0!==e.isServerManaged?(0,r.jsx)("button",{onClick:function(e){e.preventDefault(),o()},"aria-label":a.getString("thing-delete-label",{thingUrl:(0,u.j5)(e.thing)}),title:a.getString("thing-delete-tooltip",{thingUrl:(0,u.j5)(e.thing)}),className:"object-right-top absolute -top-0.5 -right-0.5 bg-white hover:bg-red-700 hover:text-white p-1 -m-3 rounded-full border-coolGray-50 hover:border-red-700 focus:border-red-700 border-4 focus:outline-none",children:(0,r.jsx)(g.R6G,{})}):null;return(0,r.jsxs)("div",{className:"bg-coolGray-50 rounded-xl relative pb-5",id:encodeURIComponent((0,u.j5)(e.thing)),children:[(0,r.jsxs)("h3",{className:"flex items-center text-lg md:text-xl lg:text-2xl rounded-t-xl bg-coolGray-700 text-white p-5 font-bold break-words",children:[(0,r.jsx)("span",{className:"flex flex-grow items-center",children:j}),"function"===typeof e.onCollapse&&(0,r.jsx)("button",{"aria-hidden":"true",className:"flex items-center text-coolGray-400 p-2 rounded focus:ring-2 focus:ring-white focus:outline-none hover:bg-white hover:text-coolGray-700",onClick:function(t){t.preventDefault(),e.onCollapse&&e.onCollapse(!e.collapsed,t.altKey)},title:a.getString(e.collapsed?"thing-expand-tooltip":"thing-collapse-tooltip"),children:e.collapsed?(0,r.jsx)(b.Yc6,{"aria-label":a.getString("thing-expand-label")}):(0,r.jsx)(b.Faw,{"aria-label":a.getString("thing-expand-label")})})]}),(0,r.jsxs)(B.M,{initial:!1,children:[!e.collapsed&&(0,r.jsxs)(V.E.div,{initial:"open",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:n?{duration:0}:void 0,children:[(0,r.jsx)(le,{dataset:e.dataset,thing:e.thing,onUpdate:e.onUpdate}),(0,r.jsx)("div",{className:"px-5 pt-5",style:{contain:"content",contentVisibility:"auto"},children:t}),(0,r.jsx)(R.o,{access:["append"],resource:e.dataset.data,children:(0,r.jsx)(X,fe({},e))})]},"children-of-".concat(encodeURIComponent((0,u.j5)(e.thing)))),(0,r.jsx)(R.o,{access:["write"],resource:e.dataset.data,children:w})]})]})},pe=function(e){var t=(0,a.useState)((0,l.LH)(e.dataset.data)+"#".concat(Date.now())),n=t[0],o=t[1],i=(0,a.useState)("initial"),c=i[0],s=i[1],d=(0,m.ql)().l10n;if(v("initial"!==c),"addPredicate"===c){return(0,r.jsx)(he,{dataset:e.dataset,thing:(0,u.Lx)({url:n}),onUpdate:function(t){o((0,l.LH)(e.dataset.data)+"#".concat(Date.now())),s("initial"),e.onUpdate(t)},collapsed:!1})}if("setThingUrl"===c){return(0,r.jsx)("div",{className:"text-2xl rounded-xl bg-coolGray-700 text-white p-5 font-bold",children:(0,r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s("addPredicate")},className:"flex space-x-2 items-center",children:[(0,r.jsx)(j.A,{id:"thing-add-url-label",children:(0,r.jsx)("label",{className:"sr-only",htmlFor:"newThingUrl",children:"Thing URL:"})}),(0,r.jsx)(j.A,{id:"thing-add-url-input",attrs:{placeholder:!0,title:!0},children:(0,r.jsx)("input",{type:"url",className:"bg-white text-coolGray-900 text-lg flex-grow p-2 rounded focus:outline-none focus:ring-4 focus:ring-blue-500",placeholder:"https://\u2026",name:"newThingUrl",id:"newThingUrl",required:!0,value:n,onChange:function(e){e.preventDefault(),o(e.target.value)},autoFocus:!0})}),(0,r.jsx)("button",{type:"submit","aria-label":d.getString("thing-add-url-submit"),className:"p-2 border-2 border-coolGray-700 focus:outline-none focus:border-white hover:border-white rounded hover:bg-white hover:text-coolGray-900",children:(0,r.jsx)(b.HhX,{})})]})})}return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("button",{className:"border-2 border-coolGray-200 border-dashed text-coolGray-500 hover:text-coolGray-900 focus:text-coolGray-900 hover:border-coolGray-900 focus:border-coolGray-900 focus:outline-none hover:border-solid focus:border-solid rounded p-2 flex items-center space-x-2 w-full",onClick:function(e){e.preventDefault(),s("setThingUrl")},children:[(0,r.jsx)(b.x06,{"aria-hidden":!0})," ",(0,r.jsx)(j.A,{id:"thing-add-button",children:(0,r.jsx)("span",{children:"New Thing"})})]})})},xe=n(3253),ge=n.n(xe),me=n(4662),be=function(e){var t=(0,a.useState)(!0),n=t[0],o=t[1],l=(0,a.useState)(""),i=l[0],c=l[1];return(0,r.jsxs)(ge(),{isOpen:n,onRequestClose:function(){return o(!1)},onAfterClose:e.onCancel,contentLabel:"Are you sure?",overlayClassName:{base:"transition-opacity duration-150 motion-safe:opacity-0 bg-opacity-90 bg-gray-900 p-5 md:py-20 md:px-40 lg:px-60 xl:px-96 fixed top-0 left-0 right-0 bottom-0 overscroll-contain",afterOpen:"motion-safe:opacity-100",beforeClose:""},className:{base:"transition-opacity duration-150 motion-safe:opacity-0 bg-white shadow-lg mx-auto p-5 md:p-10 rounded",afterOpen:"motion-safe:opacity-100",beforeClose:""},closeTimeoutMS:150,children:[(0,r.jsx)("div",{className:"flex flex-row-reverse -mt-4 -mr-4 md:-mt-8 md:-mr-8",children:(0,r.jsx)("button",{onClick:function(){return o(!1)},children:(0,r.jsx)(b.FU5,{"aria-label":"Close"})})}),e.children,(0,r.jsxs)("form",{onSubmit:function(t){t.preventDefault(),i===e.confirmString&&e.onConfirm()},className:"flex flex-col space-y-5 pt-5",children:[(0,r.jsxs)("label",{htmlFor:"confirmationString",className:"",children:["Please enter ",(0,r.jsx)("samp",{children:(0,r.jsx)("kbd",{className:"font-mono bg-coolGray-200 p-1 border-2 border-coolGray-300 rounded",children:e.confirmString})})," to continue:"]}),(0,r.jsx)(me.nv,{onChange:c,required:!0,className:"p-2",minLength:e.confirmString.length,maxLength:e.confirmString.length,autoFocus:!0}),(0,r.jsxs)("div",{className:"flex space-x-5",children:[(0,r.jsx)(me.zx,{value:"Cancel",className:"flex-grow p-2",onClick:function(){return o(!1)}}),(0,r.jsx)(me.Mm,{value:"Continue",className:"flex-grow p-2",disabled:i!==e.confirmString})]})]})]})},ve=n(7046),je=n(6403);function ye(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(s){return void n(s)}i.done?t(c):Promise.resolve(c).then(r,a)}function we(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function l(e){ye(o,r,a,l,i,"next",e)}function i(e){ye(o,r,a,l,i,"throw",e)}l(void 0)}))}}function Ne(e,t){return Se.apply(this,arguments)}function Se(){return(Se=we(d().mark((function e(t,n,r){var a,o,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0===r?{}:r,o=(0,f.kQ)(t),e.next=4,Promise.all(o.map(we(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,f.OE)(t,n);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),"function"===typeof a.onPrepareDelete&&a.onPrepareDelete(t),e.next=11,(0,je._I)(t,n);case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,6]])})))));case 4:return i=e.sent,e.next=7,Promise.all(i.map(we(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ne(t,n,a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))));case 7:return"function"===typeof a.onPrepareDelete&&a.onPrepareDelete((0,l.LH)(t)),e.next=10,(0,f.SF)(t,n);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ge=n(8939),ke=n(4293),Ae=n(2681),Ce=n(7640),Oe=n(9826);function De(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(s){return void n(s)}i.done?t(c):Promise.resolve(c).then(r,a)}var Ue=function(e){var t,n,o,i,s=(0,Ge.z7)(e.dataset.data)?(0,l.VF)(e.dataset.data):{},g=null!==(o=null===(t=s["http://www.w3.org/ns/solid/acp#accessControl"])||void 0===t?void 0:t[0])&&void 0!==o?o:null,v=(0,Ce.Q)(),y=(0,c.W)(g),w=null!==(i=null===(n=s.acl)||void 0===n?void 0:n[0])&&void 0!==i?i:null,S=(0,c.W)(w),k=(0,m.ql)().l10n,C=(0,a.useState)(!1),O=C[0],D=C[1],U={};(0,Ae.C)(S)&&w!==(0,l.LH)(e.dataset.data)&&(U[w]=k.getString("linked-resources-acl-label")),(0,Ae.C)(y)&&(U[g]=k.getString("linked-resources-acr-label"));var L,F=Object.keys(U).map((function(e){return(0,r.jsx)(p.default,{href:(0,G.rg)(e),children:(0,r.jsx)("a",{className:"bg-coolGray-700 text-white p-5 rounded hover:bg-coolGray-900 block focus:ring-2 focus:ring-offset-2 focus:ring-coolGray-700 focus:outline-none focus:ring-opacity-50",children:U[e]})},e)})),P=[];if(v&&!S.data&&w&&(0,ke.gE)(e.dataset.data))if(O)P.push((0,r.jsx)("div",{className:"w-full flex items-center space-x-2 p-5 rounded border-4 border-dashed border-coolGray-200 text-coolGray-500",children:(0,r.jsx)(Oe.$,{})},"acl-initialiser-".concat((0,l.LH)(e.dataset.data))));else{var I=(L=d().mark((function t(){var n,r,a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return D(!0),n=(0,u.Lx)(),n=(0,A.qg)(n,N.rdf.type,N.acl.Authorization),n=(0,A.qg)(n,N.acl.accessTo,(0,l.LH)(e.dataset.data)),n=(0,A.qg)(n,N.acl.mode,N.acl.Read),n=(0,A.qg)(n,N.acl.mode,N.acl.Write),n=(0,A.qg)(n,N.acl.mode,N.acl.Control),n=(0,A.qg)(n,N.acl.agent,v.webId),t.next=10,(0,ke.QQ)((0,l.LH)(e.dataset.data),{fetch:h.fetch});case 10:if(r=t.sent,(0,ke.gE)(r)){t.next=15;break}return D(!1),(0,x.Am)(k.getString("linked-resources-acl-add-toast-error-not-allowed"),{type:"error"}),t.abrupt("return");case 15:return a=(0,ke.vd)(r)?(0,ke.zL)(r):(0,u.lY)((0,f.HM)(),n),t.prev=16,t.next=19,(0,ke.tL)(r,a,{fetch:h.fetch});case 19:S.mutate(),(0,x.Am)(k.getString("linked-resources-acl-add-toast-success"),{type:"info"}),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(16),(0,x.Am)(k.getString("linked-resources-acl-add-toast-error-other"),{type:"error"});case 26:D(!1);case 27:case"end":return t.stop()}}),t,null,[[16,23]])})),function(){var e=this,t=arguments;return new Promise((function(n,r){var a=L.apply(e,t);function o(e){De(a,n,r,o,l,"next",e)}function l(e){De(a,n,r,o,l,"throw",e)}o(void 0)}))});P.push((0,r.jsxs)("button",{className:"w-full flex items-center space-x-2 p-5 rounded border-4 border-dashed border-coolGray-200 text-coolGray-500 focus:text-coolGray-900 focus:border-coolGray-900 hover:text-coolGray-900 hover:border-coolGray-900 hover:bg-coolGray-100 focus:outline-none",onClick:function(e){e.preventDefault(),I()},children:[(0,r.jsx)(b.x06,{"aria-hidden":"true",className:"text-3xl"}),(0,r.jsx)(j.A,{id:"linked-resources-acl-add",children:(0,r.jsx)("span",{children:"Add Access Control List"})})]},"acl-initialiser-".concat((0,l.LH)(e.dataset.data))))}return 0===Object.keys(U).length&&0===P.length?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.A,{id:"linked-resources-heading",children:(0,r.jsx)(ve.O,{children:"Linked Resources"})}),(0,r.jsxs)("div",{className:"space-y-10 pb-10",children:[F,P]})]})},Le=n(2849);function Fe(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(s){return void n(s)}i.done?t(c):Promise.resolve(c).then(r,a)}var Pe=function(e){var t=(0,a.useState)(),n=t[0],o=t[1],i=(0,u.oY)(e.dataset.data).sort(function(e){var t=(0,l.LH)(e),n=(0,f.kQ)(e);return function(e,r){var a=(0,u.j5)(e,t),o=new URL(a);o.hash="";var l=(0,u.j5)(r,t),i=new URL(l);return i.hash="",!n.includes(o.href)&&n.includes(i.href)?-1:n.includes(o.href)&&!n.includes(i.href)?1:o.href===t&&i.href!==t?-1:o.href!==t&&i.href===t?1:-1===a.indexOf("#")&&-1!==l.indexOf("#")?-1:-1!==a.indexOf("#")&&-1===l.indexOf("#")?1:a.localeCompare(l)}}(e.dataset.data)),c=(0,a.useState)(!1),s=c[0],b=c[1],v=(0,a.useRef)(null),y=(0,a.useState)((0,f.kQ)(e.dataset.data)),w=y[0],N=y[1],S=(0,m.ql)().l10n;(0,a.useEffect)((function(){if(n){var t=(0,u.lY)(e.dataset.data,n);e.dataset.save(t).then((function(){o(void 0)}))}}),[n,e.dataset]);var G,k=function(e){(0,x.Am)((0,r.jsx)(j.A,{id:"dataset-update-toast-success",elems:{"undo-button":(0,r.jsx)("button",{onClick:function(t){t.preventDefault(),o(e)},className:"underline hover:no-underline focus:no-underline"})},children:(0,r.jsx)("span",{children:"Saved."})}),{type:"info"})},A=(G=d().mark((function t(){var n,a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,v.current=(0,x.Am)((0,r.jsx)(j.A,{id:"dataset-delete-toast-prepare",elems:{"dataset-url":(0,r.jsx)("samp",{})},vars:{datasetUrl:decodeURIComponent((0,l.LH)(e.dataset.data))},children:(0,r.jsxs)("span",{children:["Preparing deletion of"," ",(0,r.jsx)("samp",{children:decodeURIComponent((0,l.LH)(e.dataset.data))}),"\u2026"]})}),{type:"info"}),t.next=4,Ne(e.dataset.data,{fetch:h.fetch},{onPrepareDelete:function(e){var t=(0,r.jsx)(j.A,{id:"dataset-delete-toast-process",elems:{"dataset-url":(0,r.jsx)("samp",{})},vars:{datasetUrl:decodeURIComponent(e)},children:(0,r.jsxs)("span",{children:["Deleting ",(0,r.jsx)("samp",{children:decodeURIComponent(e)}),"\u2026"]})});v.current?x.Am.update(v.current,{render:t}):v.current=(0,x.Am)(t,{type:"info"})}});case 4:n=(0,r.jsx)(j.A,{id:(0,f.kQ)(e.dataset.data).length>0?"dataset-delete-toast-success-container":"dataset-delete-toast-success-resource",elems:{"dataset-url":(0,r.jsx)("samp",{})},vars:{datasetUrl:decodeURIComponent((0,l.LH)(e.dataset.data))},children:(0,r.jsxs)("span",{children:["Deleted"," ",(0,r.jsx)("samp",{children:decodeURIComponent((0,l.LH)(e.dataset.data))})," ","and its children."]})}),x.Am.update(v.current,{render:n}),v.current=null,e.dataset.mutate(),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(0),o=t.t0,i=l.kp,a=(null!=i&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](o):o instanceof i)&&403===t.t0.statusCode?S.getString("dataset-delete-toast-error-not-allowed"):S.getString("dataset-delete-toast-error-other"),v.current?(x.Am.update(v.current,{render:a,type:"error"}),v.current=null):(0,x.Am)(a,{type:"error"});case 15:case"end":return t.stop()}var o,i}),t,null,[[0,10]])})),function(){var e=this,t=arguments;return new Promise((function(n,r){var a=G.apply(e,t);function o(e){Fe(a,n,r,o,l,"next",e)}function l(e){Fe(a,n,r,o,l,"throw",e)}o(void 0)}))}),C=(0,l.LH)(e.dataset.data),O=(0,l.Nm)(e.dataset.data)?C.substring(0,C.lastIndexOf("/")).lastIndexOf("/"):C.lastIndexOf("/"),D=C.substring(O+1),U=S.getString((0,f.kQ)(e.dataset.data).length>0?"dataset-delete-confirm-lead-container":"dataset-delete-confirm-lead-resource"),L=s?(0,r.jsxs)(be,{confirmString:decodeURIComponent(D),onConfirm:A,onCancel:function(){return b(!1)},children:[(0,r.jsx)(j.A,{id:"dataset-delete-confirm-heading",children:(0,r.jsx)("h2",{className:"text-2xl pb-2",children:"Are you sure?"})}),(0,r.jsx)("div",{className:"py-2",children:U})]}):null,F=(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(R.o,{access:["write"],resource:e.dataset.data,children:(0,r.jsxs)("div",{className:"pb-10",children:[(0,r.jsx)(j.A,{id:"danger-zone-heading",children:(0,r.jsx)(ve.O,{children:"Danger Zone"})}),(0,r.jsxs)("div",{className:"grid sm:grid-cols-2 gap-5 pb-5",children:[(0,r.jsx)(Le.h,{children:(0,r.jsx)(p.default,{href:"/turtle/?url=".concat(encodeURIComponent((0,l.LH)(e.dataset.data))),children:(0,r.jsxs)("a",{className:"p-5 rounded border-4 border-coolGray-700 text-coolGray-700 focus:text-white hover:text-white flex items-center space-x-2 text-lg focus:bg-coolGray-700 hover:bg-coolGray-700 focus:ring-2 focus:ring-offset-2 focus:ring-coolGray-700 focus:outline-none focus:ring-opacity-50",children:[(0,r.jsx)(g.s2,{"aria-hidden":"true"}),(0,r.jsx)("span",{children:S.getString("dataset-view-turtle")})]})})}),L,(0,r.jsxs)("button",{className:"p-5 rounded border-4 border-red-700 text-red-700 focus:text-white hover:text-white flex items-center space-x-2 text-lg focus:bg-red-700 hover:bg-red-700 focus:ring-2 focus:ring-offset-2 focus:ring-red-700 focus:outline-none focus:ring-opacity-50",onClick:function(e){e.preventDefault(),b(!0)},children:[(0,r.jsx)(g.R6G,{"aria-hidden":"true"}),(0,r.jsx)(j.A,{id:"dataset-delete",children:(0,r.jsx)("span",{children:"Delete resource"})})]})]})]})})});if(0===i.length)return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"space-y-10 pb-10",children:[(0,r.jsx)(j.A,{id:"dataset-empty-warning",children:(0,r.jsx)("div",{className:"rounded bg-yellow-200 p-5",children:"This resource is empty."})}),(0,r.jsx)(R.o,{access:["append"],resource:e.dataset.data,children:(0,r.jsx)(pe,{dataset:e.dataset,onUpdate:k})})]}),(0,r.jsx)(Ue,{dataset:e.dataset}),F]});var P=function(t){var n=(0,u.j5)(t),r=(0,f.kQ)(e.dataset.data);return(0,l.LH)(e.dataset.data)===n&&r.length>0||r.includes(n)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.A,{id:"dataset-things-heading",children:(0,r.jsx)(ve.O,{children:"Things"})}),(0,r.jsxs)("div",{className:"space-y-10 pb-10",children:[i.map((function(t){return(0,r.jsx)("div",{children:(0,r.jsx)(he,{dataset:e.dataset,thing:t,onUpdate:k,collapsed:w.includes((0,u.j5)(t)),onCollapse:(n=t,function(e,t){if(t)N(e?i.map((function(e){return(0,u.j5)(e)})):[]);else{var r=(0,u.j5)(n);N(e?function(e){return e.concat(r)}:function(e){return e.filter((function(e){return e!==r}))})}}),isServerManaged:P(t)})},(0,u.j5)(t)+"_thing");var n})),(0,r.jsx)(R.o,{access:["append"],resource:e.dataset.data,children:(0,r.jsx)(pe,{dataset:e.dataset,onUpdate:k})})]}),(0,r.jsx)(Ue,{dataset:e.dataset}),F]})};var Ie=n(5162);function Re(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(s){return void n(s)}i.done?t(c):Promise.resolve(c).then(r,a)}function qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){qe(e,t,n[t])}))}return e}var He=function(e){var t,n=(0,Ce.Q)(),a=(0,m.ql)().l10n,o=(t=d().mark((function t(n){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all(n.map((function(t){return(0,je.v)((0,l.LH)(e.container.data),t,{fetch:h.fetch,slug:t.name})})));case 3:e.container.mutate(),(0,x.Am)(a.getString("file-add-toast-success",{fileCount:n.length}),{type:"info"}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),r=t.t0,(null!=(o=l.kp)&&"undefined"!==typeof Symbol&&o[Symbol.hasInstance]?o[Symbol.hasInstance](r):r instanceof o)&&403===t.t0.statusCode?(0,x.Am)(a.getString("file-add-toast-error-not-allowed"),{type:"error"}):(0,x.Am)(a.getString("file-add-toast-error-other",{fileCount:n.length}),{type:"error"});case 10:case"end":return t.stop()}var r,o}),t,null,[[0,7]])})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function l(e){Re(o,r,a,l,i,"next",e)}function i(e){Re(o,r,a,l,i,"throw",e)}l(void 0)}))}),i=(0,Ie.u)({onDrop:o}),c=i.getRootProps,s=i.getInputProps,u=i.isDragActive;if(!n)return null;var f=u?"text-coolGray-900 border-coolGray-900 bg-coolGray-100":"";return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("label",Te({},c(),{className:"".concat(f," flex items-center space-x-2 p-5 cursor-pointer rounded border-4 border-dashed border-coolGray-200 text-coolGray-500 focus:text-coolGray-900 focus:border-coolGray-900 hover:text-coolGray-900 hover:border-coolGray-900 hover:bg-coolGray-100 focus:outline-none"),children:[(0,r.jsx)(b.s_P,{"aria-hidden":"true",className:"text-3xl"}),(0,r.jsx)("span",{children:u?a.getString("file-add-drop-target"):a.getString("file-add-button")}),(0,r.jsx)("input",Te({},s()))]}))})};function _e(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(s){return void n(s)}i.done?t(c):Promise.resolve(c).then(r,a)}var We=function(e){var t,n=(0,Ce.Q)(),o=(0,a.useState)("initial"),i=o[0],c=o[1],s=(0,a.useState)(""),u=s[0],g=s[1],v=(0,m.ql)().l10n;if(!n)return null;if("chooseName"===i){var y=(t=d().mark((function t(n){var a,o,i,s,m;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a=u.endsWith("/")?u.substring(0,u.length-1):u,o=u.endsWith("/")?"/":"",i=encodeURIComponent(a),s=(0,l.LH)(e.container.data)+i+o,!u.endsWith("/")){t.next=11;break}return t.next=8,(0,f.Mf)(s,{fetch:h.fetch});case 8:t.t0=t.sent,t.next=14;break;case 11:return t.next=13,(0,f.ek)(s,(0,f.HM)(),{fetch:h.fetch});case 13:t.t0=t.sent;case 14:return m=t.t0,c("initial"),g(""),t.next=19,e.container.mutate();case 19:(0,x.Am)((0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.A,{id:"resource-add-toast-success",children:"Resource created."}),"\xa0",(0,r.jsx)(p.default,{href:(0,G.rg)((0,l.LH)(m)),children:(0,r.jsx)("a",{className:"underline hover:no-underline",children:v.getString("resource-add-toast-success-view-button")})})]}),{type:"info"});case 20:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function l(e){_e(o,r,a,l,i,"next",e)}function i(e){_e(o,r,a,l,i,"throw",e)}l(void 0)}))});return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("form",{onSubmit:y,className:"flex space-x-2 items-center p-3 rounded bg-coolGray-700 text-white",onBlur:function(e){e.preventDefault(),null!==e.relatedTarget&&e.currentTarget.contains(e.relatedTarget)||c("initial")},children:[(0,r.jsx)(j.A,{id:"resource-add-name-label",children:(0,r.jsx)("label",{htmlFor:"resourceName",className:"sr-only",children:"Resource name"})}),(0,r.jsx)(j.A,{id:"resource-add-name-input",attrs:{placeholder:!0,title:!0},children:(0,r.jsx)("input",{type:"text",name:"resourceName",id:"resourceName",className:"text-coolGray-900 flex-grow p-2 rounded focus:outline-none focus:ring-4 focus:ring-blue-500",placeholder:"e.g. resource-name or container-name/",required:!0,autoFocus:!0,value:u,onChange:function(e){e.preventDefault(),g(e.target.value)},title:"Resource name (append a `/` to create a Container)"})}),(0,r.jsx)("button",{type:"submit",className:"p-3 border-2 border-coolGray-700 hover:border-white hover:bg-white hover:text-coolGray-900 focus:border-white focus:outline-none rounded",children:(0,r.jsx)(b.HhX,{"aria-label":v.getString("resource-add-name-submit")})})]})})}return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"grid sm:grid-cols-2 gap-5",children:[(0,r.jsxs)("button",{className:"flex items-center space-x-2 p-5 rounded border-4 border-dashed border-coolGray-200 text-coolGray-500 focus:text-coolGray-900 focus:border-coolGray-900 hover:text-coolGray-900 hover:border-coolGray-900 hover:bg-coolGray-100 focus:outline-none",onClick:function(e){e.preventDefault(),c("chooseName")},children:[(0,r.jsx)(b.x06,{"aria-hidden":"true",className:"text-3xl"}),(0,r.jsx)(j.A,{id:"resource-add-button",children:(0,r.jsx)("span",{children:"Add Resource"})})]}),(0,r.jsx)(He,{container:e.container})]})})},Me=n(9253),Qe=function(e){var t=(0,f.kQ)(e.dataset.data).sort(Ee).map((function(t){var n=t.substring((0,l.LH)(e.dataset.data).length);return(0,r.jsx)(p.default,{href:(0,G.rg)(t),children:(0,r.jsx)("a",{className:"bg-coolGray-700 text-white p-5 rounded hover:bg-coolGray-900 block focus:ring-2 focus:ring-offset-2 focus:ring-coolGray-700 focus:outline-none focus:ring-opacity-50",children:decodeURIComponent(n)})},t+"_containerChild")})),n=0===t.length?(0,r.jsx)(Me.y,{children:(0,r.jsx)(j.A,{id:"container-empty",children:(0,r.jsx)("div",{className:"rounded bg-yellow-200 p-5",children:"666 This container is empty."})})}):null;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.A,{id:"container-children-heading",children:(0,r.jsx)(ve.O,{children:"Contained Resources"})}),(0,r.jsxs)("div",{className:"pb-10",children:[(0,r.jsx)("div",{className:"grid sm:grid-cols-2 gap-5 pb-5",children:t}),n,(0,r.jsx)(We,{container:e.dataset})]})]})};function Ee(e,t){var n=e.endsWith("/"),r=t.endsWith("/");return n&&!r?-1:!n&&r?1:e.localeCompare(t)}var Ye=n(2022);var Xe=function(e){var t,n,a=(0,m.ql)().l10n;return e.error?(t=e.error,(null!=(n=l.kp)&&"undefined"!==typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](t):t instanceof n)?401===e.error.statusCode||403===e.error.statusCode?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"bg-red-100 border-red-600 border-2 rounded p-5",children:a.getString("fetcherror-no-permission")}),(0,r.jsx)(Me.y,{children:(0,r.jsx)("div",{className:"pt-10",children:(0,r.jsx)("div",{className:"shadow p-5",children:(0,r.jsx)(Ye.p,{})})})})]}):404===e.error.statusCode?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"bg-red-100 border-red-600 border-2 rounded p-5",children:a.getString("fetcherror-does-not-exist")})}):(0,r.jsx)(r.Fragment,{children:a.getString("fetcherror-unknown",{statusCode:e.error.statusCode})}):(0,r.jsx)(r.Fragment,{children:"An unknown error occurred."})):null},ze=function(e){var t="sm"===e.size?"p-5 md:py-20 md:px-40 lg:px-60 xl:px-96":"p-5";return(0,r.jsxs)(ge(),{isOpen:e.isOpen,onRequestClose:e.onRequestClose,onAfterClose:e.onAfterClose,contentLabel:e.contentLabel,overlayClassName:{base:"".concat(t," transition-opacity duration-150 motion-safe:opacity-0 bg-opacity-90 bg-gray-900 fixed top-0 left-0 right-0 bottom-0 overscroll-contain"),afterOpen:"motion-safe:opacity-100",beforeClose:""},className:{base:"transition-opacity duration-150 motion-safe:opacity-0 bg-white shadow-lg mx-auto p-5 md:p-10 rounded",afterOpen:"motion-safe:opacity-100",beforeClose:""},closeTimeoutMS:150,children:[(0,r.jsx)("div",{className:"flex flex-row-reverse -mt-4 -mr-4 md:-mt-8 md:-mr-8",children:(0,r.jsx)("button",{onClick:e.onRequestClose,children:(0,r.jsx)(b.FU5,{"aria-label":"Close"})})}),e.children]})},Be=function(e){var t=e.fileUrl.substring(e.fileUrl.lastIndexOf("/")+1),n=(0,a.useState)(!1),o=n[0],l=n[1],i=(0,m.ql)().l10n;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"pb-10",children:[(0,r.jsx)(j.A,{id:"preview-image-heading",children:(0,r.jsx)(ve.O,{children:"Image Preview"})}),(0,r.jsx)("a",{href:e.objectUrl,title:i.getString("preview-image-thumbnail-tooltip"),onClick:function(e){e.preventDefault(),l(!0)},className:"inline-block rounded hover:opacity-75 focus:ring-2 focus:ring-coolGray-700 focus:ring-offset-2 focus:outline-none",children:(0,r.jsx)("img",{src:e.objectUrl,alt:i.getString("preview-image-alt",{filename:t}),className:"rounded max-w-full border-4 border-coolGray-700"})}),(0,r.jsx)(ze,{isOpen:o,onRequestClose:function(){return l(!1)},contentLabel:i.getString("preview-image-heading"),children:(0,r.jsx)("img",{src:e.objectUrl,alt:i.getString("preview-image-alt",{filename:t}),className:"mx-auto"})})]})})},Ve=function(e){var t=e.fileUrl.substring(e.fileUrl.lastIndexOf("/")+1);return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"pb-10",children:[(0,r.jsx)(j.A,{id:"preview-audio-heading",children:(0,r.jsx)(ve.O,{children:"Audio Preview"})}),(0,r.jsx)(j.A,{id:"preview-audio-error-playback",vars:{filename:t},elems:{"download-link":(0,r.jsx)("a",{href:e.objectUrl,download:!0})},children:(0,r.jsxs)("audio",{src:e.objectUrl,className:"w-full",controls:!0,children:["Unfortunately your browser cannot provide a preview of `",t,"`. You can download it instead."]})})]})})},Ze=function(e){var t=e.fileUrl.substring(e.fileUrl.lastIndexOf("/")+1);return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"pb-10",children:[(0,r.jsx)(j.A,{id:"preview-video-heading",children:(0,r.jsx)(ve.O,{children:"Video Preview"})}),(0,r.jsx)(j.A,{id:"preview-video-error-playback",vars:{filename:t},elems:{"download-link":(0,r.jsx)("a",{href:e.objectUrl,download:!0})},children:(0,r.jsxs)("video",{src:e.objectUrl,className:"rounded max-w-full border-4 border-coolGray-700",controls:!0,children:["Unfortunately your browser cannot provide a preview of `",t,"`. You can download it instead."]})})]})})},$e=function(e){var t=(0,a.useState)(),n=t[0],o=t[1];return(0,a.useEffect)((function(){o(void 0),e.file.text().then(o)}),[e.file]),n?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"pb-10",children:[(0,r.jsx)(j.A,{id:"preview-text-heading",children:(0,r.jsx)(ve.O,{children:"File Contents"})}),(0,r.jsx)("pre",{className:"rounded border-4 border-coolGray-700 p-2 w-full h-96 overflow-scroll font-mono",children:n})]})}):null};function Je(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(s){return void n(s)}i.done?t(c):Promise.resolve(c).then(r,a)}var Ke=function(e){var t,n=(0,l.LH)(e.file.data),o=(0,a.useState)(!1),i=o[0],c=o[1],s=n.substring(n.lastIndexOf("/")+1),u=(0,m.ql)().l10n,f=URL.createObjectURL(e.file.data.blob),p=(t=d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,je._I)(n,{fetch:h.fetch});case 3:(0,x.Am)(u.getString("file-delete-toast-success"),{type:"info"}),e.file.mutate(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),r=t.t0,(null!=(a=l.kp)&&"undefined"!==typeof Symbol&&a[Symbol.hasInstance]?a[Symbol.hasInstance](r):r instanceof a)&&403===t.t0.statusCode?(0,x.Am)(u.getString("file-delete-toast-error-not-allowed"),{type:"error"}):(0,x.Am)(u.getString("file-delete-toast-error-other"),{type:"error"});case 10:case"end":return t.stop()}var r,a}),t,null,[[0,7]])})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function l(e){Je(o,r,a,l,i,"next",e)}function i(e){Je(o,r,a,l,i,"throw",e)}l(void 0)}))}),v=i?(0,r.jsxs)(be,{confirmString:decodeURIComponent(s),onConfirm:p,onCancel:function(){return c(!1)},children:[(0,r.jsx)(j.A,{id:"file-delete-confirm-heading",children:(0,r.jsx)("h2",{className:"text-2xl pb-2",children:"Are you sure?"})}),(0,r.jsx)(j.A,{id:"file-delete-confirm-lead",children:"Are you sure you want to delete this file? This can not be undone."})]}):null,y=null,w=(0,l.wg)(e.file.data),N=null===w||void 0===w?void 0:w.split("/");return Array.isArray(N)&&2===N.length&&("image"===N[0]&&(y=(0,r.jsx)(Be,{fileUrl:n,objectUrl:f})),"audio"===N[0]&&(y=(0,r.jsx)(Ve,{fileUrl:n,objectUrl:f})),"video"===N[0]&&(y=(0,r.jsx)(Ze,{fileUrl:n,objectUrl:f})),"text"===N[0]&&(y=(0,r.jsx)($e,{file:e.file.data.blob}))),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"pb-10",children:[(0,r.jsx)(j.A,{id:"file-heading",children:(0,r.jsx)(ve.O,{children:"File"})}),(0,r.jsxs)("a",{href:f,title:u.getString("file-download-button-tooltip",{filename:s}),className:"w-full md:w-1/2 p-5 rounded bg-coolGray-700 text-white flex items-center space-x-2 text-lg hover:bg-coolGray-900 focus:ring-2 focus:ring-offset-2 focus:ring-coolGray-700 focus:outline-none focus:ring-opacity-50",download:s,children:[(0,r.jsx)(b.tEr,{className:"text-2xl","aria-hidden":"true"}),(0,r.jsx)(j.A,{id:"file-download-button",children:(0,r.jsx)("span",{children:"Download"})})]})]}),y,(0,r.jsx)(R.o,{access:["write"],resource:e.file.data,children:(0,r.jsxs)("div",{className:"pb-10",children:[(0,r.jsx)(j.A,{id:"danger-zone-heading",children:(0,r.jsx)(ve.O,{children:"Danger Zone"})}),v,(0,r.jsxs)("button",{className:"w-full md:w-1/2 p-5 rounded border-4 border-red-700 text-red-700 focus:text-white hover:text-white flex items-center space-x-2 text-lg focus:bg-red-700 hover:bg-red-700 focus:ring-2 focus:ring-offset-2 focus:ring-red-700 focus:outline-none focus:ring-opacity-50",onClick:function(e){e.preventDefault(),c(!0)},children:[(0,r.jsx)(g.R6G,{"aria-hidden":"true"}),(0,r.jsx)(j.A,{id:"file-delete",children:(0,r.jsx)("span",{children:"Delete file"})})]})]})})]})};function et(e){return"undefined"===typeof e.error&&(0,c.g)(e.data)}var tt=function(e){var t=(0,c.W)("string"===typeof e.url?e.url:null),n=(0,Ce.Q)(),a=null!==t&&(0,Ae.C)(t)?(0,r.jsx)(Pe,{dataset:t}):null,s=null!==t&&(0,Ae.C)(t)&&(0,l.Nm)(t.data)?(0,r.jsx)(Qe,{dataset:t}):null,d=null!==t&&et(t)?(0,r.jsx)(Ke,{file:t}):null,u="undefined"===typeof n||null===t||!(0,Ae.C)(t)&&t.isValidating?(0,r.jsx)(Oe.$,{}):(0,r.jsx)(Xe,{error:t.error});return(0,r.jsxs)(i.A,{path:e.url,children:[(0,r.jsx)(o.default,{children:(0,r.jsxs)("title",{children:["Penny: ",e.url]})}),(0,r.jsxs)("div",{className:"lg:w-4/5 xl:w-2/3 2xl:w-1/2 mx-auto p-5 md:pt-20",children:[u,s,d||a]})]})}},5138:function(e,t,n){n.d(t,{o:function(){return o}});var r=n(5893),a=n(548),o=function(e){return(0,a.F)(e.resource,e.access)?(0,r.jsx)(r.Fragment,{children:e.children}):null}},7046:function(e,t,n){n.d(t,{O:function(){return a}});var r=n(5893);var a=function(e){return(0,r.jsx)("div",{className:"pb-5",children:(0,r.jsx)("h3",{className:"pt-5 text-2xl font-bold border-b-4 border-coolGray-700 w-3/4",children:e.children})})}},548:function(e,t,n){n.d(t,{F:function(){return a}});var r=n(8504);function a(e,t){var n=(0,r.O1)(e);return t.every((function(e){return!0===n.user[e]}))}},2681:function(e,t,n){n.d(t,{C:function(){return a},p:function(){return o}});var r=n(130);function a(e){return"undefined"===typeof e.error&&"undefined"!==typeof e.data&&"undefined"===typeof e.data.blob}function o(e){var t=(0,r.W)(e);return null!==t&&a(t)?t:null}},2689:function(e,t,n){n.d(t,{U:function(){return i}});var r=n(5287),a=n(7294),o=n(7640),l=n(2681);function i(){var e=(0,o.Q)(),t=function(){var e,t=(0,o.Q)();return(0,l.p)(null!==(e=null===t||void 0===t?void 0:t.webId)&&void 0!==e?e:null)}(),n=(0,a.useCallback)((function(e){if(t){var n=(0,r.lY)(t.data,e);t.save(n)}}),[t]);if(null===t||"undefined"===typeof(null===e||void 0===e?void 0:e.webId))return null;var i=(0,r.YY)(t.data,e.webId);return null===i?null:{data:i,save:n}}},130:function(e,t,n){n.d(t,{g:function(){return b},W:function(){return v}});var r=n(8520),a=n.n(r),o=n(8504),l=n(4192),i=n(8939),c=n(6403),s=n(4305),d=n(7294),u=n(3288),f=n(7640);function h(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(s){return void n(s)}i.done?t(c):Promise.resolve(c).then(r,a)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function l(e){h(o,r,a,l,i,"next",e)}function i(e){h(o,r,a,l,i,"throw",e)}l(void 0)}))}}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){x(e,t,n[t])}))}return e}var m=p(a().mark((function e(t){var n,r,i,c,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL(t),r=n.pathname.endsWith("/")?{Accept:"text/turtle"}:{},e.next=4,(0,s.fetch)(t,{headers:r});case 4:if(i=e.sent,c=(0,o.Rg)(i),!(0,o.xr)(c)){e.next=16;break}return e.t0=g,e.t1={},e.t2=c,e.next=12,i.blob();case 12:return e.t3=e.sent,e.t4=i.headers.get("ETag"),e.t5={blob:e.t3,etag:e.t4},e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t5));case 16:return e.next=18,(0,l.Rt)(i);case 18:return d=e.sent,e.abrupt("return",d);case 20:case"end":return e.stop()}}),e)})));function b(e){return"object"===typeof e&&"object"===typeof e.blob}function v(e){var t=e?function(e){var t=new URL(e);return t.hash="",t.href}(e):null,n=(0,f.Q)(),r=(0,u.ZP)(t?[t,null===n||void 0===n?void 0:n.webId]:null,m),h=(0,d.useCallback)(p(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,i.z7)(r.data)){e.next=28;break}if(a=t,!(null!=(d=Blob)&&"undefined"!==typeof Symbol&&d[Symbol.hasInstance]?d[Symbol.hasInstance](a):a instanceof d)){e.next=15;break}return r.mutate(g({},r.data,{blob:t,etag:null}),!1),e.prev=3,e.next=6,(0,c._u)((0,o.LH)(r.data),t,{fetch:s.fetch});case 6:e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(3),e.next=12,r.mutate();case 12:throw e.t0;case 13:e.next=28;break;case 15:return(0,i.z7)(t)&&r.mutate(t,!1),e.prev=16,e.next=19,(0,l.ek)((0,o.LH)(r.data),t,{fetch:s.fetch});case 19:n=e.sent,r.mutate(n,!0),e.next=28;break;case 23:return e.prev=23,e.t1=e.catch(16),e.next=27,r.mutate();case 27:throw e.t1;case 28:case"end":return e.stop()}var a,d}),e,null,[[3,8],[16,23]])}))),[r]);return g({},r,{save:h})}}}]);