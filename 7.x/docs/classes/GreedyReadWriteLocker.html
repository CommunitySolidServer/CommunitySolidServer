<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>GreedyReadWriteLocker | Community Solid Server - v7.1.8</title><meta name="description" content="Documentation for Community Solid Server"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><link rel="stylesheet" href="../assets/custom.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">Community Solid Server - v7.1.8</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">Community Solid Server</a></li><li><a href="GreedyReadWriteLocker.html">GreedyReadWriteLocker</a></li></ul><h1>Class GreedyReadWriteLocker</h1></div><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><p>A <a href="BaseReadWriteLocker.html" class="tsd-kind-class">BaseReadWriteLocker</a> that uses the same locker for the main lock and the count lock,
and uses a <a href="../interfaces/KeyValueStorage.html" class="tsd-kind-interface">KeyValueStorage</a> for keeping track of the counter.</p>
<p>Since it is completely dependent on other implementations,
this locker is threadsafe if its inputs are as well.</p>
</div><div class="tsd-comment tsd-typography"></div></section><section class="tsd-panel tsd-hierarchy"><h4>Hierarchy (<a href="../hierarchy.html#GreedyReadWriteLocker">view full</a>)</h4><ul class="tsd-hierarchy"><li><a href="BaseReadWriteLocker.html" class="tsd-signature-type tsd-kind-class">BaseReadWriteLocker</a><ul class="tsd-hierarchy"><li><span class="target">GreedyReadWriteLocker</span></li></ul></li></ul></section><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/CommunitySolidServer/CommunitySolidServer/blob/642983926c79dd9b91d5b2035a8accc6bc2c8bbc/src/util/locking/GreedyReadWriteLocker.ts#L14">src/util/locking/GreedyReadWriteLocker.ts:14</a></li></ul></aside><section class="tsd-panel-group tsd-index-group"><section class="tsd-panel tsd-index-panel"><details class="tsd-index-content tsd-accordion" open><summary class="tsd-accordion-summary tsd-index-summary"><h5 class="tsd-index-heading uppercase" role="button" aria-expanded="false" tabIndex="0"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-chevronSmall"></use></svg> Index</h5></summary><div class="tsd-accordion-details"><section class="tsd-index-section"><h3 class="tsd-index-heading">Constructors</h3><div class="tsd-index-list"><a href="GreedyReadWriteLocker.html#constructor" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-512"></use></svg><span>constructor</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Properties</h3><div class="tsd-index-list"><a href="GreedyReadWriteLocker.html#countLocker" class="tsd-index-link tsd-is-protected tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>count<wbr/>Locker</span></a>
<a href="GreedyReadWriteLocker.html#countSuffix" class="tsd-index-link tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>count<wbr/>Suffix</span></a>
<a href="GreedyReadWriteLocker.html#locker" class="tsd-index-link tsd-is-protected tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>locker</span></a>
<a href="GreedyReadWriteLocker.html#readSuffix" class="tsd-index-link tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>read<wbr/>Suffix</span></a>
<a href="GreedyReadWriteLocker.html#storage" class="tsd-index-link tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>storage</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Methods</h3><div class="tsd-index-list"><a href="GreedyReadWriteLocker.html#getCountKey" class="tsd-index-link tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>get<wbr/>Count<wbr/>Key</span></a>
<a href="GreedyReadWriteLocker.html#getCountLockIdentifier" class="tsd-index-link tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>get<wbr/>Count<wbr/>Lock<wbr/>Identifier</span></a>
<a href="GreedyReadWriteLocker.html#modifyCount" class="tsd-index-link tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>modify<wbr/>Count</span></a>
<a href="GreedyReadWriteLocker.html#withLock" class="tsd-index-link tsd-is-protected tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>with<wbr/>Lock</span></a>
<a href="GreedyReadWriteLocker.html#withReadLock" class="tsd-index-link tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>with<wbr/>Read<wbr/>Lock</span></a>
<a href="GreedyReadWriteLocker.html#withWriteLock" class="tsd-index-link tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>with<wbr/>Write<wbr/>Lock</span></a>
</div></section></div></details></section></section><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Constructors"><h2><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg> Constructors</h2></summary><section><section class="tsd-panel tsd-member"><a id="constructor" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>constructor</span><a href="#constructor" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="constructor.new_GreedyReadWriteLocker" class="tsd-anchor"></a><span class="tsd-kind-constructor-signature">new <wbr/>Greedy<wbr/>Read<wbr/>Write<wbr/>Locker</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">locker</span>, <span class="tsd-kind-parameter">storage</span>, <span class="tsd-kind-parameter">readSuffix</span><span class="tsd-signature-symbol">?</span>, <span class="tsd-kind-parameter">countSuffix</span><span class="tsd-signature-symbol">?</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="GreedyReadWriteLocker.html" class="tsd-signature-type tsd-kind-class">GreedyReadWriteLocker</a><a href="#constructor.new_GreedyReadWriteLocker" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">locker</span>: <a href="../interfaces/ResourceLocker.html" class="tsd-signature-type tsd-kind-interface">ResourceLocker</a></span><div class="tsd-comment tsd-typography"><p>Used for creating read and write locks.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><span class="tsd-kind-parameter">storage</span>: <a href="../interfaces/KeyValueStorage.html" class="tsd-signature-type tsd-kind-interface">KeyValueStorage</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">, </span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">&gt;</span></span><div class="tsd-comment tsd-typography"><p>Used for storing the amount of active read operations on a resource.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><span class="tsd-kind-parameter">readSuffix</span>: <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol"> = &#39;read&#39;</span></span><div class="tsd-comment tsd-typography"><p>Used to generate the identifier for the lock that is applied when updating the counter.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><span class="tsd-kind-parameter">countSuffix</span>: <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol"> = &#39;count&#39;</span></span><div class="tsd-comment tsd-typography"><p>Used to generate the identifier that will be used in the storage for storing the counter.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <a href="GreedyReadWriteLocker.html" class="tsd-signature-type tsd-kind-class">GreedyReadWriteLocker</a></h4><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><p>Overrides <a href="BaseReadWriteLocker.html">BaseReadWriteLocker</a>.<a href="BaseReadWriteLocker.html#constructor">constructor</a></p><ul><li>Defined in <a href="https://github.com/CommunitySolidServer/CommunitySolidServer/blob/642983926c79dd9b91d5b2035a8accc6bc2c8bbc/src/util/locking/GreedyReadWriteLocker.ts#L25">src/util/locking/GreedyReadWriteLocker.ts:25</a></li></ul></aside></li></ul></section></section></details><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Properties"><h2><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg> Properties</h2></summary><section><section class="tsd-panel tsd-member tsd-is-protected tsd-is-inherited"><a id="countLocker" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Protected</code> <code class="tsd-tag">Readonly</code><span>count<wbr/>Locker</span><a href="#countLocker" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">count<wbr/>Locker</span><span class="tsd-signature-symbol">:</span> <a href="../interfaces/ResourceLocker.html" class="tsd-signature-type tsd-kind-interface">ResourceLocker</a></div><aside class="tsd-sources"><p>Inherited from <a href="BaseReadWriteLocker.html">BaseReadWriteLocker</a>.<a href="BaseReadWriteLocker.html#countLocker">countLocker</a></p><ul><li>Defined in <a href="https://github.com/CommunitySolidServer/CommunitySolidServer/blob/642983926c79dd9b91d5b2035a8accc6bc2c8bbc/src/util/locking/BaseReadWriteLocker.ts#L22">src/util/locking/BaseReadWriteLocker.ts:22</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-is-protected"><a id="countSuffix" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Protected</code> <code class="tsd-tag">Readonly</code><span>count<wbr/>Suffix</span><a href="#countSuffix" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">count<wbr/>Suffix</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/CommunitySolidServer/CommunitySolidServer/blob/642983926c79dd9b91d5b2035a8accc6bc2c8bbc/src/util/locking/GreedyReadWriteLocker.ts#L17">src/util/locking/GreedyReadWriteLocker.ts:17</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-is-protected tsd-is-inherited"><a id="locker" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Protected</code> <code class="tsd-tag">Readonly</code><span>locker</span><a href="#locker" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">locker</span><span class="tsd-signature-symbol">:</span> <a href="../interfaces/ResourceLocker.html" class="tsd-signature-type tsd-kind-interface">ResourceLocker</a></div><aside class="tsd-sources"><p>Inherited from <a href="BaseReadWriteLocker.html">BaseReadWriteLocker</a>.<a href="BaseReadWriteLocker.html#locker">locker</a></p><ul><li>Defined in <a href="https://github.com/CommunitySolidServer/CommunitySolidServer/blob/642983926c79dd9b91d5b2035a8accc6bc2c8bbc/src/util/locking/EqualReadWriteLocker.ts#L10">src/util/locking/EqualReadWriteLocker.ts:10</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-is-protected"><a id="readSuffix" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Protected</code> <code class="tsd-tag">Readonly</code><span>read<wbr/>Suffix</span><a href="#readSuffix" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">read<wbr/>Suffix</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/CommunitySolidServer/CommunitySolidServer/blob/642983926c79dd9b91d5b2035a8accc6bc2c8bbc/src/util/locking/GreedyReadWriteLocker.ts#L16">src/util/locking/GreedyReadWriteLocker.ts:16</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-is-protected"><a id="storage" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Protected</code> <code class="tsd-tag">Readonly</code><span>storage</span><a href="#storage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">storage</span><span class="tsd-signature-symbol">:</span> <a href="../interfaces/KeyValueStorage.html" class="tsd-signature-type tsd-kind-interface">KeyValueStorage</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">, </span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">&gt;</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/CommunitySolidServer/CommunitySolidServer/blob/642983926c79dd9b91d5b2035a8accc6bc2c8bbc/src/util/locking/GreedyReadWriteLocker.ts#L15">src/util/locking/GreedyReadWriteLocker.ts:15</a></li></ul></aside></section></section></details><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Methods"><h2><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg> Methods</h2></summary><section><section class="tsd-panel tsd-member tsd-is-protected"><a id="getCountKey" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Protected</code><span>get<wbr/>Count<wbr/>Key</span><a href="#getCountKey" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures tsd-is-protected"><li class="tsd-signature tsd-anchor-link"><a id="getCountKey.getCountKey-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">get<wbr/>Count<wbr/>Key</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">identifier</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">string</span><a href="#getCountKey.getCountKey-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>This key is used for storing the count of active read operations.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">identifier</span>: <a href="../interfaces/ResourceIdentifier.html" class="tsd-signature-type tsd-kind-interface">ResourceIdentifier</a></span></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">string</span></h4><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/CommunitySolidServer/CommunitySolidServer/blob/642983926c79dd9b91d5b2035a8accc6bc2c8bbc/src/util/locking/GreedyReadWriteLocker.ts#L44">src/util/locking/GreedyReadWriteLocker.ts:44</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member tsd-is-protected"><a id="getCountLockIdentifier" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Protected</code><span>get<wbr/>Count<wbr/>Lock<wbr/>Identifier</span><a href="#getCountLockIdentifier" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures tsd-is-protected"><li class="tsd-signature tsd-anchor-link"><a id="getCountLockIdentifier.getCountLockIdentifier-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">get<wbr/>Count<wbr/>Lock<wbr/>Identifier</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">identifier</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="../interfaces/ResourceIdentifier.html" class="tsd-signature-type tsd-kind-interface">ResourceIdentifier</a><a href="#getCountLockIdentifier.getCountLockIdentifier-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Generate the identifier that will be used to acquire the count lock for the given identifier.
There will be cases where this lock needs to be acquired
while an active lock on the main resource is still being maintained.
This means that if the input <code>resourceLocker</code> and <code>countLocker</code> use the same locking system
this generated identifier needs to be different.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">identifier</span>: <a href="../interfaces/ResourceIdentifier.html" class="tsd-signature-type tsd-kind-interface">ResourceIdentifier</a></span></li></ul></div><h4 class="tsd-returns-title">Returns <a href="../interfaces/ResourceIdentifier.html" class="tsd-signature-type tsd-kind-interface">ResourceIdentifier</a></h4><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><p>Overrides <a href="BaseReadWriteLocker.html">BaseReadWriteLocker</a>.<a href="BaseReadWriteLocker.html#getCountLockIdentifier">getCountLockIdentifier</a></p><ul><li>Defined in <a href="https://github.com/CommunitySolidServer/CommunitySolidServer/blob/642983926c79dd9b91d5b2035a8accc6bc2c8bbc/src/util/locking/GreedyReadWriteLocker.ts#L37">src/util/locking/GreedyReadWriteLocker.ts:37</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member tsd-is-protected"><a id="modifyCount" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Protected</code><span>modify<wbr/>Count</span><a href="#modifyCount" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures tsd-is-protected"><li class="tsd-signature tsd-anchor-link"><a id="modifyCount.modifyCount-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">modify<wbr/>Count</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">identifier</span>, <span class="tsd-kind-parameter">mod</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">&gt;</span><a href="#modifyCount.modifyCount-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Updates the count with the given modifier.
Creates the data if it didn't exist yet.
Deletes the data when the count reaches zero.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">identifier</span>: <a href="../interfaces/ResourceIdentifier.html" class="tsd-signature-type tsd-kind-interface">ResourceIdentifier</a></span></li><li><span><span class="tsd-kind-parameter">mod</span>: <span class="tsd-signature-type">number</span></span></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">&gt;</span></h4><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><p>Overrides <a href="BaseReadWriteLocker.html">BaseReadWriteLocker</a>.<a href="BaseReadWriteLocker.html#modifyCount">modifyCount</a></p><ul><li>Defined in <a href="https://github.com/CommunitySolidServer/CommunitySolidServer/blob/642983926c79dd9b91d5b2035a8accc6bc2c8bbc/src/util/locking/GreedyReadWriteLocker.ts#L53">src/util/locking/GreedyReadWriteLocker.ts:53</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member tsd-is-protected tsd-is-inherited"><a id="withLock" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag">Protected</code><span>with<wbr/>Lock</span><a href="#withLock" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures tsd-is-protected tsd-is-inherited"><li class="tsd-signature tsd-anchor-link"><a id="withLock.withLock-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">with<wbr/>Lock</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="GreedyReadWriteLocker.html#withLock.withLock-1.T">T</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">identifier</span>, <span class="tsd-kind-parameter">whileLocked</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="BaseReadWriteLocker.html#withLock.withLock-1.T">T</a><span class="tsd-signature-symbol">&gt;</span><a href="#withLock.withLock-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Acquires a new lock for the requested identifier.
Will resolve when the input function resolves.</p>
</div><section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span><a id="withLock.withLock-1.T" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">T</span></span></li></ul></section><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">identifier</span>: <a href="../interfaces/ResourceIdentifier.html" class="tsd-signature-type tsd-kind-interface">ResourceIdentifier</a></span><div class="tsd-comment tsd-typography"><p>Identifier of resource that needs to be locked.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><span class="tsd-kind-parameter">whileLocked</span>: <span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> =&gt; </span><a href="../types/PromiseOrValue.html" class="tsd-signature-type tsd-kind-type-alias">PromiseOrValue</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="BaseReadWriteLocker.html#withLock.withLock-1.T">T</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">)</span></span><div class="tsd-comment tsd-typography"><p>Function to resolve while the resource is locked.</p>
</div><div class="tsd-comment tsd-typography"></div><ul class="tsd-parameters"><li class="tsd-parameter-signature"><ul class="tsd-signatures"><li class="tsd-signature"><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="../types/PromiseOrValue.html" class="tsd-signature-type tsd-kind-type-alias">PromiseOrValue</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="BaseReadWriteLocker.html#withLock.withLock-1.T">T</a><span class="tsd-signature-symbol">&gt;</span></li><li class="tsd-description"><h4 class="tsd-returns-title">Returns <a href="../types/PromiseOrValue.html" class="tsd-signature-type tsd-kind-type-alias">PromiseOrValue</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="BaseReadWriteLocker.html#withLock.withLock-1.T">T</a><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></li></ul></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="BaseReadWriteLocker.html#withLock.withLock-1.T">T</a><span class="tsd-signature-symbol">&gt;</span></h4><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><p>Inherited from <a href="BaseReadWriteLocker.html">BaseReadWriteLocker</a>.<a href="BaseReadWriteLocker.html#withLock">withLock</a></p><ul><li>Defined in <a href="https://github.com/CommunitySolidServer/CommunitySolidServer/blob/642983926c79dd9b91d5b2035a8accc6bc2c8bbc/src/util/locking/EqualReadWriteLocker.ts#L31">src/util/locking/EqualReadWriteLocker.ts:31</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member tsd-is-inherited"><a id="withReadLock" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>with<wbr/>Read<wbr/>Lock</span><a href="#withReadLock" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures tsd-is-inherited"><li class="tsd-signature tsd-anchor-link"><a id="withReadLock.withReadLock-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">with<wbr/>Read<wbr/>Lock</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="GreedyReadWriteLocker.html#withReadLock.withReadLock-1.T-1">T</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">identifier</span>, <span class="tsd-kind-parameter">whileLocked</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="BaseReadWriteLocker.html#withReadLock.withReadLock-1.T-1">T</a><span class="tsd-signature-symbol">&gt;</span><a href="#withReadLock.withReadLock-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Run the given function while the resource is locked.
The lock will be released when the (async) input function resolves.
This function should be used for operations that only require reading the resource.</p>
</div><section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span><a id="withReadLock.withReadLock-1.T-1" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">T</span></span></li></ul></section><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">identifier</span>: <a href="../interfaces/ResourceIdentifier.html" class="tsd-signature-type tsd-kind-interface">ResourceIdentifier</a></span><div class="tsd-comment tsd-typography"><p>Identifier of the resource that needs to be locked.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><span class="tsd-kind-parameter">whileLocked</span>: <span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> =&gt; </span><a href="../types/PromiseOrValue.html" class="tsd-signature-type tsd-kind-type-alias">PromiseOrValue</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="BaseReadWriteLocker.html#withReadLock.withReadLock-1.T-1">T</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">)</span></span><div class="tsd-comment tsd-typography"><p>A function to execute while the resource is locked.</p>
</div><div class="tsd-comment tsd-typography"></div><ul class="tsd-parameters"><li class="tsd-parameter-signature"><ul class="tsd-signatures"><li class="tsd-signature"><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="../types/PromiseOrValue.html" class="tsd-signature-type tsd-kind-type-alias">PromiseOrValue</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="BaseReadWriteLocker.html#withReadLock.withReadLock-1.T-1">T</a><span class="tsd-signature-symbol">&gt;</span></li><li class="tsd-description"><h4 class="tsd-returns-title">Returns <a href="../types/PromiseOrValue.html" class="tsd-signature-type tsd-kind-type-alias">PromiseOrValue</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="BaseReadWriteLocker.html#withReadLock.withReadLock-1.T-1">T</a><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></li></ul></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="BaseReadWriteLocker.html#withReadLock.withReadLock-1.T-1">T</a><span class="tsd-signature-symbol">&gt;</span></h4><p>A promise resolving when the lock is released.</p>
<div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><p>Inherited from <a href="BaseReadWriteLocker.html">BaseReadWriteLocker</a>.<a href="BaseReadWriteLocker.html#withReadLock">withReadLock</a></p><ul><li>Defined in <a href="https://github.com/CommunitySolidServer/CommunitySolidServer/blob/642983926c79dd9b91d5b2035a8accc6bc2c8bbc/src/util/locking/BaseReadWriteLocker.ts#L33">src/util/locking/BaseReadWriteLocker.ts:33</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member tsd-is-inherited"><a id="withWriteLock" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>with<wbr/>Write<wbr/>Lock</span><a href="#withWriteLock" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures tsd-is-inherited"><li class="tsd-signature tsd-anchor-link"><a id="withWriteLock.withWriteLock-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">with<wbr/>Write<wbr/>Lock</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="GreedyReadWriteLocker.html#withWriteLock.withWriteLock-1.T-2">T</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">identifier</span>, <span class="tsd-kind-parameter">whileLocked</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="BaseReadWriteLocker.html#withWriteLock.withWriteLock-1.T-2">T</a><span class="tsd-signature-symbol">&gt;</span><a href="#withWriteLock.withWriteLock-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Run the given function while the resource is locked.
The lock will be released when the (async) input function resolves.
This function should be used for operations that could modify the resource.</p>
</div><section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span><a id="withWriteLock.withWriteLock-1.T-2" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">T</span></span></li></ul></section><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">identifier</span>: <a href="../interfaces/ResourceIdentifier.html" class="tsd-signature-type tsd-kind-interface">ResourceIdentifier</a></span><div class="tsd-comment tsd-typography"><p>Identifier of the resource that needs to be locked.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><span class="tsd-kind-parameter">whileLocked</span>: <span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> =&gt; </span><a href="../types/PromiseOrValue.html" class="tsd-signature-type tsd-kind-type-alias">PromiseOrValue</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="BaseReadWriteLocker.html#withWriteLock.withWriteLock-1.T-2">T</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">)</span></span><div class="tsd-comment tsd-typography"><p>A function to execute while the resource is locked.</p>
</div><div class="tsd-comment tsd-typography"></div><ul class="tsd-parameters"><li class="tsd-parameter-signature"><ul class="tsd-signatures"><li class="tsd-signature"><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="../types/PromiseOrValue.html" class="tsd-signature-type tsd-kind-type-alias">PromiseOrValue</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="BaseReadWriteLocker.html#withWriteLock.withWriteLock-1.T-2">T</a><span class="tsd-signature-symbol">&gt;</span></li><li class="tsd-description"><h4 class="tsd-returns-title">Returns <a href="../types/PromiseOrValue.html" class="tsd-signature-type tsd-kind-type-alias">PromiseOrValue</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="BaseReadWriteLocker.html#withWriteLock.withWriteLock-1.T-2">T</a><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></li></ul></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="BaseReadWriteLocker.html#withWriteLock.withWriteLock-1.T-2">T</a><span class="tsd-signature-symbol">&gt;</span></h4><p>A promise resolving when the lock is released.</p>
<div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><p>Inherited from <a href="BaseReadWriteLocker.html">BaseReadWriteLocker</a>.<a href="BaseReadWriteLocker.html#withWriteLock">withWriteLock</a></p><ul><li>Defined in <a href="https://github.com/CommunitySolidServer/CommunitySolidServer/blob/642983926c79dd9b91d5b2035a8accc6bc2c8bbc/src/util/locking/EqualReadWriteLocker.ts#L20">src/util/locking/EqualReadWriteLocker.ts:20</a></li></ul></aside></li></ul></section></section></details></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="tsd-otp-Constructors"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Constructors</summary><div><a href="#constructor" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-512"></use></svg><span>constructor</span></a></div></details><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="tsd-otp-Properties"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Properties</summary><div><a href="#countLocker" class="tsd-is-protected tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>count<wbr/>Locker</span></a><a href="#countSuffix" class="tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>count<wbr/>Suffix</span></a><a href="#locker" class="tsd-is-protected tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>locker</span></a><a href="#readSuffix" class="tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>read<wbr/>Suffix</span></a><a href="#storage" class="tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>storage</span></a></div></details><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="tsd-otp-Methods"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Methods</summary><div><a href="#getCountKey" class="tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>get<wbr/>Count<wbr/>Key</span></a><a href="#getCountLockIdentifier" class="tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>get<wbr/>Count<wbr/>Lock<wbr/>Identifier</span></a><a href="#modifyCount" class="tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>modify<wbr/>Count</span></a><a href="#withLock" class="tsd-is-protected tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>with<wbr/>Lock</span></a><a href="#withReadLock" class="tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>with<wbr/>Read<wbr/>Lock</span></a><a href="#withWriteLock" class="tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>with<wbr/>Write<wbr/>Lock</span></a></div></details></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1"></use></svg><span>Community Solid Server - v7.1.8</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base=".."><li>Loading...</li></ul></nav></div></div></div><footer></footer><div class="overlay"></div></body></html>
