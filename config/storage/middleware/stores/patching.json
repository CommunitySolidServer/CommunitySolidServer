{
  "@context": "https://linkedsoftwaredependencies.org/bundles/npm/@solid/community-server/^5.0.0/components/context.jsonld",
  "@graph": [
    {
      "comment": "Allows for PATCH operations on stores that don't have native support.",
      "@id": "urn:solid-server:default:ResourceStore_Patching",
      "@type": "PatchingStore",
      "patchHandler": {
        "@id": "urn:solid-server:default:PatchHandler",
        "@type": "RepresentationPatchHandler",
        "patcher": {
          "@type": "WaterfallHandler",
          "handlers": [
            {
              "@type": "ConvertingPatcher",
              "patcher": { "@id": "urn:solid-server:default:RdfPatcher" },
              "converter": { "@id": "urn:solid-server:default:RepresentationConverter" },
              "intermediateType": "internal/quads",
              "defaultType": "text/turtle"
            },
            {
              "comment": "Converts the input stream into an N3.js store.",
              "@id": "urn:solid-server:default:RdfPatcher",
              "@type": "RdfPatcher",
              "patcher": { "@id": "urn:solid-server:default:PatchHandler_RDFStore" }
            },
            {
              "@type": "StaticThrowHandler",
              "error": { "@type": "UnsupportedMediaTypeHttpError" }
            }
          ]
        }
      }
    },
    {
      "@id": "urn:solid-server:default:PatchHandler_RDFStore",
      "@type": "WaterfallHandler",
      "handlers": [
        { "@id": "urn:solid-server:default:PatchHandler_ImmutableMetadata"},
        { "@id": "urn:solid-server:default:PatchHandler_RDF" }
      ]
    },
    {
      "comment": "Patches metadata resources. Prevents specific triple patterns from being updated.",
      "@id": "urn:solid-server:default:PatchHandler_ImmutableMetadata",
      "@type": "ImmutableMetadataPatcher",
      "patcher": { "@id": "urn:solid-server:default:PatchHandler_RDF" },
      "metadataStrategy": { "@id": "urn:solid-server:default:MetadataStrategy" },
      "immutablePatterns": [
        {
          "comment": "Pattern corresponding to the root storage of a Solid Pod.",
          "@type": "FilterPattern",
          "predicate": "http://www.w3.org/1999/02/22-rdf-syntax-ns#type",
          "object": "http://www.w3.org/ns/pim/space#Storage"
        },
        {
          "comment": "Pattern corresponding to the containment of resources.",
          "@type": "FilterPattern",
          "predicate": "http://www.w3.org/ns/ldp#contains"
        },
        {
          "comment": "Pattern corresponding to describing the location of the metadata resource.",
          "@type": "FilterPattern",
          "predicate": "http://purl.org/dc/terms/description"
        },
        {
          "comment": "Pattern corresponding to describing the location of the access control resource.",
          "@type": "FilterPattern",
          "predicate": "http://www.w3.org/ns/auth/acl#accessControl"
        },
        {
          "comment": "Pattern corresponding to describing the size of the resource.",
          "@type": "FilterPattern",
          "predicate": "http://www.w3.org/ns/posix/stat#size"
        },
        {
          "comment": "Pattern corresponding to describing the last modified timestamp of a resource.",
          "@type": "FilterPattern",
          "predicate": "http://www.w3.org/ns/posix/stat#mtime"
        },
        {
          "comment": "Pattern corresponding to describing the last modified datetime of a resource.",
          "@type": "FilterPattern",
          "predicate": "http://purl.org/dc/terms/modified"
        },
        {
          "comment": "Pattern corresponding to describing the content type of a resource.",
          "@type": "FilterPattern",
          "predicate": "http://www.w3.org/ns/ma-ont#format"
        }
      ]
    },
    {
      "comment": "Dedicated handlers that apply specific types of patch documents",
      "@id": "urn:solid-server:default:PatchHandler_RDF",
      "@type": "WaterfallHandler",
      "handlers": [
        { "@type": "N3Patcher" },
        { "@type": "SparqlUpdatePatcher" }
      ]
    }
  ]
}
